(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,t,r)=>{"use strict";var n=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;r.c=function(e){return n.H.useMemoCache(e)}},932,(e,t,r)=>{"use strict";t.exports=e.r(79474)},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=e.r(32061);function a({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new n.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function n(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return n}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return l}});let n=e.r(43476),a=e.r(74080),i=e.r(63599),o=e.r(9885),s=e.r(43369);function l({moduleIds:e}){if("undefined"!=typeof window)return null;let t=i.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let n=t.reactLoadableManifest;for(let t of e){if(!n[t])continue;let e=n[t].files;r.push(...e)}}if(0===r.length)return null;let l=(0,s.getDeploymentIdQueryOrEmptyString)();return(0,n.jsx)(n.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,o.encodeURIPath)(e)}${l}`;return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,a.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return u}});let n=e.r(43476),a=e.r(71645),i=e.r(67585),o=e.r(52157);function s(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},u=function(e){let t={...l,...e},r=(0,a.lazy)(()=>t.loader().then(s)),u=t.loading;function c(e){let s=u?(0,n.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,c=l?a.Suspense:a.Fragment,d=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(c,{...l?{fallback:s}:{},children:d})}return c.displayName="LoadableComponent",c}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let n=e.r(55682)._(e.r(69093));function a(e,t){let r={};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,n.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},52683,e=>{"use strict";let t,r,n;var a,i,o,s,l,u,c,d,f,h,p,v=e.i(43476),m=e.i(71645),g=e.i(932);let y=(0,e.i(70703).default)(()=>e.A(87280).then(e=>e.Canvas),{loadableGenerated:{modules:[72700]},ssr:!1});function b(e){let t,r,n,a,i,o,s,l=(0,g.c)(12),{children:u,className:c,onPointerMissed:d}=e,f=`w-full h-full ${c||""}`;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:[0,0,.1],fov:60,near:.01,far:500},r=[1,2],n={min:.5},a={antialias:!0,alpha:!0,powerPreference:"high-performance"},l[0]=t,l[1]=r,l[2]=n,l[3]=a):(t=l[0],r=l[1],n=l[2],a=l[3]),l[4]!==u?(i=(0,v.jsx)(m.Suspense,{fallback:null,children:u}),l[4]=u,l[5]=i):i=l[5],l[6]!==d||l[7]!==i?(o=(0,v.jsx)(y,{camera:t,dpr:r,performance:n,gl:a,onPointerMissed:d,children:i}),l[6]=d,l[7]=i,l[8]=o):o=l[8],l[9]!==f||l[10]!==o?(s=(0,v.jsx)("div",{className:f,children:o}),l[9]=f,l[10]=o,l[11]=s):s=l[11],s}var x=e.i(40859),x=x;function S(){return(S=Object.assign.bind()).apply(null,arguments)}var w=x,x=x,M=e.i(90072),U=Object.defineProperty;class _{constructor(){((e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?U(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r})(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let r=this._listeners[e];if(void 0!==r){let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let r=t.slice(0);for(let t=0,n=r.length;t<n;t++)r[t].call(this,e);e.target=null}}}var k=Object.defineProperty,T=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?k(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,r};let C=new M.Ray,E=new M.Plane,A=Math.cos(Math.PI/180*70),F=(e,t)=>(e%t+t)%t;class P extends _{constructor(e,t){super(),T(this,"object"),T(this,"domElement"),T(this,"enabled",!0),T(this,"target",new M.Vector3),T(this,"minDistance",0),T(this,"maxDistance",1/0),T(this,"minZoom",0),T(this,"maxZoom",1/0),T(this,"minPolarAngle",0),T(this,"maxPolarAngle",Math.PI),T(this,"minAzimuthAngle",-1/0),T(this,"maxAzimuthAngle",1/0),T(this,"enableDamping",!1),T(this,"dampingFactor",.05),T(this,"enableZoom",!0),T(this,"zoomSpeed",1),T(this,"enableRotate",!0),T(this,"rotateSpeed",1),T(this,"enablePan",!0),T(this,"panSpeed",1),T(this,"screenSpacePanning",!0),T(this,"keyPanSpeed",7),T(this,"zoomToCursor",!1),T(this,"autoRotate",!1),T(this,"autoRotateSpeed",2),T(this,"reverseOrbit",!1),T(this,"reverseHorizontalOrbit",!1),T(this,"reverseVerticalOrbit",!1),T(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),T(this,"mouseButtons",{LEFT:M.MOUSE.ROTATE,MIDDLE:M.MOUSE.DOLLY,RIGHT:M.MOUSE.PAN}),T(this,"touches",{ONE:M.TOUCH.ROTATE,TWO:M.TOUCH.DOLLY_PAN}),T(this,"target0"),T(this,"position0"),T(this,"zoom0"),T(this,"_domElementKeyEvents",null),T(this,"getPolarAngle"),T(this,"getAzimuthalAngle"),T(this,"setPolarAngle"),T(this,"setAzimuthalAngle"),T(this,"getDistance"),T(this,"getZoomScale"),T(this,"listenToKeyEvents"),T(this,"stopListenToKeyEvents"),T(this,"saveState"),T(this,"reset"),T(this,"update"),T(this,"connect"),T(this,"dispose"),T(this,"dollyIn"),T(this,"dollyOut"),T(this,"getScale"),T(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=e=>{let t=F(e,2*Math.PI),n=u.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);let a=Math.abs(t-n);2*Math.PI-a<a&&(t<n?t+=2*Math.PI:n+=2*Math.PI),c.phi=t-n,r.update()},this.setAzimuthalAngle=e=>{let t=F(e,2*Math.PI),n=u.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);let a=Math.abs(t-n);2*Math.PI-a<a&&(t<n?t+=2*Math.PI:n+=2*Math.PI),c.theta=t-n,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",ee),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ee),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(n),r.update(),s=o.NONE},this.update=(()=>{let t=new M.Vector3,a=new M.Vector3(0,1,0),i=new M.Quaternion().setFromUnitVectors(e.up,a),h=i.clone().invert(),p=new M.Vector3,v=new M.Quaternion,m=2*Math.PI;return function(){let g=r.object.position;i.setFromUnitVectors(e.up,a),h.copy(i).invert(),t.copy(g).sub(r.target),t.applyQuaternion(i),u.setFromVector3(t),r.autoRotate&&s===o.NONE&&O(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(u.theta+=c.theta*r.dampingFactor,u.phi+=c.phi*r.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let y=r.minAzimuthAngle,b=r.maxAzimuthAngle;isFinite(y)&&isFinite(b)&&(y<-Math.PI?y+=m:y>Math.PI&&(y-=m),b<-Math.PI?b+=m:b>Math.PI&&(b-=m),y<=b?u.theta=Math.max(y,Math.min(b,u.theta)):u.theta=u.theta>(y+b)/2?Math.max(y,u.theta):Math.min(b,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),!0===r.enableDamping?r.target.addScaledVector(f,r.dampingFactor):r.target.add(f),r.zoomToCursor&&_||r.object.isOrthographicCamera?u.radius=B(u.radius):u.radius=B(u.radius*d),t.setFromSpherical(u),t.applyQuaternion(h),g.copy(r.target).add(t),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),!0===r.enableDamping?(c.theta*=1-r.dampingFactor,c.phi*=1-r.dampingFactor,f.multiplyScalar(1-r.dampingFactor)):(c.set(0,0,0),f.set(0,0,0));let x=!1;if(r.zoomToCursor&&_){let n=null;if(r.object instanceof M.PerspectiveCamera&&r.object.isPerspectiveCamera){let e=t.length();n=B(e*d);let a=e-n;r.object.position.addScaledVector(w,a),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){let e=new M.Vector3(U.x,U.y,0);e.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),x=!0;let a=new M.Vector3(U.x,U.y,0);a.unproject(r.object),r.object.position.sub(a).add(e),r.object.updateMatrixWorld(),n=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;null!==n&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(n).add(r.object.position):(C.origin.copy(r.object.position),C.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(C.direction))<A?e.lookAt(r.target):(E.setFromNormalAndCoplanarPoint(r.object.up,r.target),C.intersectPlane(E,r.target))))}else r.object instanceof M.OrthographicCamera&&r.object.isOrthographicCamera&&(x=1!==d)&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix());return d=1,_=!1,!!(x||p.distanceToSquared(r.object.position)>l||8*(1-v.dot(r.object.quaternion))>l)&&(r.dispatchEvent(n),p.copy(r.object.position),v.copy(r.object.quaternion),x=!1,!0)}})(),this.connect=e=>{r.domElement=e,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",et),r.domElement.addEventListener("pointerdown",K),r.domElement.addEventListener("pointercancel",Q),r.domElement.addEventListener("wheel",J)},this.dispose=()=>{var e,t,n,a,i,o;r.domElement&&(r.domElement.style.touchAction="auto"),null==(e=r.domElement)||e.removeEventListener("contextmenu",et),null==(t=r.domElement)||t.removeEventListener("pointerdown",K),null==(n=r.domElement)||n.removeEventListener("pointercancel",Q),null==(a=r.domElement)||a.removeEventListener("wheel",J),null==(i=r.domElement)||i.ownerDocument.removeEventListener("pointermove",Z),null==(o=r.domElement)||o.ownerDocument.removeEventListener("pointerup",Q),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",ee)};const r=this,n={type:"change"},a={type:"start"},i={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const l=1e-6,u=new M.Spherical,c=new M.Spherical;let d=1;const f=new M.Vector3,h=new M.Vector2,p=new M.Vector2,v=new M.Vector2,m=new M.Vector2,g=new M.Vector2,y=new M.Vector2,b=new M.Vector2,x=new M.Vector2,S=new M.Vector2,w=new M.Vector3,U=new M.Vector2;let _=!1;const k=[],P={};function D(){return Math.pow(.95,r.zoomSpeed)}function O(e){r.reverseOrbit||r.reverseHorizontalOrbit?c.theta+=e:c.theta-=e}function j(e){r.reverseOrbit||r.reverseVerticalOrbit?c.phi+=e:c.phi-=e}const R=(()=>{let e=new M.Vector3;return function(t,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-t),f.add(e)}})(),I=(()=>{let e=new M.Vector3;return function(t,n){!0===r.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),f.add(e)}})(),L=(()=>{let e=new M.Vector3;return function(t,n){let a=r.domElement;if(a&&r.object instanceof M.PerspectiveCamera&&r.object.isPerspectiveCamera){let i=r.object.position;e.copy(i).sub(r.target);let o=e.length();R(2*t*(o*=Math.tan(r.object.fov/2*Math.PI/180))/a.clientHeight,r.object.matrix),I(2*n*o/a.clientHeight,r.object.matrix)}else a&&r.object instanceof M.OrthographicCamera&&r.object.isOrthographicCamera?(R(t*(r.object.right-r.object.left)/r.object.zoom/a.clientWidth,r.object.matrix),I(n*(r.object.top-r.object.bottom)/r.object.zoom/a.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function z(e){r.object instanceof M.PerspectiveCamera&&r.object.isPerspectiveCamera||r.object instanceof M.OrthographicCamera&&r.object.isOrthographicCamera?d=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function N(e){if(!r.zoomToCursor||!r.domElement)return;_=!0;let t=r.domElement.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top,i=t.width,o=t.height;U.x=n/i*2-1,U.y=-(a/o*2)+1,w.set(U.x,U.y,1).unproject(r.object).sub(r.object.position).normalize()}function B(e){return Math.max(r.minDistance,Math.min(r.maxDistance,e))}function G(e){h.set(e.clientX,e.clientY)}function V(e){m.set(e.clientX,e.clientY)}function W(){if(1==k.length)h.set(k[0].pageX,k[0].pageY);else{let e=.5*(k[0].pageX+k[1].pageX),t=.5*(k[0].pageY+k[1].pageY);h.set(e,t)}}function q(){if(1==k.length)m.set(k[0].pageX,k[0].pageY);else{let e=.5*(k[0].pageX+k[1].pageX),t=.5*(k[0].pageY+k[1].pageY);m.set(e,t)}}function H(){let e=k[0].pageX-k[1].pageX,t=k[0].pageY-k[1].pageY,r=Math.sqrt(e*e+t*t);b.set(0,r)}function X(e){if(1==k.length)p.set(e.pageX,e.pageY);else{let t=en(e),r=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);p.set(r,n)}v.subVectors(p,h).multiplyScalar(r.rotateSpeed);let t=r.domElement;t&&(O(2*Math.PI*v.x/t.clientHeight),j(2*Math.PI*v.y/t.clientHeight)),h.copy(p)}function Y(e){if(1==k.length)g.set(e.pageX,e.pageY);else{let t=en(e),r=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);g.set(r,n)}y.subVectors(g,m).multiplyScalar(r.panSpeed),L(y.x,y.y),m.copy(g)}function $(e){var t;let n=en(e),a=e.pageX-n.x,i=e.pageY-n.y,o=Math.sqrt(a*a+i*i);x.set(0,o),S.set(0,Math.pow(x.y/b.y,r.zoomSpeed)),t=S.y,z(d/t),b.copy(x)}function K(e){var t,n,i;!1!==r.enabled&&(0===k.length&&(null==(t=r.domElement)||t.ownerDocument.addEventListener("pointermove",Z),null==(n=r.domElement)||n.ownerDocument.addEventListener("pointerup",Q)),i=e,k.push(i),"touch"===e.pointerType?function(e){switch(er(e),k.length){case 1:switch(r.touches.ONE){case M.TOUCH.ROTATE:if(!1===r.enableRotate)return;W(),s=o.TOUCH_ROTATE;break;case M.TOUCH.PAN:if(!1===r.enablePan)return;q(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(r.touches.TWO){case M.TOUCH.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&H(),r.enablePan&&q(),s=o.TOUCH_DOLLY_PAN;break;case M.TOUCH.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&H(),r.enableRotate&&W(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&r.dispatchEvent(a)}(e):function(e){let t;switch(e.button){case 0:t=r.mouseButtons.LEFT;break;case 1:t=r.mouseButtons.MIDDLE;break;case 2:t=r.mouseButtons.RIGHT;break;default:t=-1}switch(t){case M.MOUSE.DOLLY:if(!1===r.enableZoom)return;N(e),b.set(e.clientX,e.clientY),s=o.DOLLY;break;case M.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;V(e),s=o.PAN}else{if(!1===r.enableRotate)return;G(e),s=o.ROTATE}break;case M.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;G(e),s=o.ROTATE}else{if(!1===r.enablePan)return;V(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&r.dispatchEvent(a)}(e))}function Z(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(er(e),s){case o.TOUCH_ROTATE:if(!1===r.enableRotate)return;X(e),r.update();break;case o.TOUCH_PAN:if(!1===r.enablePan)return;Y(e),r.update();break;case o.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&$(e),r.enablePan&&Y(e),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&$(e),r.enableRotate&&X(e),r.update();break;default:s=o.NONE}}(e):function(e){if(!1!==r.enabled)switch(s){case o.ROTATE:let t;if(!1===r.enableRotate)return;p.set(e.clientX,e.clientY),v.subVectors(p,h).multiplyScalar(r.rotateSpeed),(t=r.domElement)&&(O(2*Math.PI*v.x/t.clientHeight),j(2*Math.PI*v.y/t.clientHeight)),h.copy(p),r.update();break;case o.DOLLY:var n,a;if(!1===r.enableZoom)return;(x.set(e.clientX,e.clientY),S.subVectors(x,b),S.y>0)?(n=D(),z(d/n)):S.y<0&&(a=D(),z(d*a)),b.copy(x),r.update();break;case o.PAN:if(!1===r.enablePan)return;g.set(e.clientX,e.clientY),y.subVectors(g,m).multiplyScalar(r.panSpeed),L(y.x,y.y),m.copy(g),r.update()}}(e))}function Q(e){var t,n,a;(function(e){delete P[e.pointerId];for(let t=0;t<k.length;t++)if(k[t].pointerId==e.pointerId)return void k.splice(t,1)})(e),0===k.length&&(null==(t=r.domElement)||t.releasePointerCapture(e.pointerId),null==(n=r.domElement)||n.ownerDocument.removeEventListener("pointermove",Z),null==(a=r.domElement)||a.ownerDocument.removeEventListener("pointerup",Q)),r.dispatchEvent(i),s=o.NONE}function J(e){if(!1!==r.enabled&&!1!==r.enableZoom&&(s===o.NONE||s===o.ROTATE)){var t,n;e.preventDefault(),r.dispatchEvent(a),(N(e),e.deltaY<0)?(t=D(),z(d*t)):e.deltaY>0&&(n=D(),z(d/n)),r.update(),r.dispatchEvent(i)}}function ee(e){if(!1!==r.enabled&&!1!==r.enablePan){let t=!1;switch(e.code){case r.keys.UP:L(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:L(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:L(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:L(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}}function et(e){!1!==r.enabled&&e.preventDefault()}function er(e){let t=P[e.pointerId];void 0===t&&(t=new M.Vector2,P[e.pointerId]=t),t.set(e.pageX,e.pageY)}function en(e){return P[(e.pointerId===k[0].pointerId?k[1]:k[0]).pointerId]}this.dollyIn=(e=D())=>{z(d*e),r.update()},this.dollyOut=(e=D())=>{z(d/e),r.update()},this.getScale=()=>d,this.setScale=e=>{z(e),r.update()},this.getZoomScale=()=>D(),void 0!==t&&this.connect(t),this.update()}}let D=m.forwardRef(({makeDefault:e,camera:t,regress:r,domElement:n,enableDamping:a=!0,keyEvents:i=!1,onChange:o,onStart:s,onEnd:l,...u},c)=>{let d=(0,w.C)(e=>e.invalidate),f=(0,w.C)(e=>e.camera),h=(0,w.C)(e=>e.gl),p=(0,w.C)(e=>e.events),v=(0,w.C)(e=>e.setEvents),g=(0,w.C)(e=>e.set),y=(0,w.C)(e=>e.get),b=(0,w.C)(e=>e.performance),M=t||f,U=n||p.connected||h.domElement,_=m.useMemo(()=>new P(M),[M]);return(0,x.D)(()=>{_.enabled&&_.update()},-1),m.useEffect(()=>(i&&_.connect(!0===i?U:i),_.connect(U),()=>void _.dispose()),[i,U,r,_,d]),m.useEffect(()=>{let e=e=>{d(),r&&b.regress(),o&&o(e)},t=e=>{s&&s(e)},n=e=>{l&&l(e)};return _.addEventListener("change",e),_.addEventListener("start",t),_.addEventListener("end",n),()=>{_.removeEventListener("start",t),_.removeEventListener("end",n),_.removeEventListener("change",e)}},[o,s,l,_,d,v]),m.useEffect(()=>{if(e){let e=y().controls;return g({controls:_}),()=>g({controls:e})}},[e,_]),m.createElement("primitive",S({ref:c,object:_,enableDamping:a},u))}),O=new M.Euler,j=new M.Quaternion,R=new M.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),I=new M.Vector3(0,0,1);var x=x,L=M;function z(){var e=Object.create(null);function t(e,t){var r=void 0;self.troikaDefine=function(e){return r=e};var n=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(e){console.error(e)}return URL.revokeObjectURL(n),delete self.troikaDefine,r}self.addEventListener("message",function(r){var n=r.data,a=n.messageId,i=n.action,o=n.data;try{"registerModule"===i&&function r(n,a){var i=n.id,o=n.name,s=n.dependencies;void 0===s&&(s=[]);var l=n.init;void 0===l&&(l=function(){});var u=n.getTransferables;if(void 0===u&&(u=null),!e[i])try{s=s.map(function(t){return t&&t.isWorkerModule&&(r(t,function(e){if(e instanceof Error)throw e}),t=e[t.id].value),t}),l=t("<"+o+">.init",l),u&&(u=t("<"+o+">.getTransferables",u));var c=null;"function"==typeof l?c=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[i]={id:i,value:c,getTransferables:u},a(c)}catch(e){e&&e.noLog||console.error(e),a(e)}}(o,function(e){e instanceof Error?postMessage({messageId:a,success:!1,error:e.message}):postMessage({messageId:a,success:!0,result:{isCallable:"function"==typeof e}})}),"callModule"===i&&function(t,r){var n,a=t.id,i=t.args;e[a]&&"function"==typeof e[a].value||r(Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var o=(n=e[a]).value.apply(n,i);o&&"function"==typeof o.then?o.then(s,function(e){return r(e instanceof Error?e:Error(""+e))}):s(o)}catch(e){r(e)}function s(t){try{var n=e[a].getTransferables&&e[a].getTransferables(t);n&&Array.isArray(n)&&n.length||(n=void 0),r(t,n)}catch(e){console.error(e),r(e)}}}(o,function(e,t){e instanceof Error?postMessage({messageId:a,success:!1,error:e.message}):postMessage({messageId:a,success:!0,result:e},t||void 0)})}catch(e){postMessage({messageId:a,success:!1,error:e.stack})}})}e.i(47167);var N=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return N=function(){return e},e},B=0,G=0,V=!1,W=Object.create(null),q=Object.create(null),H=Object.create(null);function X(e){if((!e||"function"!=typeof e.init)&&!V)throw Error("requires `options.init` function");var t,r=e.dependencies,n=e.init,a=e.getTransferables,i=e.workerId,o=((t=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return t._getInitResult().then(function(t){if("function"==typeof t)return t.apply(void 0,e);throw Error("Worker module function was called but `init` did not return a callable function")})})._getInitResult=function(){var r=e.dependencies,n=e.init,a=Promise.all(r=Array.isArray(r)?r.map(function(e){return e&&(e=e.onMainThread||e)._getInitResult&&(e=e._getInitResult()),e}):[]).then(function(e){return n.apply(null,e)});return t._getInitResult=function(){return a},a},t);null==i&&(i="#default");var s="workerModule"+ ++B,l=e.name||s,u=null;function c(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!N())return o.apply(void 0,e);if(!u){u=$(i,"registerModule",c.workerModuleData);var r=function(){u=null,q[i].delete(r)};(q[i]||(q[i]=new Set)).add(r)}return u.then(function(t){if(t.isCallable)return $(i,"callModule",{id:s,args:e});throw Error("Worker module function was called but `init` did not return a callable function")})}return r=r&&r.map(function(e){return"function"!=typeof e||e.workerModuleData||(V=!0,e=X({workerId:i,name:"<"+l+"> function dependency: "+e.name,init:"function(){return (\n"+Y(e)+"\n)}"}),V=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e}),c.workerModuleData={isWorkerModule:!0,id:s,name:l,dependencies:r,init:Y(n),getTransferables:a&&Y(a)},c.onMainThread=o,c}function Y(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function $(e,t,r){return new Promise(function(n,a){var i=++G;H[i]=function(e){e.success?n(e.result):a(Error("Error in worker "+t+" call: "+e.error))},(function(e){var t=W[e];if(!t){var r=Y(z);(t=W[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,r=t.messageId,n=H[r];if(!n)throw Error("WorkerModule response with empty or unknown messageId");delete H[r],n(t)}}return t})(e).postMessage({messageId:i,action:t,data:r})})}function K(){return function(e){function t(e,t){for(var r,n,a,i,o,s=/([MLQCZ])([^MLQCZ]*)/g;r=s.exec(e);){var l=r[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(e){return parseFloat(e)});switch(r[1]){case"M":i=n=l[0],o=a=l[1];break;case"L":(l[0]!==i||l[1]!==o)&&t("L",i,o,i=l[0],o=l[1]);break;case"Q":t("Q",i,o,i=l[2],o=l[3],l[0],l[1]);break;case"C":t("C",i,o,i=l[4],o=l[5],l[0],l[1],l[2],l[3]);break;case"Z":(i!==n||o!==a)&&t("L",i,o,n,a)}}}function r(e,r,n){void 0===n&&(n=16);var a={x:0,y:0};t(e,function(e,t,i,o,s,l,u,c,d){switch(e){case"L":r(t,i,o,s);break;case"Q":for(var f=t,h=i,p=1;p<n;p++)!function(e,t,r,n,a,i,o,s){var l=1-o;s.x=l*l*e+2*l*o*r+o*o*a,s.y=l*l*t+2*l*o*n+o*o*i}(t,i,l,u,o,s,p/(n-1),a),r(f,h,a.x,a.y),f=a.x,h=a.y;break;case"C":for(var v=t,m=i,g=1;g<n;g++)!function(e,t,r,n,a,i,o,s,l,u){var c=1-l;u.x=c*c*c*e+3*c*c*l*r+3*c*l*l*a+l*l*l*o,u.y=c*c*c*t+3*c*c*l*n+3*c*l*l*i+l*l*l*s}(t,i,l,u,c,d,o,s,g/(n-1),a),r(v,m,a.x,a.y),v=a.x,m=a.y}})}var n="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a=new WeakMap,i={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function o(e,t){var r=e.getContext?e.getContext("webgl",i):e,n=a.get(r);if(!n){var o="undefined"!=typeof WebGL2RenderingContext&&r instanceof WebGL2RenderingContext,s={},l={},u={},c=-1,d=[];function f(e){var t=s[e];if(!t&&!(t=s[e]=r.getExtension(e)))throw Error(e+" not supported");return t}function h(e,t){var n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}function p(){s={},l={},u={},c=-1,d.length=0}r.canvas.addEventListener("webglcontextlost",function(e){p(),e.preventDefault()},!1),a.set(r,n={gl:r,isWebGL2:o,getExtension:f,withProgram:function(e,t,n,a){if(!l[e]){var i={},s={},u=r.createProgram();r.attachShader(u,h(t,r.VERTEX_SHADER)),r.attachShader(u,h(n,r.FRAGMENT_SHADER)),r.linkProgram(u),l[e]={program:u,transaction:function(e){r.useProgram(u),e({setUniform:function(e,t){for(var n=[],a=arguments.length-2;a-- >0;)n[a]=arguments[a+2];var i=s[t]||(s[t]=r.getUniformLocation(u,t));r["uniform"+e].apply(r,[i].concat(n))},setAttribute:function(e,t,n,a,s){var l=i[e];l||(l=i[e]={buf:r.createBuffer(),loc:r.getAttribLocation(u,e),data:null}),r.bindBuffer(r.ARRAY_BUFFER,l.buf),r.vertexAttribPointer(l.loc,t,r.FLOAT,!1,0,0),r.enableVertexAttribArray(l.loc),o?r.vertexAttribDivisor(l.loc,a):f("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,a),s!==l.data&&(r.bufferData(r.ARRAY_BUFFER,s,n),l.data=s)}})}}}l[e].transaction(a)},withTexture:function(e,t){c++;try{r.activeTexture(r.TEXTURE0+c);var n=u[e];n||(n=u[e]=r.createTexture(),r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.bindTexture(r.TEXTURE_2D,n),t(n,c)}finally{c--}},withTextureFramebuffer:function(e,t,n){var a=r.createFramebuffer();d.push(a),r.bindFramebuffer(r.FRAMEBUFFER,a),r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,e),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);try{n(a)}finally{r.deleteFramebuffer(a),r.bindFramebuffer(r.FRAMEBUFFER,d[--d.length-1]||null)}},handleContextLoss:p})}t(n)}function s(e,t,r,a,i,s,l,u){void 0===l&&(l=15),void 0===u&&(u=null),o(e,function(e){var o=e.gl,c=e.withProgram;(0,e.withTexture)("copy",function(e,d){o.texImage2D(o.TEXTURE_2D,0,o.RGBA,i,s,0,o.RGBA,o.UNSIGNED_BYTE,t),c("copy",n,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,o.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),o.bindFramebuffer(o.FRAMEBUFFER,u||null),o.disable(o.BLEND),o.colorMask(8&l,4&l,2&l,1&l),o.viewport(r,a,i,s),o.scissor(r,a,i,s),o.drawArrays(o.TRIANGLES,0,3)})})})}var l=Object.freeze({__proto__:null,withWebGLContext:o,renderImageData:s,resizeWebGLCanvasWithoutClearing:function(e,t,r){var n=e.width,a=e.height;o(e,function(i){var o=i.gl,l=new Uint8Array(n*a*4);o.readPixels(0,0,n,a,o.RGBA,o.UNSIGNED_BYTE,l),e.width=t,e.height=r,s(o,l,0,0,n,a)})}});function u(e,t,n,a,i,o){void 0===o&&(o=1);var s=new Uint8Array(e*t),l=a[2]-a[0],u=a[3]-a[1],c=[];r(n,function(e,t,r,n){c.push({x1:e,y1:t,x2:r,y2:n,minX:Math.min(e,r),minY:Math.min(t,n),maxX:Math.max(e,r),maxY:Math.max(t,n)})}),c.sort(function(e,t){return e.maxX-t.maxX});for(var d=0;d<e;d++)for(var f=0;f<t;f++){var h=function(e,t){for(var r=1/0,n=1/0,a=c.length;a--;){var i=c[a];if(i.maxX+n<=e)break;if(e+n>i.minX&&t-n<i.maxY&&t+n>i.minY){var o=function(e,t,r,n,a,i){var o=a-r,s=i-n,l=o*o+s*s,u=l?Math.max(0,Math.min(1,((e-r)*o+(t-n)*s)/l)):0,c=e-(r+u*o),d=t-(n+u*s);return c*c+d*d}(e,t,i.x1,i.y1,i.x2,i.y2);o<r&&(n=Math.sqrt(r=o))}}return function(e,t){for(var r=0,n=c.length;n--;){var a=c[n];if(a.maxX<=e)break;a.y1>t!=a.y2>t&&e<(a.x2-a.x1)*(t-a.y1)/(a.y2-a.y1)+a.x1&&(r+=a.y1<a.y2?1:-1)}return 0!==r}(e,t)&&(n=-n),n}(a[0]+l*(d+.5)/e,a[1]+u*(f+.5)/t),p=Math.pow(1-Math.abs(h)/i,o)/2;h<0&&(p=1-p),p=Math.max(0,Math.min(255,Math.round(255*p))),s[f*e+d]=p}return s}function c(e,t,r,n,a,i,o,s,l,u){void 0===i&&(i=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),d(e,t,r,n,a,i,o,null,s,l,u)}function d(e,t,r,n,a,i,o,l,c,d,f){void 0===i&&(i=1),void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0);for(var h=u(e,t,r,n,a,i),p=new Uint8Array(4*h.length),v=0;v<h.length;v++)p[4*v+f]=h[v];s(o,p,c,d,e,t,1<<3-f,l)}var f=Object.freeze({__proto__:null,generate:u,generateIntoCanvas:c,generateIntoFramebuffer:d}),h=new Float32Array([0,0,2,0,0,2]),p=null,v=!1,m={},g=new WeakMap;function y(e){if(!v&&!w(e))throw Error("WebGL generation not supported")}function b(e,t,r,n,a,i,s){if(void 0===i&&(i=1),void 0===s&&(s=null),!s&&!(s=p)){var l="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!l)throw Error("OffscreenCanvas or DOM canvas not supported");s=p=l.getContext("webgl",{depth:!1})}y(s);var u=new Uint8Array(e*t*4);o(s,function(o){var s=o.gl,l=o.withTexture,c=o.withTextureFramebuffer;l("readable",function(o,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),c(o,l,function(o){S(e,t,r,n,a,i,s,o,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,u)})})});for(var c=new Uint8Array(e*t),d=0,f=0;d<u.length;d+=4)c[f++]=u[d];return c}function x(e,t,r,n,a,i,o,s,l,u){void 0===i&&(i=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),S(e,t,r,n,a,i,o,null,s,l,u)}function S(e,t,a,i,s,l,u,c,d,f,p){void 0===l&&(l=1),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),y(u);var v=[];r(a,function(e,t,r,n){v.push(e,t,r,n)}),v=new Float32Array(v),o(u,function(r){var a=r.gl,o=r.isWebGL2,u=r.getExtension,m=r.withProgram,g=r.withTexture,y=r.withTextureFramebuffer,b=r.handleContextLoss;if(g("rawDistances",function(r,g){(e!==r._lastWidth||t!==r._lastHeight)&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r._lastWidth=e,r._lastHeight=t,0,a.RGBA,a.UNSIGNED_BYTE,null),m("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(n){var c=n.setAttribute,d=n.setUniform,f=!o&&u("ANGLE_instanced_arrays"),p=!o&&u("EXT_blend_minmax");c("aUV",2,a.STATIC_DRAW,0,h),c("aLineSegment",4,a.DYNAMIC_DRAW,1,v),d.apply(void 0,["4f","uGlyphBounds"].concat(i)),d("1f","uMaxDistance",s),d("1f","uExponent",l),y(r,g,function(r){a.enable(a.BLEND),a.colorMask(!0,!0,!0,!0),a.viewport(0,0,e,t),a.scissor(0,0,e,t),a.blendFunc(a.ONE,a.ONE),a.blendEquationSeparate(a.FUNC_ADD,o?a.MAX:p.MAX_EXT),a.clear(a.COLOR_BUFFER_BIT),o?a.drawArraysInstanced(a.TRIANGLES,0,3,v.length/4):f.drawArraysInstancedANGLE(a.TRIANGLES,0,3,v.length/4)})}),m("post",n,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(r){r.setAttribute("aUV",2,a.STATIC_DRAW,0,h),r.setUniform("1i","tex",g),a.bindFramebuffer(a.FRAMEBUFFER,c),a.disable(a.BLEND),a.colorMask(0===p,1===p,2===p,3===p),a.viewport(d,f,e,t),a.scissor(d,f,e,t),a.drawArrays(a.TRIANGLES,0,3)})}),a.isContextLost())throw b(),Error("webgl context lost")})}function w(e){var t=e&&e!==p?e.canvas||e:m,r=g.get(t);if(void 0===r){v=!0;var n=null;try{var a=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],i=b(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(r=i&&a.length===i.length&&i.every(function(e,t){return e===a[t]}))||(n="bad trial run results",console.info(a,i))}catch(e){r=!1,n=e.message}n&&console.warn("WebGL SDF generation not supported:",n),v=!1,g.set(t,r)}return r}var M=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:x,generateIntoFramebuffer:S,isSupported:w});return e.forEachPathCommand=t,e.generate=function(e,t,r,n,a,i){void 0===a&&(a=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===i&&(i=1);try{return b.apply(M,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),u.apply(f,arguments)}},e.generateIntoCanvas=function(e,t,r,n,a,i,o,s,l,u){void 0===a&&(a=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===i&&(i=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0);try{return x.apply(M,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),c.apply(f,arguments)}},e.javascript=f,e.pathToLineSegments=r,e.webgl=M,e.webglUtils=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}var Z=e.i(8560),Q=M;let J=/\bvoid\s+main\s*\(\s*\)\s*{/g;function ee(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){let r=Z.ShaderChunk[t];return r?ee(r):e})}let et=[];for(let e=0;e<256;e++)et[e]=(e<16?"0":"")+e.toString(16);let er=Object.assign||function(){let e=arguments[0];for(let t=1,r=arguments.length;t<r;t++){let r=arguments[t];if(r)for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},en=Date.now(),ea=new WeakMap,ei=new Map,eo=1e10;function es(e,t){let r,n,a=(r=JSON.stringify(t,eu),null==(n=ed.get(r))&&ed.set(r,n=++ec),n),i=ea.get(e);if(i||ea.set(e,i=Object.create(null)),i[a])return new i[a];let o=`_onBeforeCompile${a}`,s=function(r,n){e.onBeforeCompile.call(this,r,n);let i=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader,s=ei[i];if(!s){let e=function(e,{vertexShader:t,fragmentShader:r},n,a){let{vertexDefs:i,vertexMainIntro:o,vertexMainOutro:s,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:c,fragmentMainOutro:d,fragmentColorTransform:f,customRewriter:h,timeUniform:p}=n;if(i=i||"",o=o||"",s=s||"",u=u||"",c=c||"",d=d||"",(l||h)&&(t=ee(t)),(f||h)&&(r=ee(r=r.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),h){let e=h({vertexShader:t,fragmentShader:r});t=e.vertexShader,r=e.fragmentShader}if(f){let e=[];r=r.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,t=>(e.push(t),"")),d=`${f}
${e.join("\n")}
${d}`}if(p){let e=`
uniform float ${p};
`;i=e+i,u=e+u}return l&&(t=`vec3 troika_position_${a};
vec3 troika_normal_${a};
vec2 troika_uv_${a};
${t}
`,i=`${i}
void troikaVertexTransform${a}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${a} = vec3(position);
troika_normal_${a} = vec3(normal);
troika_uv_${a} = vec2(uv);
troikaVertexTransform${a}(troika_position_${a}, troika_normal_${a}, troika_uv_${a});
${o}
`,t=t.replace(/\b(position|normal|uv)\b/g,(e,t,r,n)=>/\battribute\s+vec[23]\s+$/.test(n.substr(0,r))?t:`troika_${t}_${a}`),e.map&&e.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${a}`))),{vertexShader:t=el(t,a,i,o,s),fragmentShader:r=el(r,a,u,c,d)}}(this,r,t,a);s=ei[i]=e}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,er(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-en}}),this[o]&&this[o](r)},l=function(){return u(t.chained?e:e.clone())},u=function(r){let n,i,o,s,l=Object.create(r,c);return Object.defineProperty(l,"baseMaterial",{value:e}),Object.defineProperty(l,"id",{value:eo++}),n=0xffffffff*Math.random()|0,i=0xffffffff*Math.random()|0,o=0xffffffff*Math.random()|0,s=0xffffffff*Math.random()|0,l.uuid=(et[255&n]+et[n>>8&255]+et[n>>16&255]+et[n>>24&255]+"-"+et[255&i]+et[i>>8&255]+"-"+et[i>>16&15|64]+et[i>>24&255]+"-"+et[63&o|128]+et[o>>8&255]+"-"+et[o>>16&255]+et[o>>24&255]+et[255&s]+et[s>>8&255]+et[s>>16&255]+et[s>>24&255]).toUpperCase(),l.uniforms=er({},r.uniforms,t.uniforms),l.defines=er({},r.defines,t.defines),l.defines[`TROIKA_DERIVED_MATERIAL_${a}`]="",l.extensions=er({},r.extensions,t.extensions),l._listeners=void 0,l},c={constructor:{value:l},isDerivedMaterial:{value:!0},type:{get:()=>e.type,set:t=>{e.type=t}},isDerivedFrom:{writable:!0,configurable:!0,value:function(e){let t=this.baseMaterial;return e===t||t.isDerivedMaterial&&t.isDerivedFrom(e)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+a}},onBeforeCompile:{get:()=>s,set(e){this[o]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(er(this.extensions,t.extensions),er(this.defines,t.defines),er(this.uniforms,Q.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){return u(new e.constructor).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let r=this._depthMaterial;return r||((r=this._depthMaterial=es(e.isDerivedMaterial?e.getDepthMaterial():new Q.MeshDepthMaterial({depthPacking:Q.RGBADepthPacking}),t)).defines.IS_DEPTH_MATERIAL="",r.uniforms=this.uniforms),r}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let r=this._distanceMaterial;return r||((r=this._distanceMaterial=es(e.isDerivedMaterial?e.getDistanceMaterial():new Q.MeshDistanceMaterial,t)).defines.IS_DISTANCE_MATERIAL="",r.uniforms=this.uniforms),r}},dispose:{writable:!0,configurable:!0,value(){let{_depthMaterial:t,_distanceMaterial:r}=this;t&&t.dispose(),r&&r.dispose(),e.dispose.call(this)}}};return i[a]=l,new l}function el(e,t,r,n,a){return(n||a||r)&&(e=e.replace(J,`
${r}
void troikaOrigMain${t}() {`)+`
void main() {
  ${n}
  troikaOrigMain${t}();
  ${a}
}`),e}function eu(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let ec=0,ed=new Map,ef=`
uniform vec3 pointA;
uniform vec3 controlA;
uniform vec3 controlB;
uniform vec3 pointB;
uniform float radius;
varying float bezierT;

vec3 cubicBezier(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {
  float t2 = 1.0 - t;
  float b0 = t2 * t2 * t2;
  float b1 = 3.0 * t * t2 * t2;
  float b2 = 3.0 * t * t * t2;
  float b3 = t * t * t;
  return b0 * p1 + b1 * c1 + b2 * c2 + b3 * p2;
}

vec3 cubicBezierDerivative(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {
  float t2 = 1.0 - t;
  return -3.0 * p1 * t2 * t2 +
    c1 * (3.0 * t2 * t2 - 6.0 * t2 * t) +
    c2 * (6.0 * t2 * t - 3.0 * t * t) +
    3.0 * p2 * t * t;
}
`,eh=`
float t = position.y;
bezierT = t;
vec3 bezierCenterPos = cubicBezier(pointA, controlA, controlB, pointB, t);
vec3 bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t));

// Make "sideways" always perpendicular to the camera ray; this ensures that any twists
// in the cylinder occur where you won't see them: 
vec3 viewDirection = normalMatrix * vec3(0.0, 0.0, 1.0);
if (bezierDir == viewDirection) {
  bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t == 1.0 ? t - 0.0001 : t + 0.0001));
}
vec3 sideways = normalize(cross(bezierDir, viewDirection));
vec3 upish = normalize(cross(sideways, bezierDir));

// Build a matrix for transforming this disc in the cylinder:
mat4 discTx;
discTx[0].xyz = sideways * radius;
discTx[1].xyz = bezierDir * radius;
discTx[2].xyz = upish * radius;
discTx[3].xyz = bezierCenterPos;
discTx[3][3] = 1.0;

// Apply transform, ignoring original y
position = (discTx * vec4(position.x, 0.0, position.z, 1.0)).xyz;
normal = normalize(mat3(discTx) * normal);
`,ep=`
uniform vec3 dashing;
varying float bezierT;
`,ev=`
if (dashing.x + dashing.y > 0.0) {
  float dashFrac = mod(bezierT - dashing.z, dashing.x + dashing.y);
  if (dashFrac > dashing.x) {
    discard;
  }
}
`,em=null,eg=new Q.MeshStandardMaterial({color:0xffffff,side:Q.DoubleSide});class ey extends Q.Mesh{static getGeometry(){return em||(em=new Q.CylinderGeometry(1,1,1,6,64).translate(0,.5,0))}constructor(){super(ey.getGeometry(),eg),this.pointA=new Q.Vector3,this.controlA=new Q.Vector3,this.controlB=new Q.Vector3,this.pointB=new Q.Vector3,this.radius=.01,this.dashArray=new Q.Vector2,this.dashOffset=0,this.frustumCulled=!1}get material(){let e=this._derivedMaterial,t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=eg.clone());return e&&e.baseMaterial===t||(e=this._derivedMaterial=es(t,{chained:!0,uniforms:{pointA:{value:new Q.Vector3},controlA:{value:new Q.Vector3},controlB:{value:new Q.Vector3},pointB:{value:new Q.Vector3},radius:{value:.01},dashing:{value:new Q.Vector3}},vertexDefs:ef,vertexTransform:eh,fragmentDefs:ep,fragmentMainIntro:ev}),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),e}set material(e){this._baseMaterial=e}get customDepthMaterial(){return this.material.getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return this.material.getDistanceMaterial()}set customDistanceMaterial(e){}onBeforeRender(){let{uniforms:e}=this.material,{pointA:t,controlA:r,controlB:n,pointB:a,radius:i,dashArray:o,dashOffset:s}=this;e.pointA.value.copy(t),e.controlA.value.copy(r),e.controlB.value.copy(n),e.pointB.value.copy(a),e.radius.value=i,e.dashing.value.set(o.x,o.y,s||0)}raycast(){}}let eb=X({name:"Typr Font Parser",dependencies:[function(){var e,t,r;return"undefined"==typeof window&&(self.window=self),(e={},(t={parse:function(e){var r=t._bin,n=new Uint8Array(e);if("ttcf"==r.readASCII(n,0,4)){var a=4;r.readUshort(n,a),a+=2,r.readUshort(n,a),a+=2;var i=r.readUint(n,a);a+=4;for(var o=[],s=0;s<i;s++){var l=r.readUint(n,a);a+=4,o.push(t._readFont(n,l))}return o}return[t._readFont(n,0)]},_readFont:function(e,r){var n=t._bin,a=r;n.readFixed(e,r),r+=4;var i=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],s={_data:e,_offset:a},l={},u=0;u<i;u++){var c=n.readASCII(e,r,4);r+=4,n.readUint(e,r),r+=4;var d=n.readUint(e,r);r+=4;var f=n.readUint(e,r);r+=4,l[c]={offset:d,length:f}}for(u=0;u<o.length;u++){var h=o[u];l[h]&&(s[h.trim()]=t[h.trim()].parse(e,l[h].offset,l[h].length,s))}return s},_tabOffset:function(e,r,n){for(var a=t._bin,i=a.readUshort(e,n+4),o=n+12,s=0;s<i;s++){var l=a.readASCII(e,o,4);o+=4,a.readUint(e,o),o+=4;var u=a.readUint(e,o);if(o+=4,a.readUint(e,o),o+=4,l==r)return u}return 0}})._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,r){return t._bin.readShort(e,r)/16384},readInt:function(e,r){return t._bin._view(e).getInt32(r)},readInt8:function(e,r){return t._bin._view(e).getInt8(r)},readShort:function(e,r){return t._bin._view(e).getInt16(r)},readUshort:function(e,r){return t._bin._view(e).getUint16(r)},readUshorts:function(e,r,n){for(var a=[],i=0;i<n;i++)a.push(t._bin.readUshort(e,r+2*i));return a},readUint:function(e,r){return t._bin._view(e).getUint32(r)},readUint64:function(e,r){return 0x100000000*t._bin.readUint(e,r)+t._bin.readUint(e,r+4)},readASCII:function(e,t,r){for(var n="",a=0;a<r;a++)n+=String.fromCharCode(e[t+a]);return n},readUnicode:function(e,t,r){for(var n="",a=0;a<r;a++)n+=String.fromCharCode(e[t++]<<8|e[t++]);return n},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,r,n){var a=t._bin._tdec;return a&&0==r&&n==e.length?a.decode(e):t._bin.readASCII(e,r,n)},readBytes:function(e,t,r){for(var n=[],a=0;a<r;a++)n.push(e[t+a]);return n},readASCIIArray:function(e,t,r){for(var n=[],a=0;a<r;a++)n.push(String.fromCharCode(e[t+a]));return n},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,r,n,a,i){var o=t._bin,s={},l=r;o.readFixed(e,r),r+=4;var u=o.readUshort(e,r);r+=2;var c=o.readUshort(e,r);r+=2;var d=o.readUshort(e,r);return r+=2,s.scriptList=t._lctf.readScriptList(e,l+u),s.featureList=t._lctf.readFeatureList(e,l+c),s.lookupList=t._lctf.readLookupList(e,l+d,i),s},t._lctf.readLookupList=function(e,r,n){var a=t._bin,i=r,o=[],s=a.readUshort(e,r);r+=2;for(var l=0;l<s;l++){var u=a.readUshort(e,r);r+=2;var c=t._lctf.readLookupTable(e,i+u,n);o.push(c)}return o},t._lctf.readLookupTable=function(e,r,n){var a=t._bin,i=r,o={tabs:[]};o.ltype=a.readUshort(e,r),r+=2,o.flag=a.readUshort(e,r),r+=2;var s=a.readUshort(e,r);r+=2;for(var l=o.ltype,u=0;u<s;u++){var c=a.readUshort(e,r);r+=2;var d=n(e,l,i+c,o);o.tabs.push(d)}return o},t._lctf.numOfOnes=function(e){for(var t=0,r=0;r<32;r++)0!=(e>>>r&1)&&t++;return t},t._lctf.readClassDef=function(e,r){var n=t._bin,a=[],i=n.readUshort(e,r);if(r+=2,1==i){var o=n.readUshort(e,r);r+=2;var s=n.readUshort(e,r);r+=2;for(var l=0;l<s;l++)a.push(o+l),a.push(o+l),a.push(n.readUshort(e,r)),r+=2}if(2==i){var u=n.readUshort(e,r);for(r+=2,l=0;l<u;l++)a.push(n.readUshort(e,r)),r+=2,a.push(n.readUshort(e,r)),r+=2,a.push(n.readUshort(e,r)),r+=2}return a},t._lctf.getInterval=function(e,t){for(var r=0;r<e.length;r+=3){var n=e[r],a=e[r+1];if(e[r+2],n<=t&&t<=a)return r}return -1},t._lctf.readCoverage=function(e,r){var n=t._bin,a={};a.fmt=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);return r+=2,1==a.fmt&&(a.tab=n.readUshorts(e,r,i)),2==a.fmt&&(a.tab=n.readUshorts(e,r,3*i)),a},t._lctf.coverageIndex=function(e,r){var n=e.tab;if(1==e.fmt)return n.indexOf(r);if(2==e.fmt){var a=t._lctf.getInterval(n,r);if(-1!=a)return n[a+2]+(r-n[a])}return -1},t._lctf.readFeatureList=function(e,r){var n=t._bin,a=r,i=[],o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2;var c=t._lctf.readFeatureTable(e,a+u);c.tag=l.trim(),i.push(c)}return i},t._lctf.readFeatureTable=function(e,r){var n=t._bin,a=r,i={},o=n.readUshort(e,r);r+=2,o>0&&(i.featureParams=a+o);var s=n.readUshort(e,r);r+=2,i.tab=[];for(var l=0;l<s;l++)i.tab.push(n.readUshort(e,r+2*l));return i},t._lctf.readScriptList=function(e,r){var n=t._bin,a=r,i={},o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,i[l.trim()]=t._lctf.readScriptTable(e,a+u)}return i},t._lctf.readScriptTable=function(e,r){var n=t._bin,a=r,i={},o=n.readUshort(e,r);r+=2,o>0&&(i.default=t._lctf.readLangSysTable(e,a+o));var s=n.readUshort(e,r);r+=2;for(var l=0;l<s;l++){var u=n.readASCII(e,r,4);r+=4;var c=n.readUshort(e,r);r+=2,i[u.trim()]=t._lctf.readLangSysTable(e,a+c)}return i},t._lctf.readLangSysTable=function(e,r){var n=t._bin,a={};n.readUshort(e,r),r+=2,a.reqFeature=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);return r+=2,a.features=n.readUshorts(e,r,i),a},t.CFF={},t.CFF.parse=function(e,r,n){var a=t._bin;(e=new Uint8Array(e.buffer,r,n))[r=0],e[++r],e[++r],e[++r],r++;var i=[];r=t.CFF.readIndex(e,r,i);for(var o=[],s=0;s<i.length-1;s++)o.push(a.readASCII(e,r+i[s],i[s+1]-i[s]));r+=i[i.length-1];var l=[];r=t.CFF.readIndex(e,r,l);var u=[];for(s=0;s<l.length-1;s++)u.push(t.CFF.readDict(e,r+l[s],r+l[s+1]));r+=l[l.length-1];var c=u[0],d=[];r=t.CFF.readIndex(e,r,d);var f=[];for(s=0;s<d.length-1;s++)f.push(a.readASCII(e,r+d[s],d[s+1]-d[s]));if(r+=d[d.length-1],t.CFF.readSubrs(e,r,c),c.CharStrings){r=c.CharStrings,d=[],r=t.CFF.readIndex(e,r,d);var h=[];for(s=0;s<d.length-1;s++)h.push(a.readBytes(e,r+d[s],d[s+1]-d[s]));c.CharStrings=h}if(c.ROS){r=c.FDArray;var p=[];for(r=t.CFF.readIndex(e,r,p),c.FDArray=[],s=0;s<p.length-1;s++){var v=t.CFF.readDict(e,r+p[s],r+p[s+1]);t.CFF._readFDict(e,v,f),c.FDArray.push(v)}r+=p[p.length-1],r=c.FDSelect,c.FDSelect=[];var m=e[r];if(r++,3!=m)throw m;var g=a.readUshort(e,r);for(r+=2,s=0;s<g+1;s++)c.FDSelect.push(a.readUshort(e,r),e[r+2]),r+=3}return c.Encoding&&(c.Encoding=t.CFF.readEncoding(e,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=t.CFF.readCharset(e,c.charset,c.CharStrings.length)),t.CFF._readFDict(e,c,f),c},t.CFF._readFDict=function(e,r,n){var a;for(var i in r.Private&&(a=r.Private[1],r.Private=t.CFF.readDict(e,a,a+r.Private[0]),r.Private.Subrs&&t.CFF.readSubrs(e,a+r.Private.Subrs,r.Private)),r)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(i)&&(r[i]=n[r[i]-426+35])},t.CFF.readSubrs=function(e,r,n){var a=t._bin,i=[];r=t.CFF.readIndex(e,r,i);var o=i.length;n.Bias=o<1240?107:o<33900?1131:32768,n.Subrs=[];for(var s=0;s<i.length-1;s++)n.Subrs.push(a.readBytes(e,r+i[s],i[s+1]-i[s]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var r=0;r<e.charset.length;r++)if(e.charset[r]==t)return r;return -1},t.CFF.glyphBySE=function(e,r){return r<0||r>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[r])},t.CFF.readEncoding=function(e,r,n){t._bin;var a=[".notdef"],i=e[r];if(r++,0!=i)throw"error: unknown encoding format: "+i;var o=e[r];r++;for(var s=0;s<o;s++)a.push(e[r+s]);return a},t.CFF.readCharset=function(e,r,n){var a=t._bin,i=[".notdef"],o=e[r];if(r++,0==o)for(var s=0;s<n;s++){var l=a.readUshort(e,r);r+=2,i.push(l)}else{if(1!=o&&2!=o)throw"error: format: "+o;for(;i.length<n;){l=a.readUshort(e,r),r+=2;var u=0;for(1==o?(u=e[r],r++):(u=a.readUshort(e,r),r+=2),s=0;s<=u;s++)i.push(l),l++}}return i},t.CFF.readIndex=function(e,r,n){var a=t._bin,i=a.readUshort(e,r)+1,o=e[r+=2];if(r++,1==o)for(var s=0;s<i;s++)n.push(e[r+s]);else if(2==o)for(s=0;s<i;s++)n.push(a.readUshort(e,r+2*s));else if(3==o)for(s=0;s<i;s++)n.push(0xffffff&a.readUint(e,r+3*s-1));else if(1!=i)throw"unsupported offset size: "+o+", count: "+i;return(r+=i*o)-1},t.CFF.getCharString=function(e,r,n){var a=t._bin,i=e[r],o=e[r+1];e[r+2],e[r+3],e[r+4];var s=1,l=null,u=null;i<=20&&(l=i,s=1),12==i&&(l=100*i+o,s=2),21<=i&&i<=27&&(l=i,s=1),28==i&&(u=a.readShort(e,r+1),s=3),29<=i&&i<=31&&(l=i,s=1),32<=i&&i<=246&&(u=i-139,s=1),247<=i&&i<=250&&(u=256*(i-247)+o+108,s=2),251<=i&&i<=254&&(u=-(256*(i-251))-o-108,s=2),255==i&&(u=a.readInt(e,r+1)/65535,s=5),n.val=null!=u?u:"o"+l,n.size=s},t.CFF.readCharString=function(e,r,n){for(var a=r+n,i=t._bin,o=[];r<a;){var s=e[r],l=e[r+1];e[r+2],e[r+3],e[r+4];var u=1,c=null,d=null;s<=20&&(c=s,u=1),12==s&&(c=100*s+l,u=2),19!=s&&20!=s||(c=s,u=2),21<=s&&s<=27&&(c=s,u=1),28==s&&(d=i.readShort(e,r+1),u=3),29<=s&&s<=31&&(c=s,u=1),32<=s&&s<=246&&(d=s-139,u=1),247<=s&&s<=250&&(d=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(d=-(256*(s-251))-l-108,u=2),255==s&&(d=i.readInt(e,r+1)/65535,u=5),o.push(null!=d?d:"o"+c),r+=u}return o},t.CFF.readDict=function(e,r,n){for(var a=t._bin,i={},o=[];r<n;){var s=e[r],l=e[r+1];e[r+2],e[r+3],e[r+4];var u=1,c=null,d=null;if(28==s&&(d=a.readShort(e,r+1),u=3),29==s&&(d=a.readInt(e,r+1),u=5),32<=s&&s<=246&&(d=s-139,u=1),247<=s&&s<=250&&(d=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(d=-(256*(s-251))-l-108,u=2),255==s)throw d=a.readInt(e,r+1)/65535,u=5,"unknown number";if(30==s){var f=[];for(u=1;;){var h=e[r+u];u++;var p=h>>4,v=15&h;if(15!=p&&f.push(p),15!=v&&f.push(v),15==v)break}for(var m="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<f.length;y++)m+=g[f[y]];d=parseFloat(m)}s<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,12==s)&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],u=2),null!=c?(i[c]=1==o.length?o[0]:o,o=[]):o.push(d),r+=u}return i},t.cmap={},t.cmap.parse=function(e,r,n){e=new Uint8Array(e.buffer,r,n),r=0;var a=t._bin,i={};a.readUshort(e,r),r+=2;var o=a.readUshort(e,r);r+=2;var s=[];i.tables=[];for(var l=0;l<o;l++){var u=a.readUshort(e,r);r+=2;var c=a.readUshort(e,r);r+=2;var d=a.readUint(e,r);r+=4;var f="p"+u+"e"+c,h=s.indexOf(d);if(-1==h){h=i.tables.length,s.push(d);var p,v=a.readUshort(e,d);0==v?p=t.cmap.parse0(e,d):4==v?p=t.cmap.parse4(e,d):6==v?p=t.cmap.parse6(e,d):12==v?p=t.cmap.parse12(e,d):console.debug("unknown format: "+v,u,c,d),i.tables.push(p)}if(null!=i[f])throw"multiple tables for one platform+encoding";i[f]=h}return i},t.cmap.parse0=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,a.map=[];for(var o=0;o<i-6;o++)a.map.push(e[r+o]);return a},t.cmap.parse4=function(e,r){var n=t._bin,a=r,i={};i.format=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);r+=2;var l=s/2;i.searchRange=n.readUshort(e,r),r+=2,i.entrySelector=n.readUshort(e,r),r+=2,i.rangeShift=n.readUshort(e,r),r+=2,i.endCount=n.readUshorts(e,r,l),r+=2*l,r+=2,i.startCount=n.readUshorts(e,r,l),r+=2*l,i.idDelta=[];for(var u=0;u<l;u++)i.idDelta.push(n.readShort(e,r)),r+=2;for(i.idRangeOffset=n.readUshorts(e,r,l),r+=2*l,i.glyphIdArray=[];r<a+o;)i.glyphIdArray.push(n.readUshort(e,r)),r+=2;return i},t.cmap.parse6=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,a.firstCode=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);r+=2,a.glyphIdArray=[];for(var o=0;o<i;o++)a.glyphIdArray.push(n.readUshort(e,r)),r+=2;return a},t.cmap.parse12=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2,r+=2,n.readUint(e,r),r+=4,n.readUint(e,r),r+=4;var i=n.readUint(e,r);r+=4,a.groups=[];for(var o=0;o<i;o++){var s=r+12*o,l=n.readUint(e,s+0),u=n.readUint(e,s+4),c=n.readUint(e,s+8);a.groups.push([l,u,c])}return a},t.glyf={},t.glyf.parse=function(e,t,r,n){for(var a=[],i=0;i<n.maxp.numGlyphs;i++)a.push(null);return a},t.glyf._parseGlyf=function(e,r){var n,a=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[r];if(e.loca[r]==e.loca[r+1])return null;var s={};if(s.noc=a.readShort(i,o),o+=2,s.xMin=a.readShort(i,o),o+=2,s.yMin=a.readShort(i,o),o+=2,s.xMax=a.readShort(i,o),o+=2,s.yMax=a.readShort(i,o),o+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var l=0;l<s.noc;l++)s.endPts.push(a.readUshort(i,o)),o+=2;var u=a.readUshort(i,o);if(o+=2,i.length-o<u)return null;s.instructions=a.readBytes(i,o,u),o+=u;var c=s.endPts[s.noc-1]+1;for(l=0,s.flags=[];l<c;l++){var d=i[o];if(o++,s.flags.push(d),0!=(8&d)){var f=i[o];o++;for(var h=0;h<f;h++)s.flags.push(d),l++}}for(l=0,s.xs=[];l<c;l++){var p=0!=(2&s.flags[l]),v=0!=(16&s.flags[l]);p?(s.xs.push(v?i[o]:-i[o]),o++):v?s.xs.push(0):(s.xs.push(a.readShort(i,o)),o+=2)}for(l=0,s.ys=[];l<c;l++)p=0!=(4&s.flags[l]),v=0!=(32&s.flags[l]),p?(s.ys.push(v?i[o]:-i[o]),o++):v?s.ys.push(0):(s.ys.push(a.readShort(i,o)),o+=2);var m=0,g=0;for(l=0;l<c;l++)m+=s.xs[l],g+=s.ys[l],s.xs[l]=m,s.ys[l]=g}else{s.parts=[];do{n=a.readUshort(i,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(y),y.glyphIndex=a.readUshort(i,o),o+=2,1&n){var b=a.readShort(i,o);o+=2;var x=a.readShort(i,o);o+=2}else b=a.readInt8(i,o),o++,x=a.readInt8(i,o),o++;2&n?(y.m.tx=b,y.m.ty=x):(y.p1=b,y.p2=x),8&n?(y.m.a=y.m.d=a.readF2dot14(i,o),o+=2):64&n?(y.m.a=a.readF2dot14(i,o),o+=2,y.m.d=a.readF2dot14(i,o),o+=2):128&n&&(y.m.a=a.readF2dot14(i,o),o+=2,y.m.b=a.readF2dot14(i,o),o+=2,y.m.c=a.readF2dot14(i,o),o+=2,y.m.d=a.readF2dot14(i,o),o+=2)}while(32&n)if(256&n){var S=a.readUshort(i,o);for(o+=2,s.instr=[],l=0;l<S;l++)s.instr.push(i[o]),o++}}return s},t.GDEF={},t.GDEF.parse=function(e,r,n,a){var i=r;r+=4;var o=t._bin.readUshort(e,r);return{glyphClassDef:0===o?null:t._lctf.readClassDef(e,i+o)}},t.GPOS={},t.GPOS.parse=function(e,r,n,a){return t._lctf.parse(e,r,n,a,t.GPOS.subt)},t.GPOS.subt=function(e,r,n,a){var i=t._bin,o=n,s={};if(s.fmt=i.readUshort(e,n),n+=2,1==r||2==r||3==r||7==r||8==r&&s.fmt<=2){var l=i.readUshort(e,n);n+=2,s.coverage=t._lctf.readCoverage(e,l+o)}if(1==r&&1==s.fmt){var u=i.readUshort(e,n);n+=2,0!=u&&(s.pos=t.GPOS.readValueRecord(e,n,u))}else if(2==r&&s.fmt>=1&&s.fmt<=2){u=i.readUshort(e,n),n+=2;var c=i.readUshort(e,n);n+=2;var d=t._lctf.numOfOnes(u),f=t._lctf.numOfOnes(c);if(1==s.fmt){s.pairsets=[];var h=i.readUshort(e,n);n+=2;for(var p=0;p<h;p++){var v=o+i.readUshort(e,n);n+=2;var m=i.readUshort(e,v);v+=2;for(var g=[],y=0;y<m;y++){var b=i.readUshort(e,v);v+=2,0!=u&&(_=t.GPOS.readValueRecord(e,v,u),v+=2*d),0!=c&&(k=t.GPOS.readValueRecord(e,v,c),v+=2*f),g.push({gid2:b,val1:_,val2:k})}s.pairsets.push(g)}}if(2==s.fmt){var x=i.readUshort(e,n);n+=2;var S=i.readUshort(e,n);n+=2;var w=i.readUshort(e,n);n+=2;var M=i.readUshort(e,n);for(n+=2,s.classDef1=t._lctf.readClassDef(e,o+x),s.classDef2=t._lctf.readClassDef(e,o+S),s.matrix=[],p=0;p<w;p++){var U=[];for(y=0;y<M;y++){var _=null,k=null;0!=u&&(_=t.GPOS.readValueRecord(e,n,u),n+=2*d),0!=c&&(k=t.GPOS.readValueRecord(e,n,c),n+=2*f),U.push({val1:_,val2:k})}s.matrix.push(U)}}}else if(4==r&&1==s.fmt)s.markCoverage=t._lctf.readCoverage(e,i.readUshort(e,n)+o),s.baseCoverage=t._lctf.readCoverage(e,i.readUshort(e,n+2)+o),s.markClassCount=i.readUshort(e,n+4),s.markArray=t.GPOS.readMarkArray(e,i.readUshort(e,n+6)+o),s.baseArray=t.GPOS.readBaseArray(e,i.readUshort(e,n+8)+o,s.markClassCount);else if(6==r&&1==s.fmt)s.mark1Coverage=t._lctf.readCoverage(e,i.readUshort(e,n)+o),s.mark2Coverage=t._lctf.readCoverage(e,i.readUshort(e,n+2)+o),s.markClassCount=i.readUshort(e,n+4),s.mark1Array=t.GPOS.readMarkArray(e,i.readUshort(e,n+6)+o),s.mark2Array=t.GPOS.readBaseArray(e,i.readUshort(e,n+8)+o,s.markClassCount);else{if(9==r&&1==s.fmt){var T=i.readUshort(e,n);n+=2;var C=i.readUint(e,n);if(n+=4,9==a.ltype)a.ltype=T;else if(a.ltype!=T)throw"invalid extension substitution";return t.GPOS.subt(e,a.ltype,o+C)}console.debug("unsupported GPOS table LookupType",r,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,r,n){var a=t._bin,i=[];return i.push(1&n?a.readShort(e,r):0),r+=1&n?2:0,i.push(2&n?a.readShort(e,r):0),r+=2&n?2:0,i.push(4&n?a.readShort(e,r):0),r+=4&n?2:0,i.push(8&n?a.readShort(e,r):0),r+=8&n?2:0,i},t.GPOS.readBaseArray=function(e,r,n){var a=t._bin,i=[],o=r,s=a.readUshort(e,r);r+=2;for(var l=0;l<s;l++){for(var u=[],c=0;c<n;c++)u.push(t.GPOS.readAnchorRecord(e,o+a.readUshort(e,r))),r+=2;i.push(u)}return i},t.GPOS.readMarkArray=function(e,r){var n=t._bin,a=[],i=r,o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=t.GPOS.readAnchorRecord(e,n.readUshort(e,r+2)+i);l.markClass=n.readUshort(e,r),a.push(l),r+=4}return a},t.GPOS.readAnchorRecord=function(e,r){var n=t._bin,a={};return a.fmt=n.readUshort(e,r),a.x=n.readShort(e,r+2),a.y=n.readShort(e,r+4),a},t.GSUB={},t.GSUB.parse=function(e,r,n,a){return t._lctf.parse(e,r,n,a,t.GSUB.subt)},t.GSUB.subt=function(e,r,n,a){var i=t._bin,o=n,s={};if(s.fmt=i.readUshort(e,n),n+=2,1!=r&&2!=r&&4!=r&&5!=r&&6!=r)return null;if(1==r||2==r||4==r||5==r&&s.fmt<=2||6==r&&s.fmt<=2){var l=i.readUshort(e,n);n+=2,s.coverage=t._lctf.readCoverage(e,o+l)}if(1==r&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=i.readShort(e,n),n+=2;else if(2==s.fmt){var u=i.readUshort(e,n);n+=2,s.newg=i.readUshorts(e,n,u),n+=2*s.newg.length}}else if(2==r&&1==s.fmt){u=i.readUshort(e,n),n+=2,s.seqs=[];for(var c=0;c<u;c++){var d=i.readUshort(e,n)+o;n+=2;var f=i.readUshort(e,d);s.seqs.push(i.readUshorts(e,d+2,f))}}else if(4==r)for(s.vals=[],u=i.readUshort(e,n),n+=2,c=0;c<u;c++){var h=i.readUshort(e,n);n+=2,s.vals.push(t.GSUB.readLigatureSet(e,o+h))}else if(5==r&&2==s.fmt){if(2==s.fmt){var p=i.readUshort(e,n);n+=2,s.cDef=t._lctf.readClassDef(e,o+p),s.scset=[];var v=i.readUshort(e,n);for(n+=2,c=0;c<v;c++){var m=i.readUshort(e,n);n+=2,s.scset.push(0==m?null:t.GSUB.readSubClassSet(e,o+m))}}}else if(6==r&&3==s.fmt){if(3==s.fmt){for(c=0;c<3;c++){u=i.readUshort(e,n),n+=2;for(var g=[],y=0;y<u;y++)g.push(t._lctf.readCoverage(e,o+i.readUshort(e,n+2*y)));n+=2*u,0==c&&(s.backCvg=g),1==c&&(s.inptCvg=g),2==c&&(s.ahedCvg=g)}u=i.readUshort(e,n),n+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,n,u)}}else{if(7==r&&1==s.fmt){var b=i.readUshort(e,n);n+=2;var x=i.readUint(e,n);if(n+=4,9==a.ltype)a.ltype=b;else if(a.ltype!=b)throw"invalid extension substitution";return t.GSUB.subt(e,a.ltype,o+x)}console.debug("unsupported GSUB table LookupType",r,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,r){var n=t._bin.readUshort,a=r,i=[],o=n(e,r);r+=2;for(var s=0;s<o;s++){var l=n(e,r);r+=2,i.push(t.GSUB.readSubClassRule(e,a+l))}return i},t.GSUB.readSubClassRule=function(e,r){var n=t._bin.readUshort,a={},i=n(e,r),o=n(e,r+=2);r+=2,a.input=[];for(var s=0;s<i-1;s++)a.input.push(n(e,r)),r+=2;return a.substLookupRecords=t.GSUB.readSubstLookupRecords(e,r,o),a},t.GSUB.readSubstLookupRecords=function(e,r,n){for(var a=t._bin.readUshort,i=[],o=0;o<n;o++)i.push(a(e,r),a(e,r+2)),r+=4;return i},t.GSUB.readChainSubClassSet=function(e,r){var n=t._bin,a=r,i=[],o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=n.readUshort(e,r);r+=2,i.push(t.GSUB.readChainSubClassRule(e,a+l))}return i},t.GSUB.readChainSubClassRule=function(e,r){for(var n=t._bin,a={},i=["backtrack","input","lookahead"],o=0;o<i.length;o++){var s=n.readUshort(e,r);r+=2,1==o&&s--,a[i[o]]=n.readUshorts(e,r,s),r+=2*a[i[o]].length}return s=n.readUshort(e,r),r+=2,a.subst=n.readUshorts(e,r,2*s),r+=2*a.subst.length,a},t.GSUB.readLigatureSet=function(e,r){var n=t._bin,a=r,i=[],o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=n.readUshort(e,r);r+=2,i.push(t.GSUB.readLigature(e,a+l))}return i},t.GSUB.readLigature=function(e,r){var n=t._bin,a={chain:[]};a.nglyph=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);r+=2;for(var o=0;o<i-1;o++)a.chain.push(n.readUshort(e,r)),r+=2;return a},t.head={},t.head.parse=function(e,r,n){var a=t._bin,i={};return a.readFixed(e,r),r+=4,i.fontRevision=a.readFixed(e,r),r+=4,a.readUint(e,r),r+=4,a.readUint(e,r),r+=4,i.flags=a.readUshort(e,r),r+=2,i.unitsPerEm=a.readUshort(e,r),r+=2,i.created=a.readUint64(e,r),r+=8,i.modified=a.readUint64(e,r),r+=8,i.xMin=a.readShort(e,r),r+=2,i.yMin=a.readShort(e,r),r+=2,i.xMax=a.readShort(e,r),r+=2,i.yMax=a.readShort(e,r),r+=2,i.macStyle=a.readUshort(e,r),r+=2,i.lowestRecPPEM=a.readUshort(e,r),r+=2,i.fontDirectionHint=a.readShort(e,r),r+=2,i.indexToLocFormat=a.readShort(e,r),r+=2,i.glyphDataFormat=a.readShort(e,r),r+=2,i},t.hhea={},t.hhea.parse=function(e,r,n){var a=t._bin,i={};return a.readFixed(e,r),r+=4,i.ascender=a.readShort(e,r),r+=2,i.descender=a.readShort(e,r),r+=2,i.lineGap=a.readShort(e,r),r+=2,i.advanceWidthMax=a.readUshort(e,r),r+=2,i.minLeftSideBearing=a.readShort(e,r),r+=2,i.minRightSideBearing=a.readShort(e,r),r+=2,i.xMaxExtent=a.readShort(e,r),r+=2,i.caretSlopeRise=a.readShort(e,r),r+=2,i.caretSlopeRun=a.readShort(e,r),r+=2,i.caretOffset=a.readShort(e,r),r+=2,r+=8,i.metricDataFormat=a.readShort(e,r),r+=2,i.numberOfHMetrics=a.readUshort(e,r),r+=2,i},t.hmtx={},t.hmtx.parse=function(e,r,n,a){for(var i=t._bin,o={aWidth:[],lsBearing:[]},s=0,l=0,u=0;u<a.maxp.numGlyphs;u++)u<a.hhea.numberOfHMetrics&&(s=i.readUshort(e,r),r+=2,l=i.readShort(e,r),r+=2),o.aWidth.push(s),o.lsBearing.push(l);return o},t.kern={},t.kern.parse=function(e,r,n,a){var i=t._bin,o=i.readUshort(e,r);if(r+=2,1==o)return t.kern.parseV1(e,r-2,n,a);var s=i.readUshort(e,r);r+=2;for(var l={glyph1:[],rval:[]},u=0;u<s;u++){r+=2,n=i.readUshort(e,r),r+=2;var c=i.readUshort(e,r);r+=2;var d=c>>>8;if(0!=(d&=15))throw"unknown kern table format: "+d;r=t.kern.readFormat0(e,r,l)}return l},t.kern.parseV1=function(e,r,n,a){var i=t._bin;i.readFixed(e,r),r+=4;var o=i.readUint(e,r);r+=4;for(var s={glyph1:[],rval:[]},l=0;l<o;l++){i.readUint(e,r),r+=4;var u=i.readUshort(e,r);r+=2,i.readUshort(e,r),r+=2;var c=u>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;r=t.kern.readFormat0(e,r,s)}return s},t.kern.readFormat0=function(e,r,n){var a=t._bin,i=-1,o=a.readUshort(e,r);r+=2,a.readUshort(e,r),r+=2,a.readUshort(e,r),r+=2,a.readUshort(e,r),r+=2;for(var s=0;s<o;s++){var l=a.readUshort(e,r);r+=2;var u=a.readUshort(e,r);r+=2;var c=a.readShort(e,r);r+=2,l!=i&&(n.glyph1.push(l),n.rval.push({glyph2:[],vals:[]}));var d=n.rval[n.rval.length-1];d.glyph2.push(u),d.vals.push(c),i=l}return r},t.loca={},t.loca.parse=function(e,r,n,a){var i=t._bin,o=[],s=a.head.indexToLocFormat,l=a.maxp.numGlyphs+1;if(0==s)for(var u=0;u<l;u++)o.push(i.readUshort(e,r+(u<<1))<<1);if(1==s)for(u=0;u<l;u++)o.push(i.readUint(e,r+(u<<2)));return o},t.maxp={},t.maxp.parse=function(e,r,n){var a=t._bin,i={},o=a.readUint(e,r);return r+=4,i.numGlyphs=a.readUshort(e,r),r+=2,65536==o&&(i.maxPoints=a.readUshort(e,r),r+=2,i.maxContours=a.readUshort(e,r),r+=2,i.maxCompositePoints=a.readUshort(e,r),r+=2,i.maxCompositeContours=a.readUshort(e,r),r+=2,i.maxZones=a.readUshort(e,r),r+=2,i.maxTwilightPoints=a.readUshort(e,r),r+=2,i.maxStorage=a.readUshort(e,r),r+=2,i.maxFunctionDefs=a.readUshort(e,r),r+=2,i.maxInstructionDefs=a.readUshort(e,r),r+=2,i.maxStackElements=a.readUshort(e,r),r+=2,i.maxSizeOfInstructions=a.readUshort(e,r),r+=2,i.maxComponentElements=a.readUshort(e,r),r+=2,i.maxComponentDepth=a.readUshort(e,r),r+=2),i},t.name={},t.name.parse=function(e,r,n){var a=t._bin,i={};a.readUshort(e,r),r+=2;var o=a.readUshort(e,r);r+=2,a.readUshort(e,r);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=r+=2,c=0;c<o;c++){var d=a.readUshort(e,r);r+=2;var f=a.readUshort(e,r);r+=2;var h=a.readUshort(e,r);r+=2;var p=a.readUshort(e,r);r+=2;var v=a.readUshort(e,r);r+=2;var m=a.readUshort(e,r);r+=2;var g,y=l[p],b=u+12*o+m;if(0==d)g=a.readUnicode(e,b,v/2);else if(3==d&&0==f)g=a.readUnicode(e,b,v/2);else if(0==f)g=a.readASCII(e,b,v);else if(1==f)g=a.readUnicode(e,b,v/2);else if(3==f)g=a.readUnicode(e,b,v/2);else{if(1!=d)throw"unknown encoding "+f+", platformID: "+d;g=a.readASCII(e,b,v),console.debug("reading unknown MAC encoding "+f+" as ASCII")}var x="p"+d+","+h.toString(16);null==i[x]&&(i[x]={}),i[x][void 0!==y?y:p]=g,i[x]._lang=h}for(var S in i)if(null!=i[S].postScriptName&&1033==i[S]._lang)return i[S];for(var S in i)if(null!=i[S].postScriptName&&0==i[S]._lang)return i[S];for(var S in i)if(null!=i[S].postScriptName&&3084==i[S]._lang)return i[S];for(var S in i)if(null!=i[S].postScriptName)return i[S];for(var S in i){s=S;break}return console.debug("returning name table with languageID "+i[s]._lang),i[s]},t["OS/2"]={},t["OS/2"].parse=function(e,r,n){var a=t._bin.readUshort(e,r);r+=2;var i={};if(0==a)t["OS/2"].version0(e,r,i);else if(1==a)t["OS/2"].version1(e,r,i);else if(2==a||3==a||4==a)t["OS/2"].version2(e,r,i);else{if(5!=a)throw"unknown OS/2 table version: "+a;t["OS/2"].version5(e,r,i)}return i},t["OS/2"].version0=function(e,r,n){var a=t._bin;return n.xAvgCharWidth=a.readShort(e,r),r+=2,n.usWeightClass=a.readUshort(e,r),r+=2,n.usWidthClass=a.readUshort(e,r),r+=2,n.fsType=a.readUshort(e,r),r+=2,n.ySubscriptXSize=a.readShort(e,r),r+=2,n.ySubscriptYSize=a.readShort(e,r),r+=2,n.ySubscriptXOffset=a.readShort(e,r),r+=2,n.ySubscriptYOffset=a.readShort(e,r),r+=2,n.ySuperscriptXSize=a.readShort(e,r),r+=2,n.ySuperscriptYSize=a.readShort(e,r),r+=2,n.ySuperscriptXOffset=a.readShort(e,r),r+=2,n.ySuperscriptYOffset=a.readShort(e,r),r+=2,n.yStrikeoutSize=a.readShort(e,r),r+=2,n.yStrikeoutPosition=a.readShort(e,r),r+=2,n.sFamilyClass=a.readShort(e,r),r+=2,n.panose=a.readBytes(e,r,10),r+=10,n.ulUnicodeRange1=a.readUint(e,r),r+=4,n.ulUnicodeRange2=a.readUint(e,r),r+=4,n.ulUnicodeRange3=a.readUint(e,r),r+=4,n.ulUnicodeRange4=a.readUint(e,r),r+=4,n.achVendID=[a.readInt8(e,r),a.readInt8(e,r+1),a.readInt8(e,r+2),a.readInt8(e,r+3)],r+=4,n.fsSelection=a.readUshort(e,r),r+=2,n.usFirstCharIndex=a.readUshort(e,r),r+=2,n.usLastCharIndex=a.readUshort(e,r),r+=2,n.sTypoAscender=a.readShort(e,r),r+=2,n.sTypoDescender=a.readShort(e,r),r+=2,n.sTypoLineGap=a.readShort(e,r),r+=2,n.usWinAscent=a.readUshort(e,r),r+=2,n.usWinDescent=a.readUshort(e,r),r+=2},t["OS/2"].version1=function(e,r,n){var a=t._bin;return r=t["OS/2"].version0(e,r,n),n.ulCodePageRange1=a.readUint(e,r),r+=4,n.ulCodePageRange2=a.readUint(e,r),r+=4},t["OS/2"].version2=function(e,r,n){var a=t._bin;return r=t["OS/2"].version1(e,r,n),n.sxHeight=a.readShort(e,r),r+=2,n.sCapHeight=a.readShort(e,r),r+=2,n.usDefault=a.readUshort(e,r),r+=2,n.usBreak=a.readUshort(e,r),r+=2,n.usMaxContext=a.readUshort(e,r),r+=2},t["OS/2"].version5=function(e,r,n){var a=t._bin;return r=t["OS/2"].version2(e,r,n),n.usLowerOpticalPointSize=a.readUshort(e,r),r+=2,n.usUpperOpticalPointSize=a.readUshort(e,r),r+=2},t.post={},t.post.parse=function(e,r,n){var a=t._bin,i={};return i.version=a.readFixed(e,r),r+=4,i.italicAngle=a.readFixed(e,r),r+=4,i.underlinePosition=a.readShort(e,r),r+=2,i.underlineThickness=a.readShort(e,r),r+=2,i},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var r=e.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var a=r.tables[n];if(0==a.format)return t>=a.map.length?0:a.map[t];if(4==a.format){for(var i=-1,o=0;o<a.endCount.length;o++)if(t<=a.endCount[o]){i=o;break}return -1==i||a.startCount[i]>t?0:65535&(0!=a.idRangeOffset[i]?a.glyphIdArray[t-a.startCount[i]+(a.idRangeOffset[i]>>1)-(a.idRangeOffset.length-i)]:t+a.idDelta[i])}if(12==a.format){if(t>a.groups[a.groups.length-1][1])return 0;for(o=0;o<a.groups.length;o++){var s=a.groups[o];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+a.format},t.U.glyphToPath=function(e,r){var n={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[r]){var a=e.SVG.entries[r];return null==a?n:("string"==typeof a&&(a=t.SVG.toPath(a),e.SVG.entries[r]=a),a)}if(e.CFF){var i={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},o=e.CFF,s=e.CFF.Private;if(o.ROS){for(var l=0;o.FDSelect[l+2]<=r;)l+=2;s=o.FDArray[o.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[r],i,o,s,n)}else e.glyf&&t.U._drawGlyf(r,e,n);return n},t.U._drawGlyf=function(e,r,n){var a=r.glyf[e];null==a&&(a=r.glyf[e]=t.glyf._parseGlyf(r,e)),null!=a&&(a.noc>-1?t.U._simpleGlyph(a,n):t.U._compoGlyph(a,r,n))},t.U._simpleGlyph=function(e,r){for(var n=0;n<e.noc;n++){for(var a=0==n?0:e.endPts[n-1]+1,i=e.endPts[n],o=a;o<=i;o++){var s=o==a?i:o-1,l=o==i?a:o+1,u=1&e.flags[o],c=1&e.flags[s],d=1&e.flags[l],f=e.xs[o],h=e.ys[o];if(o==a)if(u){if(!c){t.U.P.moveTo(r,f,h);continue}t.U.P.moveTo(r,e.xs[s],e.ys[s])}else c?t.U.P.moveTo(r,e.xs[s],e.ys[s]):t.U.P.moveTo(r,(e.xs[s]+f)/2,(e.ys[s]+h)/2);u?c&&t.U.P.lineTo(r,f,h):d?t.U.P.qcurveTo(r,f,h,e.xs[l],e.ys[l]):t.U.P.qcurveTo(r,f,h,(f+e.xs[l])/2,(h+e.ys[l])/2)}t.U.P.closePath(r)}},t.U._compoGlyph=function(e,r,n){for(var a=0;a<e.parts.length;a++){var i={cmds:[],crds:[]},o=e.parts[a];t.U._drawGlyf(o.glyphIndex,r,i);for(var s=o.m,l=0;l<i.crds.length;l+=2){var u=i.crds[l],c=i.crds[l+1];n.crds.push(u*s.a+c*s.b+s.tx),n.crds.push(u*s.c+c*s.d+s.ty)}for(l=0;l<i.cmds.length;l++)n.cmds.push(i.cmds[l])}},t.U._getGlyphClass=function(e,r){var n=t._lctf.getInterval(r,e);return -1==n?0:r[n+2]},t.U._applySubs=function(e,r,n,a){for(var i=e.length-r-1,o=0;o<n.tabs.length;o++)if(null!=n.tabs[o]){var s,l=n.tabs[o];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[r]))){if(1==n.ltype)e[r],1==l.fmt?e[r]=e[r]+l.delta:e[r]=l.newg[s];else if(4==n.ltype)for(var u=l.vals[s],c=0;c<u.length;c++){var d=u[c],f=d.chain.length;if(!(f>i)){for(var h=!0,p=0,v=0;v<f;v++){for(;-1==e[r+p+(1+v)];)p++;d.chain[v]!=e[r+p+(1+v)]&&(h=!1)}if(h){for(v=0,e[r]=d.nglyph;v<f+p;v++)e[r+v+1]=-1;break}}}else if(5==n.ltype&&2==l.fmt)for(var m=t._lctf.getInterval(l.cDef,e[r]),g=l.cDef[m+2],y=l.scset[g],b=0;b<y.length;b++){var x=y[b],S=x.input;if(!(S.length>i)){for(h=!0,v=0;v<S.length;v++){var w=t._lctf.getInterval(l.cDef,e[r+1+v]);if(-1==m&&l.cDef[w+2]!=S[v]){h=!1;break}}if(h){var M=x.substLookupRecords;for(c=0;c<M.length;c+=2)M[c],M[c+1]}}}else if(6==n.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,r-l.backCvg.length)||!t.U._glsCovered(e,l.inptCvg,r)||!t.U._glsCovered(e,l.ahedCvg,r+l.inptCvg.length))continue;var U=l.lookupRec;for(b=0;b<U.length;b+=2){m=U[b];var _=a[U[b+1]];t.U._applySubs(e,r+m,_,a)}}}}},t.U._glsCovered=function(e,r,n){for(var a=0;a<r.length;a++)if(-1==t._lctf.coverageIndex(r[a],e[n+a]))return!1;return!0},t.U.glyphsToPath=function(e,r,n){for(var a={cmds:[],crds:[]},i=0,o=0;o<r.length;o++){var s=r[o];if(-1!=s){for(var l=o<r.length-1&&-1!=r[o+1]?r[o+1]:0,u=t.U.glyphToPath(e,s),c=0;c<u.crds.length;c+=2)a.crds.push(u.crds[c]+i),a.crds.push(u.crds[c+1]);for(n&&a.cmds.push(n),c=0;c<u.cmds.length;c++)a.cmds.push(u.cmds[c]);n&&a.cmds.push("X"),i+=e.hmtx.aWidth[s],o<r.length-1&&(i+=t.U.getPairAdjustment(e,s,l))}}return a},t.U.P={},t.U.P.moveTo=function(e,t,r){e.cmds.push("M"),e.crds.push(t,r)},t.U.P.lineTo=function(e,t,r){e.cmds.push("L"),e.crds.push(t,r)},t.U.P.curveTo=function(e,t,r,n,a,i,o){e.cmds.push("C"),e.crds.push(t,r,n,a,i,o)},t.U.P.qcurveTo=function(e,t,r,n,a){e.cmds.push("Q"),e.crds.push(t,r,n,a)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,r,n,a,i){for(var o=r.stack,s=r.nStems,l=r.haveWidth,u=r.width,c=r.open,d=0,f=r.x,h=r.y,p=0,v=0,m=0,g=0,y=0,b=0,x=0,S=0,w=0,M=0,U={val:0,size:0};d<e.length;){t.CFF.getCharString(e,d,U);var _=U.val;if(d+=U.size,"o1"==_||"o18"==_)o.length%2==0||l||(u=o.shift()+a.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o3"==_||"o23"==_)o.length%2==0||l||(u=o.shift()+a.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o4"==_)o.length>1&&!l&&(u=o.shift()+a.nominalWidthX,l=!0),c&&t.U.P.closePath(i),h+=o.pop(),t.U.P.moveTo(i,f,h),c=!0;else if("o5"==_)for(;o.length>0;)f+=o.shift(),h+=o.shift(),t.U.P.lineTo(i,f,h);else if("o6"==_||"o7"==_)for(var k=o.length,T="o6"==_,C=0;C<k;C++){var E=o.shift();T?f+=E:h+=E,T=!T,t.U.P.lineTo(i,f,h)}else if("o8"==_||"o24"==_){k=o.length;for(var A=0;A+6<=k;)p=f+o.shift(),v=h+o.shift(),m=p+o.shift(),g=v+o.shift(),f=m+o.shift(),h=g+o.shift(),t.U.P.curveTo(i,p,v,m,g,f,h),A+=6;"o24"==_&&(f+=o.shift(),h+=o.shift(),t.U.P.lineTo(i,f,h))}else{if("o11"==_)break;if("o1234"==_||"o1235"==_||"o1236"==_||"o1237"==_)"o1234"==_&&(v=h,m=(p=f+o.shift())+o.shift(),M=g=v+o.shift(),b=g,S=h,f=(x=(y=(w=m+o.shift())+o.shift())+o.shift())+o.shift(),t.U.P.curveTo(i,p,v,m,g,w,M),t.U.P.curveTo(i,y,b,x,S,f,h)),"o1235"==_&&(p=f+o.shift(),v=h+o.shift(),m=p+o.shift(),g=v+o.shift(),w=m+o.shift(),M=g+o.shift(),y=w+o.shift(),b=M+o.shift(),x=y+o.shift(),S=b+o.shift(),f=x+o.shift(),h=S+o.shift(),o.shift(),t.U.P.curveTo(i,p,v,m,g,w,M),t.U.P.curveTo(i,y,b,x,S,f,h)),"o1236"==_&&(p=f+o.shift(),v=h+o.shift(),m=p+o.shift(),M=g=v+o.shift(),b=g,x=(y=(w=m+o.shift())+o.shift())+o.shift(),S=b+o.shift(),f=x+o.shift(),t.U.P.curveTo(i,p,v,m,g,w,M),t.U.P.curveTo(i,y,b,x,S,f,h)),"o1237"==_&&(p=f+o.shift(),v=h+o.shift(),m=p+o.shift(),g=v+o.shift(),w=m+o.shift(),M=g+o.shift(),y=w+o.shift(),b=M+o.shift(),Math.abs((x=y+o.shift())-f)>Math.abs((S=b+o.shift())-h)?f=x+o.shift():h=S+o.shift(),t.U.P.curveTo(i,p,v,m,g,w,M),t.U.P.curveTo(i,y,b,x,S,f,h));else if("o14"==_){if(o.length>0&&!l&&(u=o.shift()+n.nominalWidthX,l=!0),4==o.length){var F=o.shift(),P=o.shift(),D=o.shift(),O=o.shift(),j=t.CFF.glyphBySE(n,D),R=t.CFF.glyphBySE(n,O);t.U._drawCFF(n.CharStrings[j],r,n,a,i),r.x=F,r.y=P,t.U._drawCFF(n.CharStrings[R],r,n,a,i)}c&&(t.U.P.closePath(i),c=!1)}else if("o19"==_||"o20"==_)o.length%2==0||l||(u=o.shift()+a.nominalWidthX),s+=o.length>>1,o.length=0,l=!0,d+=s+7>>3;else if("o21"==_)o.length>2&&!l&&(u=o.shift()+a.nominalWidthX,l=!0),h+=o.pop(),f+=o.pop(),c&&t.U.P.closePath(i),t.U.P.moveTo(i,f,h),c=!0;else if("o22"==_)o.length>1&&!l&&(u=o.shift()+a.nominalWidthX,l=!0),f+=o.pop(),c&&t.U.P.closePath(i),t.U.P.moveTo(i,f,h),c=!0;else if("o25"==_){for(;o.length>6;)f+=o.shift(),h+=o.shift(),t.U.P.lineTo(i,f,h);p=f+o.shift(),v=h+o.shift(),m=p+o.shift(),g=v+o.shift(),f=m+o.shift(),h=g+o.shift(),t.U.P.curveTo(i,p,v,m,g,f,h)}else if("o26"==_)for(o.length%2&&(f+=o.shift());o.length>0;)p=f,v=h+o.shift(),f=m=p+o.shift(),h=(g=v+o.shift())+o.shift(),t.U.P.curveTo(i,p,v,m,g,f,h);else if("o27"==_)for(o.length%2&&(h+=o.shift());o.length>0;)v=h,m=(p=f+o.shift())+o.shift(),g=v+o.shift(),f=m+o.shift(),h=g,t.U.P.curveTo(i,p,v,m,g,f,h);else if("o10"==_||"o29"==_){var I="o10"==_?a:n;if(0==o.length)console.debug("error: empty stack");else{var L=o.pop(),z=I.Subrs[L+I.Bias];r.x=f,r.y=h,r.nStems=s,r.haveWidth=l,r.width=u,r.open=c,t.U._drawCFF(z,r,n,a,i),f=r.x,h=r.y,s=r.nStems,l=r.haveWidth,u=r.width,c=r.open}}else if("o30"==_||"o31"==_){var N=o.length,B=(A=0,"o31"==_);for(A+=N-(k=-3&N);A<k;)B?(v=h,m=(p=f+o.shift())+o.shift(),h=(g=v+o.shift())+o.shift(),k-A==5?(f=m+o.shift(),A++):f=m,B=!1):(p=f,v=h+o.shift(),m=p+o.shift(),g=v+o.shift(),f=m+o.shift(),k-A==5?(h=g+o.shift(),A++):h=g,B=!0),t.U.P.curveTo(i,p,v,m,g,f,h),A+=4}else{if("o"==(_+"").charAt(0))throw console.debug("Unknown operation: "+_,e),_;o.push(_)}}}r.x=f,r.y=h,r.nStems=s,r.haveWidth=l,r.width=u,r.open=c},e.Typr=r=t,e.default={Typr:r},Object.defineProperty(e,"__esModule",{value:!0}),e).Typr},function(){return function(e){var t=Uint8Array,r=Uint16Array,n=Uint32Array,a=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var a=new r(31),i=0;i<31;++i)a[i]=t+=1<<e[i-1];var o=new n(a[30]);for(i=1;i<30;++i)for(var s=a[i];s<a[i+1];++s)o[s]=s-a[i]<<5|i;return[a,o]},l=s(a,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var d=s(i,0)[0],f=new r(32768),h=0;h<32768;++h){var p=(43690&h)>>>1|(21845&h)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,f[h]=((65280&p)>>>8|(255&p)<<8)>>>1}var v=function(e,t,n){for(var a=e.length,i=0,o=new r(t);i<a;++i)++o[e[i]-1];var s,l=new r(t);for(i=0;i<t;++i)l[i]=l[i-1]+o[i-1]<<1;if(n){s=new r(1<<t);var u=15-t;for(i=0;i<a;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],h=l[e[i]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)s[f[h]>>>u]=c}else for(s=new r(a),i=0;i<a;++i)e[i]&&(s[i]=f[l[e[i]-1]++]>>>15-e[i]);return s},m=new t(288);for(h=0;h<144;++h)m[h]=8;for(h=144;h<256;++h)m[h]=9;for(h=256;h<280;++h)m[h]=7;for(h=280;h<288;++h)m[h]=8;var g=new t(32);for(h=0;h<32;++h)g[h]=5;var y=v(m,9,1),b=v(g,5,1),x=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},S=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},w=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],U=function(e,t,r){var n=Error(t||M[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,U),!r)throw n;return n},_=function(e,s,l){var c,f,h,p,m=e.length;if(!m||l&&!l.l&&m<5)return s||new t(0);var g=!s||l,M=!l||l.i;l||(l={}),s||(s=new t(3*m));var _,k=function(e){var r=s.length;if(e>r){var n=new t(Math.max(2*r,e));n.set(s),s=n}},T=l.f||0,C=l.p||0,E=l.b||0,A=l.l,F=l.d,P=l.m,D=l.n,O=8*m;do{if(!A){l.f=T=S(e,C,1);var j=S(e,C+1,3);if(C+=3,!j){var R=e[(X=((_=C)/8|0)+(7&_&&1)+4)-4]|e[X-3]<<8,I=X+R;if(I>m){M&&U(0);break}g&&k(E+R),s.set(e.subarray(X,I),E),l.b=E+=R,l.p=C=8*I;continue}if(1==j)A=y,F=b,P=9,D=5;else if(2==j){var L=S(e,C,31)+257,z=S(e,C+10,15)+4,N=L+S(e,C+5,31)+1;C+=14;for(var B=new t(N),G=new t(19),V=0;V<z;++V)G[o[V]]=S(e,C+3*V,7);C+=3*z;var W=x(G),q=(1<<W)-1,H=v(G,W,1);for(V=0;V<N;){var X,Y=H[S(e,C,q)];if(C+=15&Y,(X=Y>>>4)<16)B[V++]=X;else{var $=0,K=0;for(16==X?(K=3+S(e,C,3),C+=2,$=B[V-1]):17==X?(K=3+S(e,C,7),C+=3):18==X&&(K=11+S(e,C,127),C+=7);K--;)B[V++]=$}}var Z=B.subarray(0,L),Q=B.subarray(L);P=x(Z),D=x(Q),A=v(Z,P,1),F=v(Q,D,1)}else U(1);if(C>O){M&&U(0);break}}g&&k(E+131072);for(var J=(1<<P)-1,ee=(1<<D)-1,et=C;;et=C){var er=($=A[w(e,C)&J])>>>4;if((C+=15&$)>O){M&&U(0);break}if($||U(2),er<256)s[E++]=er;else{if(256==er){et=C,A=null;break}var en=er-254;if(er>264){var ea=a[V=er-257];en=S(e,C,(1<<ea)-1)+u[V],C+=ea}var ei=F[w(e,C)&ee],eo=ei>>>4;if(ei||U(3),C+=15&ei,Q=d[eo],eo>3&&(ea=i[eo],Q+=w(e,C)&(1<<ea)-1,C+=ea),C>O){M&&U(0);break}g&&k(E+131072);for(var es=E+en;E<es;E+=4)s[E]=s[E-Q],s[E+1]=s[E+1-Q],s[E+2]=s[E+2-Q],s[E+3]=s[E+3-Q];E=es}}l.l=A,l.p=et,l.b=E,A&&(T=1,l.m=P,l.d=F,l.n=D)}while(!T)return E==s.length?s:(c=s,(f=0)<0&&(f=0),(null==(h=E)||h>c.length)&&(h=c.length),(p=new(c instanceof r?r:c instanceof n?n:t)(h-f)).set(c.subarray(f,h)),p)},k=new t(0),T="undefined"!=typeof TextDecoder&&new TextDecoder;try{T.decode(k,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),r=0;function n(){var e=t.getUint16(r);return r+=2,e}function a(){var e=t.getUint32(r);return r+=4,e}function i(e){g.setUint16(y,e),y+=2}function o(e){g.setUint32(y,e),y+=4}for(var s={signature:a(),flavor:a(),length:a(),numTables:n(),reserved:n(),totalSfntSize:a(),majorVersion:n(),minorVersion:n(),metaOffset:a(),metaLength:a(),metaOrigLength:a(),privOffset:a(),privLength:a()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var u=16*Math.pow(2,l),c=16*s.numTables-u,d=12,f=[],h=0;h<s.numTables;h++)f.push({tag:a(),offset:a(),compLength:a(),origLength:a(),origChecksum:a()}),d+=16;var p,v=new Uint8Array(12+16*f.length+f.reduce(function(e,t){return e+t.origLength+4},0)),m=v.buffer,g=new DataView(m),y=0;return o(s.flavor),i(s.numTables),i(u),i(l),i(c),f.forEach(function(e){o(e.tag),o(e.origChecksum),o(d),o(e.origLength),e.outOffset=d,(d+=e.origLength)%4!=0&&(d+=4-d%4)}),f.forEach(function(t){var r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var n=new Uint8Array(t.origLength);_(new Uint8Array(r,2),n)}else n=new Uint8Array(r);v.set(n,t.outOffset);var a=0;(d=t.outOffset+t.origLength)%4!=0&&(a=4-d%4),v.set(new Uint8Array(a).buffer,t.outOffset+t.origLength),p=d+a}),m.slice(0,p)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){let r,n={M:2,L:2,Q:4,C:6,Z:0},a={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=[null,"isol","init","fina","medi"];function o(t,r){let n=t.GDEF&&t.GDEF.glyphClassDef;return n?e.U._getGlyphClass(r,n):0}function s(...e){for(let t=0;t<e.length;t++)if("number"==typeof e[t])return e[t]}return function(l){var u;let c,d,f,h,p,v,m=new Uint8Array(l,0,4),g=e._bin.readASCII(m,0,4);if("wOFF"===g)l=t(l);else if("wOF2"===g)throw Error("woff2 fonts not supported");return u=e.parse(l)[0],c=Object.create(null),d=u["OS/2"],f=u.hhea,h=u.head.unitsPerEm,p=s(d&&d.sTypoAscender,f&&f.ascender,h),v={unitsPerEm:h,ascender:p,descender:s(d&&d.sTypoDescender,f&&f.descender,0),capHeight:s(d&&d.sCapHeight,p),xHeight:s(d&&d.sxHeight,p),lineGap:s(d&&d.sTypoLineGap,f&&f.lineGap),supportsCodePoint:t=>e.U.codeToGlyph(u,t)>0,forEachGlyph(t,s,l,d){let f=0,h=1/v.unitsPerEm*s,p=function(t,n){let o=[];for(let r=0;r<n.length;r++){let a=n.codePointAt(r);a>65535&&r++,o.push(e.U.codeToGlyph(t,a))}let s=t.GSUB;if(s){let t,{lookupList:l,featureList:u}=s,c=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,d=[];u.forEach(s=>{if(c.test(s.tag))for(let u=0;u<s.tab.length;u++){if(d[s.tab[u]])continue;d[s.tab[u]]=!0;let c=l[s.tab[u]],f=/^(isol|init|fina|medi)$/.test(s.tag);f&&!t&&(t=function(e){let t=new Uint8Array(e.length),n=32,i=1,o=-1;for(let s=0;s<e.length;s++){let l=e.codePointAt(s),u=0|function(e){if(!r){let e={R:2,L:1,D:4,C:16,U:32,T:8};for(let t in r=new Map,a){let n=0;a[t].split(",").forEach(a=>{let[i,o]=a.split("+");i=parseInt(i,36),o=o?parseInt(o,36):0,r.set(n+=i,e[t]);for(let a=o;a--;)r.set(++n,e[t])})}}return r.get(e)||32}(l),c=1;!(8&u)&&(21&n?22&u?(c=3,(1===i||3===i)&&t[o]++):33&u&&(2===i||4===i)&&t[o]--:34&n&&(2===i||4===i)&&t[o]--,i=t[s]=c,n=u,o=s,l>65535&&s++)}return t}(n));for(let r=0;r<o.length;r++)t&&f&&i[t[r]]!==s.tag||e.U._applySubs(o,r,c,l)}})}return o}(u,t),m=0,g=function(t,r){let n=new Int16Array(3*r.length),a=0;for(;a<r.length;a++){let u=r[a];if(-1===u)continue;n[3*a+2]=t.hmtx.aWidth[u];let c=t.GPOS;if(c){let d=c.lookupList;for(let c=0;c<d.length;c++){let f=d[c];for(let c=0;c<f.tabs.length;c++){let d=f.tabs[c];if(1===f.ltype){if(-1!==e._lctf.coverageIndex(d.coverage,u)&&d.pos){l(d.pos,a);break}}else if(2===f.ltype){let t=null,n=i();if(-1!==n){let i=e._lctf.coverageIndex(d.coverage,r[n]);if(-1!==i){if(1===d.fmt){let e=d.pairsets[i];for(let r=0;r<e.length;r++)e[r].gid2===u&&(t=e[r])}else if(2===d.fmt){let a=e.U._getGlyphClass(r[n],d.classDef1),i=e.U._getGlyphClass(u,d.classDef2);t=d.matrix[a][i]}if(t){t.val1&&l(t.val1,n),t.val2&&l(t.val2,a);break}}}}else if(4===f.ltype){let t=e._lctf.coverageIndex(d.markCoverage,u);if(-1!==t){let o=i(s),l=-1===o?-1:e._lctf.coverageIndex(d.baseCoverage,r[o]);if(-1!==l){let e=d.markArray[t],r=d.baseArray[l][e.markClass];n[3*a]=r.x-e.x+n[3*o]-n[3*o+2],n[3*a+1]=r.y-e.y+n[3*o+1];break}}}else if(6===f.ltype){let s=e._lctf.coverageIndex(d.mark1Coverage,u);if(-1!==s){let l=i();if(-1!==l){let i=r[l];if(3===o(t,i)){let t=e._lctf.coverageIndex(d.mark2Coverage,i);if(-1!==t){let e=d.mark1Array[s],r=d.mark2Array[t][e.markClass];n[3*a]=r.x-e.x+n[3*l]-n[3*l+2],n[3*a+1]=r.y-e.y+n[3*l+1];break}}}}}}}}else if(t.kern&&!t.cff){let e=i();if(-1!==e){let a=t.kern.glyph1.indexOf(r[e]);if(-1!==a){let r=t.kern.rval[a].glyph2.indexOf(u);-1!==r&&(n[3*e+2]+=t.kern.rval[a].vals[r])}}}}return n;function i(e){for(let t=a-1;t>=0;t--)if(-1!==r[t]&&(!e||e(r[t])))return t;return -1}function s(e){return 1===o(t,e)}function l(e,t){for(let r=0;r<3;r++)n[3*t+r]+=e[r]||0}}(u,p);return p.forEach((r,a)=>{if(-1!==r){let t=c[r];if(!t){let a,i,o,s,{cmds:l,crds:d}=e.U.glyphToPath(u,r),f="",h=0;for(let e=0,t=l.length;e<t;e++){let t=n[l[e]];f+=l[e];for(let e=1;e<=t;e++)f+=(e>1?",":"")+d[h++]}if(d.length){a=i=1/0,o=s=-1/0;for(let e=0,t=d.length;e<t;e+=2){let t=d[e],r=d[e+1];t<a&&(a=t),r<i&&(i=r),t>o&&(o=t),r>s&&(s=r)}}else a=o=i=s=0;t=c[r]={index:r,advanceWidth:u.hmtx.aWidth[r],xMin:a,yMin:i,xMax:o,yMax:s,path:f}}d.call(null,t,f+g[3*a]*h,g[3*a+1]*h,m),f+=g[3*a+2]*h,l&&(f+=l*s)}m+=t.codePointAt(m)>65535?2:1}),f}}}}],init:(e,t,r)=>r(e(),t())}),ex=X({name:"FontResolver",dependencies:[function(e,t){let r=Object.create(null),n=Object.create(null);function a(t,a){let i=r[t];if(i)a(i);else if(n[t])n[t].push(a);else{n[t]=[a];let i=e=>{console.error(`Failure loading font ${t}`,e)};try{let a=new XMLHttpRequest;a.open("get",t,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status>=400)i(Error(a.statusText));else if(a.status>0)try{var o;let i=e(a.response);i.src=t,(o=i).src=t,r[t]=o,n[t].forEach(e=>e(o)),delete n[t]}catch(e){i(e)}},a.onerror=i,a.send()}catch(e){i(e)}}}return function(e,n,{lang:i,fonts:o=[],style:s="normal",weight:l="normal",unicodeFontsURL:u}={}){let c=new Uint8Array(e.length),d=[];e.length||v();let f=new Map,h=[];if("italic"!==s&&(s="normal"),"number"!=typeof l&&(l="bold"===l?700:400),o&&!Array.isArray(o)&&(o=[o]),(o=o.slice().filter(e=>!e.lang||e.lang.test(i)).reverse()).length){let t=0;!function n(i=0){for(let s=i,l=e.length;s<l;s++){let i=e.codePointAt(s);if(1===t&&d[c[s-1]].supportsCodePoint(i)||s>0&&/\s/.test(e[s]))c[s]=c[s-1],2===t&&(h[h.length-1][1]=s);else for(let e=c[s],l=o.length;e<=l;e++)if(e===l)(2===t?h[h.length-1]:h[h.length]=[s,s])[1]=s,t=2;else{c[s]=e;let{src:l,unicodeRange:u}=o[e];if(!u||function(e,t){for(let r=0;r<t.length;r++){let[n,a=n]=t[r];if(n<=e&&e<=a)return!0}return!1}(i,u)){let e=r[l];if(!e)return void a(l,()=>{n(s)});if(e.supportsCodePoint(i)){let r=f.get(e);"number"!=typeof r&&(r=d.length,d.push(e),f.set(e,r)),c[s]=r,t=1;break}}}i>65535&&s+1<l&&(c[s+1]=c[s],s++,2===t&&(h[h.length-1][1]=s))}p()}()}else h.push([0,e.length-1]),p();function p(){if(h.length){let r=h.map(t=>e.substring(t[0],t[1]+1)).join("\n");t.getFontsForString(r,{lang:i||void 0,style:s,weight:l,dataUrl:u}).then(({fontUrls:e,chars:t})=>{let r=d.length,n=0;h.forEach(e=>{for(let a=0,i=e[1]-e[0];a<=i;a++)c[e[0]+a]=t[n++]+r;n++});let i=0;e.forEach((t,n)=>{a(t,t=>{d[n+r]=t,++i===e.length&&v()})})})}else v()}function v(){n({chars:c,fonts:d})}}},eb,function(){return function(e){var t=function(){this.buckets=new Map};t.prototype.add=function(e){var t=e>>5;this.buckets.set(t,(this.buckets.get(t)||0)|1<<(31&e))},t.prototype.has=function(e){var t=this.buckets.get(e>>5);return void 0!==t&&0!=(t&1<<(31&e))},t.prototype.serialize=function(){var e=[];return this.buckets.forEach(function(t,r){e.push((+r).toString(36)+":"+t.toString(36))}),e.join(",")},t.prototype.deserialize=function(e){var t=this;this.buckets.clear(),e.split(",").forEach(function(e){var r=e.split(":");t.buckets.set(parseInt(r[0],36),parseInt(r[1],36))})};function r(e,t){var r=255&e,n=t.codePointAt(r/6|0);return 0!=((n=(n||48)-48)&1<<r%6)}function n(e,t){var r=function(e,r){for(var n=e;n<=r;n++)t(n)};e.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(e){return e.split("-").map(function(e){return parseInt(e.trim(),16)})}).forEach(function(e){var t=e[0],n=e[1];void 0===n&&(n=t),r(t,n)})}var a,i={},o={},s=new WeakMap,l="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data",u=new Map;function c(e,t,r){return e[t]?t:e[r]?r:function(e){for(var t in e)return t}(e)}return e.CodePointSet=t,e.clearCache=function(){i={},o={}},e.getFontsForString=function(e,d){void 0===d&&(d={});var f=d.lang;void 0===f&&(f=/\p{Script=Hangul}/u.test(e)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(e)?"ja":"en");var h=d.category;void 0===h&&(h="sans-serif");var p=d.style;void 0===p&&(p="normal");var v=d.weight;void 0===v&&(v=400);var m=(d.dataUrl||l).replace(/\/$/g,""),g=new Map,y=new Uint8Array(e.length),b={},x={},S=Array(e.length),w=new Map,M=!1;function U(e){var t=u.get(e);return t||(t=fetch(m+"/"+e).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json().then(function(e){if(!Array.isArray(e)||1!==e[0])throw Error("Incorrect schema version; need 1, got "+e[0]);return e[1]})}).catch(function(t){if(m!==l)return M||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+m+'", trying default CDN. '+t.message),M=!0),m=l,u.delete(e),U(e);throw t}),u.set(e,t)),t}for(var _=0;_<e.length;_++)!function(t){var r=e.codePointAt(t),n=function(e){var t=(-256&e).toString(16),r=((-256&e)+256-1).toString(16);return"codepoint-index/plane"+(e>>16)+"/"+t+"-"+r+".json"}(r);S[t]=n,i[n]||w.has(n)||w.set(n,U(n).then(function(e){i[n]=e})),r>65535&&(_=++t)}(_);return Promise.all(w.values()).then(function(){w.clear();for(var t=0;t<e.length;t++)!function(n){var a=e.codePointAt(n),s=null,l=i[S[n]],u=void 0;for(var c in l){var d=x[c];if(void 0===d&&(d=x[c]=new RegExp(c).test(f||"en")),d){for(var h in u=c,l[c])if(r(a,l[c][h])){s=h;break}break}}if(!s){e:for(var p in l)if(p!==u){for(var v in l[p])if(r(a,l[p][v])){s=v;break e}}}s||(console.debug("No font coverage for U+"+a.toString(16)),s="latin"),S[n]=s,o[s]||w.has(s)||w.set(s,U("font-meta/"+s+".json").then(function(e){o[s]=e})),a>65535&&(t=++n)}(t);return Promise.all(w.values())}).then(function(){for(var r,i=null,l=0;l<e.length;l++){var u=e.codePointAt(l);if(i&&(a||(a=new Set,n("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(e){a.add(e)})),a.has(u)||(function(e){var r=s.get(e);return r||(r=new t,n(e.ranges,function(e){return r.add(e)}),s.set(e,r)),r})(i).has(u)))y[l]=y[l-1];else{var d=b[(i=o[S[l]]).id];if(!d){var f=i.typeforms,x=c(f,h,"sans-serif"),w=c(f[x],p,"normal"),M=function(e,t){var r=t;if(!e.includes(r)){r=1/0;for(var n=0;n<e.length;n++)Math.abs(e[n]-t)<Math.abs(r-t)&&(r=e[n])}return r}(null==(r=f[x])?void 0:r[w],v);d=b[i.id]=m+"/font-files/"+i.id+"/"+x+"."+w+"."+M+".woff"}var U=g.get(d);null==U&&(U=g.size,g.set(d,U)),y[l]=U}u>65535&&(y[++l]=y[l-1])}return{fontUrls:Array.from(g.keys()),chars:y}})},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}],init:(e,t,r)=>e(t,r())}),eS=()=>(self.performance||Date).now(),ew=K(),eM=[],eU=0;function e_(){let e=eS();for(;eM.length&&eS()-e<5;)eM.shift()();eU=eM.length?setTimeout(e_,0):0}let ek={},eT=0;function eC(e,t,r,n,a,i,o,s,l,u){let c="TroikaTextSDFGenerator_JS_"+eT++%4,d=ek[c];return d||(d=ek[c]={workerModule:X({name:c,workerId:c,dependencies:[K,eS],init(e,t){let r=e().javascript.generate;return function(...e){let n=t();return{textureData:r(...e),timing:t()-n}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(e,t,r,n,a,i).then(({textureData:r,timing:n})=>{let a=eS(),i=new Uint8Array(4*r.length);for(let e=0;e<r.length;e++)i[4*e+u]=r[e];return ew.webglUtils.renderImageData(o,i,s,l,e,t,1<<3-u),n+=eS()-a,0==--d.requests&&(d.idleTimer=setTimeout(()=>{q[c]&&q[c].forEach(function(e){e()}),W[c]&&(W[c].terminate(),delete W[c])},2e3)),{timing:n}})}let eE=ew.webglUtils.resizeWebGLCanvasWithoutClearing,eA={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},eF=new L.Color;function eP(){return(self.performance||Date).now()}let eD=Object.create(null);function eO(e,t){e=function(e,t){for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}({},e);let r=eP(),{defaultFontURL:n}=eA,a=[];if(n&&a.push({label:"default",src:eR(n)}),e.font&&a.push({label:"user",src:eR(e.font)}),e.font=a,e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||eA.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||eA.unicodeFontsURL,null!=e.colorRanges){let t={};for(let r in e.colorRanges)if(e.colorRanges.hasOwnProperty(r)){let n=e.colorRanges[r];"number"!=typeof n&&(n=eF.set(n).getHex()),t[r]=n}e.colorRanges=t}Object.freeze(e);let{textureWidth:i,sdfExponent:o}=eA,{sdfGlyphSize:s}=e,l=i/s*4,u=eD[s];if(!u){var c;let e,t=document.createElement("canvas");t.width=i,t.height=256*s/l,(u=eD[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:t,sdfTexture:new L.Texture(t,void 0,void 0,void 0,L.LinearFilter,L.LinearFilter),contextLost:!1,glyphsByFont:new Map}).sdfTexture.generateMipmaps=!1,(e=(c=u).sdfCanvas).addEventListener("webglcontextlost",e=>{console.log("Context Lost",e),e.preventDefault(),c.contextLost=!0}),e.addEventListener("webglcontextrestored",e=>{console.log("Context Restored",e),c.contextLost=!1;let t=[];c.glyphsByFont.forEach(e=>{e.forEach(e=>{t.push(ej(e,c,!0))})}),Promise.all(t).then(()=>{eI(c),c.sdfTexture.needsUpdate=!0})})}let{sdfTexture:d,sdfCanvas:f}=u;(eA.useWorker?ez:eN)(e).then(n=>{let{glyphIds:a,glyphFontIndices:c,fontData:h,glyphPositions:p,fontSize:v,timings:m}=n,g=[],y=new Float32Array(4*a.length),b=0,x=0,S=eP(),w=h.map(e=>{let t=u.glyphsByFont.get(e.src);return t||u.glyphsByFont.set(e.src,t=new Map),t});a.forEach((e,t)=>{let r=c[t],{src:i,unitsPerEm:o}=h[r],l=w[r].get(e);if(!l){let{path:t,pathBounds:a}=n.glyphData[i][e],o=Math.max(a[2]-a[0],a[3]-a[1])/s*(eA.sdfMargin*s+.5),c=u.glyphCount++,d=[a[0]-o,a[1]-o,a[2]+o,a[3]+o];w[r].set(e,l={path:t,atlasIndex:c,sdfViewBox:d}),g.push(l)}let{sdfViewBox:d}=l,f=p[x++],m=p[x++],S=v/o;y[b++]=f+d[0]*S,y[b++]=m+d[1]*S,y[b++]=f+d[2]*S,y[b++]=m+d[3]*S,a[t]=l.atlasIndex}),m.quads=(m.quads||0)+(eP()-S);let M=eP();m.sdf={};let U=f.height,_=Math.pow(2,Math.ceil(Math.log2(Math.ceil(u.glyphCount/l)*s)));_>U&&(console.info(`Increasing SDF texture size ${U}->${_}`),eE(f,i,_),d.dispose()),Promise.all(g.map(t=>ej(t,u,e.gpuAccelerateSDF).then(({timing:e})=>{m.sdf[t.atlasIndex]=e}))).then(()=>{g.length&&!u.contextLost&&(eI(u),d.needsUpdate=!0),m.sdfTotal=eP()-M,m.total=eP()-r,t(Object.freeze({parameters:e,sdfTexture:d,sdfGlyphSize:s,sdfExponent:o,glyphBounds:y,glyphAtlasIndices:a,glyphColors:n.glyphColors,caretPositions:n.caretPositions,chunkedBounds:n.chunkedBounds,ascender:n.ascender,descender:n.descender,lineHeight:n.lineHeight,capHeight:n.capHeight,xHeight:n.xHeight,topBaseline:n.topBaseline,blockBounds:n.blockBounds,visibleBounds:n.visibleBounds,timings:n.timings}))})}),Promise.resolve().then(()=>{!u.contextLost&&(f._warm||(ew.webgl.isSupported(f),f._warm=!0))})}function ej({path:e,atlasIndex:r,sdfViewBox:n},{sdfGlyphSize:a,sdfCanvas:i,contextLost:o},s){if(o)return Promise.resolve({timing:-1});let{textureWidth:l,sdfExponent:u}=eA,c=Math.max(n[2]-n[0],n[3]-n[1]),d=Math.floor(r/4),f=d%(l/a)*a,h=Math.floor(d/(l/a))*a;return function(e,r,n,a,i,o,s,l,u,c,d=!0){return d?((...e)=>new Promise((t,r)=>{eM.push(()=>{let n=eS();try{ew.webgl.generateIntoCanvas(...e),t({timing:eS()-n})}catch(e){r(e)}}),eU||(eU=setTimeout(e_,0))}))(e,r,n,a,i,o,s,l,u,c).then(null,d=>(t||(console.warn("WebGL SDF generation failed, falling back to JS",d),t=!0),eC(e,r,n,a,i,o,s,l,u,c))):eC(e,r,n,a,i,o,s,l,u,c)}(a,a,e,n,c,u,i,f,h,r%4,s)}function eR(e){return r||(r="undefined"==typeof document?{}:document.createElement("a")),r.href=e,r.href}function eI(e){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");let{sdfCanvas:t,sdfTexture:r}=e,{width:n,height:a}=t,i=e.sdfCanvas.getContext("webgl"),o=r.image.data;o&&o.length===n*a*4||(o=new Uint8Array(n*a*4),r.image={width:n,height:a,data:o},r.flipY=!1,r.isDataTexture=!0),i.readPixels(0,0,n,a,i.RGBA,i.UNSIGNED_BYTE,o)}}let eL=X({name:"Typesetter",dependencies:[function(e,t){let r=1/0,n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a=`[^\\S\\u00A0]`,i=RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:o="",font:d,lang:f,sdfGlyphSize:h=64,fontSize:p=400,fontWeight:v=1,fontStyle:m="normal",letterSpacing:g=0,lineHeight:y="normal",maxWidth:b=r,direction:x,textAlign:S="left",textIndent:w=0,whiteSpace:M="normal",overflowWrap:U="normal",anchorX:_=0,anchorY:k=0,metricsOnly:T=!1,unicodeFontsURL:C,preResolvedFonts:E=null,includeCaretPositions:A=!1,chunkedBoundsSize:F=8192,colorRanges:P=null},D){let O=u(),j={fontLoad:0,typesetting:0};o.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),o=o.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),p*=1,g*=1,b*=1,y=y||"normal",w*=1,function({text:t,lang:r,fonts:n,style:a,weight:i,preResolvedFonts:o,unicodeFontsURL:s},l){let u=({chars:e,fonts:t})=>{let r,n,a=[];for(let i=0;i<e.length;i++)e[i]!==n?(n=e[i],a.push(r={start:i,end:i,fontObj:t[e[i]]})):r.end=i;l(a)};o?u(o):e(t,u,{lang:r,fonts:n,style:a,weight:i,unicodeFontsURL:s})}({text:o,lang:f,style:m,weight:v,fonts:"string"==typeof d?[{src:d}]:d,unicodeFontsURL:C,preResolvedFonts:E},e=>{j.fontLoad=u()-O;let d=isFinite(b),f=null,h=null,v=null,m=null,C=null,E=null,R=null,I=null,L=0,z=0,N="nowrap"!==M,B=new Map,G=u(),V=w,W=0,q=new c,H=[q];e.forEach(e=>{let t,r,{fontObj:s}=e,{ascender:l,descender:u,unitsPerEm:f,lineGap:h,capHeight:v,xHeight:m}=s,x=B.get(s);if(!x){let e=p/f,t="normal"===y?(l-u+h)*e:y*p,r=(t-(l-u)*e)/2,n=Math.min(t,(l-u)*e),a=(l+u)/2*e+n/2;x={index:B.size,src:s.src,fontObj:s,fontSizeMult:e,unitsPerEm:f,ascender:l*e,descender:u*e,capHeight:v*e,xHeight:m*e,lineHeight:t,baseline:-r-l*e,caretTop:a,caretBottom:a-n},B.set(s,x)}let{fontSizeMult:S}=x,M=o.slice(e.start,e.end+1);s.forEachGlyph(M,p,g,(s,l,u,f)=>{let h;l+=W,f+=e.start,t=l,r=s;let v=o.charAt(f),m=s.advanceWidth*S,y=q.count;if("isEmpty"in s||(s.isWhitespace=!!v&&new RegExp(a).test(v),s.canBreakAfter=!!v&&i.test(v),s.isEmpty=s.xMin===s.xMax||s.yMin===s.yMax||n.test(v)),!s.isWhitespace&&!s.isEmpty&&z++,N&&d&&!s.isWhitespace&&l+m+V>b&&y){if(q.glyphAt(y-1).glyphObj.canBreakAfter)h=new c,V=-l;else for(let e=y;e--;)if(0===e&&"break-word"===U){h=new c,V=-l;break}else if(q.glyphAt(e).glyphObj.canBreakAfter){let t=(h=q.splitAt(e+1)).glyphAt(0).x;V-=t;for(let e=h.count;e--;)h.glyphAt(e).x-=t;break}h&&(q.isSoftWrapped=!0,q=h,H.push(q),L=b)}let M=q.glyphAt(q.count);M.glyphObj=s,M.x=l+V,M.y=u,M.width=m,M.charIndex=f,M.fontData=x,"\n"===v&&(q=new c,H.push(q),V=-(l+m+g*p)+w)}),W=t+r.advanceWidth*S+g*p});let X=0;H.forEach(e=>{let t=!0;for(let r=e.count;r--;){let n=e.glyphAt(r);t&&!n.glyphObj.isWhitespace&&(e.width=n.x+n.width,e.width>L&&(L=e.width),t=!1);let{lineHeight:a,capHeight:i,xHeight:o,baseline:s}=n.fontData;a>e.lineHeight&&(e.lineHeight=a);let l=s-e.baseline;l<0&&(e.baseline+=l,e.cap+=l,e.ex+=l),e.cap=Math.max(e.cap,e.baseline+i),e.ex=Math.max(e.ex,e.baseline+o)}e.baseline-=X,e.cap-=X,e.ex-=X,X+=e.lineHeight});let Y=0,$=0;if(_&&("number"==typeof _?Y=-_:"string"==typeof _&&(Y=-L*("left"===_?0:"center"===_?.5:"right"===_?1:s(_)))),k&&("number"==typeof k?$=-k:"string"==typeof k&&($="top"===k?0:"top-baseline"===k?-H[0].baseline:"top-cap"===k?-H[0].cap:"top-ex"===k?-H[0].ex:"middle"===k?X/2:"bottom"===k?X:"bottom-baseline"===k?-H[H.length-1].baseline:s(k)*X)),!T){let e,n,a=t.getEmbeddingLevels(o,x);f=new Uint16Array(z),h=new Uint8Array(z),v=new Float32Array(2*z),m={},R=[r,r,-r,-r],I=[],A&&(E=new Float32Array(4*o.length)),P&&(C=new Uint8Array(3*z));let i=0,s=-1,u=-1;if(H.forEach((c,d)=>{let{count:p,width:g}=c;if(p>0){let d,y=0;for(let e=p;e--&&c.glyphAt(e).glyphObj.isWhitespace;)y++;let b=0,x=0;if("center"===S)b=(L-g)/2;else if("right"===S)b=L-g;else if("justify"===S&&c.isSoftWrapped){let e=0;for(let t=p-y;t--;)c.glyphAt(t).glyphObj.isWhitespace&&e++;x=(L-g)/e}if(x||b){let e=0;for(let t=0;t<p;t++){let r=c.glyphAt(t),n=r.glyphObj;r.x+=b+e,0!==x&&n.isWhitespace&&t<p-y&&(e+=x,r.width+=x)}}let w=t.getReorderSegments(o,a,c.glyphAt(0).charIndex,c.glyphAt(c.count-1).charIndex);for(let e=0;e<w.length;e++){let[t,r]=w[e],n=1/0,a=-1/0;for(let e=0;e<p;e++)if(c.glyphAt(e).charIndex>=t){let t=e,i=e;for(;i<p;i++){let e=c.glyphAt(i);if(e.charIndex>r)break;i<p-y&&(n=Math.min(n,e.x),a=Math.max(a,e.x+e.width))}for(let e=t;e<i;e++){let t=c.glyphAt(e);t.x=a-(t.x+t.width-n)}break}}let M=e=>d=e;for(let g=0;g<p;g++){let p=c.glyphAt(g),y=(d=p.glyphObj).index,b=1&a.levels[p.charIndex];if(b){let e=t.getMirroredCharacter(o[p.charIndex]);e&&p.fontData.fontObj.forEachGlyph(e,0,0,M)}if(A){let{charIndex:e,fontData:t}=p,r=p.x+Y,n=p.x+p.width+Y;E[4*e]=b?n:r,E[4*e+1]=b?r:n,E[4*e+2]=c.baseline+t.caretBottom+$,E[4*e+3]=c.baseline+t.caretTop+$;let a=e-s;a>1&&l(E,s,a),s=e}if(P){let{charIndex:e}=p;for(;e>u;)u++,P.hasOwnProperty(u)&&(n=P[u])}if(!d.isWhitespace&&!d.isEmpty){let t=i++,{fontSizeMult:a,src:o,index:s}=p.fontData,l=m[o]||(m[o]={});l[y]||(l[y]={path:d.path,pathBounds:[d.xMin,d.yMin,d.xMax,d.yMax]});let u=p.x+Y,g=p.y+c.baseline+$;v[2*t]=u,v[2*t+1]=g;let b=u+d.xMin*a,x=g+d.yMin*a,S=u+d.xMax*a,w=g+d.yMax*a;b<R[0]&&(R[0]=b),x<R[1]&&(R[1]=x),S>R[2]&&(R[2]=S),w>R[3]&&(R[3]=w),t%F==0&&(e={start:t,end:t,rect:[r,r,-r,-r]},I.push(e)),e.end++;let M=e.rect;if(b<M[0]&&(M[0]=b),x<M[1]&&(M[1]=x),S>M[2]&&(M[2]=S),w>M[3]&&(M[3]=w),f[t]=y,h[t]=s,P){let e=3*t;C[e]=n>>16&255,C[e+1]=n>>8&255,C[e+2]=255&n}}}}}),E){let e=o.length-s;e>1&&l(E,s,e)}}let K=[];B.forEach(({index:e,src:t,unitsPerEm:r,ascender:n,descender:a,lineHeight:i,capHeight:o,xHeight:s})=>{K[e]={src:t,unitsPerEm:r,ascender:n,descender:a,lineHeight:i,capHeight:o,xHeight:s}}),j.typesetting=u()-G,D({glyphIds:f,glyphFontIndices:h,glyphPositions:v,glyphData:m,fontData:K,caretPositions:E,glyphColors:C,chunkedBounds:I,fontSize:p,topBaseline:$+H[0].baseline,blockBounds:[Y,$-X,Y+L,$],visibleBounds:R,timings:j})})}function s(e){let t=e.match(/^([\d.]+)%$/),r=t?parseFloat(t[1]):NaN;return isNaN(r)?0:r/100}function l(e,t,r){let n=e[4*t],a=e[4*t+1],i=e[4*t+2],o=e[4*t+3],s=(a-n)/r;for(let a=0;a<r;a++){let r=(t+a)*4;e[r]=n+s*a,e[r+1]=n+s*(a+1),e[r+2]=i,e[r+3]=o}}function u(){return(self.performance||Date).now()}function c(){this.data=[]}let d=["glyphObj","x","y","width","charIndex","fontData"];return c.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(e){let t=c.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new c;return t.data=this.data.splice(e*d.length),t}},c.flyweight=d.reduce((e,t,r,n)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*d.length+r]},set(e){this.data[this.index*d.length+r]=e}}),e),{data:null,index:0}),{typeset:o,measure:function(e,t){o({...e,metricsOnly:!0},e=>{let[r,n,a,i]=e.blockBounds;t({width:a-r,height:i-n})})}}},ex,function(){return function(e){var t,r,n,a,i={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},o={},s={};o.L=1,s[1]="L",Object.keys(i).forEach(function(e,t){o[e]=1<<t+1,s[o[e]]=e}),Object.freeze(o);var l=o.LRI|o.RLI|o.FSI,u=o.L|o.R|o.AL,c=o.B|o.S|o.WS|o.ON|o.FSI|o.LRI|o.RLI|o.PDI,d=o.BN|o.RLE|o.LRE|o.RLO|o.LRO|o.PDF,f=o.S|o.WS|o.B|l|o.PDI|d,h=null;function p(e){if(!h){h=new Map;var t=function(e){if(i.hasOwnProperty(e)){var t=0;i[e].split(",").forEach(function(r){var n=r.split("+"),a=n[0],i=n[1];a=parseInt(a,36),i=i?parseInt(i,36):0,h.set(t+=a,o[e]);for(var s=0;s<i;s++)h.set(++t,o[e])})}};for(var r in i)t(r)}return h.get(e.codePointAt(0))||o.L}function v(e,t){var r,n=0,a=new Map,i=t&&new Map;return e.split(",").forEach(function e(o){if(-1!==o.indexOf("+"))for(var s=+o;s--;)e(r);else{r=o;var l=o.split(">"),u=l[0],c=l[1];u=String.fromCodePoint(n+=parseInt(u,36)),c=String.fromCodePoint(n+=parseInt(c,36)),a.set(u,c),t&&i.set(c,u)}}),{map:a,reverseMap:i}}function m(){if(!t){var e=v("14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",!0),a=e.map,i=e.reverseMap;t=a,r=i,n=v("6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye",!1).map}}function g(e){return m(),t.get(e)||null}function y(e){return m(),r.get(e)||null}function b(e){return m(),n.get(e)||null}var x=o.L,S=o.R,w=o.EN,M=o.ES,U=o.ET,_=o.AN,k=o.CS,T=o.B,C=o.S,E=o.ON,A=o.BN,F=o.NSM,P=o.AL,D=o.LRO,O=o.RLO,j=o.LRE,R=o.RLE,I=o.PDF,L=o.LRI,z=o.RLI,N=o.FSI,B=o.PDI;function G(e){if(!a){var t=v("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),r=t.map;t.reverseMap.forEach(function(e,t){r.set(t,e)}),a=r}return a.get(e)||null}function V(e,t,r,n){var a=e.length;r=Math.max(0,null==r?0:+r),n=Math.min(a-1,null==n?a-1:+n);var i=[];return t.paragraphs.forEach(function(a){var o=Math.max(r,a.start),s=Math.min(n,a.end);if(o<s){for(var l=t.levels.slice(o,s+1),u=s;u>=o&&p(e[u])&f;u--)l[u]=a.level;for(var c=a.level,d=1/0,h=0;h<l.length;h++){var v=l[h];v>c&&(c=v),v<d&&(d=1|v)}for(var m=c;m>=d;m--)for(var g=0;g<l.length;g++)if(l[g]>=m){for(var y=g;g+1<l.length&&l[g+1]>=m;)g++;g>y&&i.push([y+o,g+o])}}}),i}function W(e,t,r,n){for(var a=V(e,t,r,n),i=[],o=0;o<e.length;o++)i[o]=o;return a.forEach(function(e){for(var t=e[0],r=e[1],n=i.slice(t,r+1),a=n.length;a--;)i[r-a]=n[a]}),i}return e.closingToOpeningBracket=y,e.getBidiCharType=p,e.getBidiCharTypeName=function(e){return s[p(e)]},e.getCanonicalBracket=b,e.getEmbeddingLevels=function(e,t){for(var r=new Uint32Array(e.length),n=0;n<e.length;n++)r[n]=p(e[n]);var a=new Map;function i(e,t){var n=r[e];r[e]=t,a.set(n,a.get(n)-1),n&c&&a.set(c,a.get(c)-1),a.set(t,(a.get(t)||0)+1),t&c&&a.set(c,(a.get(c)||0)+1)}for(var o=new Uint8Array(e.length),s=new Map,h=[],v=null,m=0;m<e.length;m++)v||h.push(v={start:m,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:tA(m,!1)}),r[m]&T&&(v.end=m,v=null);for(var G=R|j|O|D|l|B|I|T,V=function(e){return e+(1&e?1:2)},W=function(e){return e+(1&e?2:1)},q=0;q<h.length;q++){var H=[{_level:(v=h[q]).level,_override:0,_isolate:0}],X=void 0,Y=0,$=0,K=0;a.clear();for(var Z=v.start;Z<=v.end;Z++){var Q=r[Z];if(X=H[H.length-1],a.set(Q,(a.get(Q)||0)+1),Q&c&&a.set(c,(a.get(c)||0)+1),Q&G)if(Q&(R|j)){o[Z]=X._level;var J=(Q===R?W:V)(X._level);!(J<=125)||Y||$?!Y&&$++:H.push({_level:J,_override:0,_isolate:0})}else if(Q&(O|D)){o[Z]=X._level;var ee=(Q===O?W:V)(X._level);!(ee<=125)||Y||$?!Y&&$++:H.push({_level:ee,_override:Q&O?S:x,_isolate:0})}else if(Q&l){Q&N&&(Q=1===tA(Z+1,!0)?z:L),o[Z]=X._level,X._override&&i(Z,X._override);var et=(Q===z?W:V)(X._level);et<=125&&0===Y&&0===$?(K++,H.push({_level:et,_override:0,_isolate:1,_isolInitIndex:Z})):Y++}else if(Q&B){if(Y>0)Y--;else if(K>0){for($=0;!H[H.length-1]._isolate;)H.pop();var er=H[H.length-1]._isolInitIndex;null!=er&&(s.set(er,Z),s.set(Z,er)),H.pop(),K--}X=H[H.length-1],o[Z]=X._level,X._override&&i(Z,X._override)}else Q&I?(0===Y&&($>0?$--:!X._isolate&&H.length>1&&(H.pop(),X=H[H.length-1])),o[Z]=X._level):Q&T&&(o[Z]=v.level);else o[Z]=X._level,X._override&&Q!==A&&i(Z,X._override)}for(var en=[],ea=null,ei=v.start;ei<=v.end;ei++){var eo=r[ei];if(!(eo&d)){var es=o[ei],el=eo&l,eu=eo===B;ea&&es===ea._level?(ea._end=ei,ea._endsWithIsolInit=el):en.push(ea={_start:ei,_end:ei,_level:es,_startsWithPDI:eu,_endsWithIsolInit:el})}}for(var ec=[],ed=0;ed<en.length;ed++){var ef=en[ed];if(!ef._startsWithPDI||ef._startsWithPDI&&!s.has(ef._start)){for(var eh=[ea=ef],ep=void 0;ea&&ea._endsWithIsolInit&&null!=(ep=s.get(ea._end));)for(var ev=ed+1;ev<en.length;ev++)if(en[ev]._start===ep){eh.push(ea=en[ev]);break}for(var em=[],eg=0;eg<eh.length;eg++)for(var ey=eh[eg],eb=ey._start;eb<=ey._end;eb++)em.push(eb);for(var ex=o[em[0]],eS=v.level,ew=em[0]-1;ew>=0;ew--)if(!(r[ew]&d)){eS=o[ew];break}var eM=em[em.length-1],eU=o[eM],e_=v.level;if(!(r[eM]&l)){for(var ek=eM+1;ek<=v.end;ek++)if(!(r[ek]&d)){e_=o[ek];break}}ec.push({_seqIndices:em,_sosType:Math.max(eS,ex)%2?S:x,_eosType:Math.max(e_,eU)%2?S:x})}}for(var eT=0;eT<ec.length;eT++){var eC=ec[eT],eE=eC._seqIndices,eA=eC._sosType,eF=eC._eosType,eP=1&o[eE[0]]?S:x;if(a.get(F))for(var eD=0;eD<eE.length;eD++){var eO=eE[eD];if(r[eO]&F){for(var ej=eA,eR=eD-1;eR>=0;eR--)if(!(r[eE[eR]]&d)){ej=r[eE[eR]];break}i(eO,ej&(l|B)?E:ej)}}if(a.get(w))for(var eI=0;eI<eE.length;eI++){var eL=eE[eI];if(r[eL]&w)for(var ez=eI-1;ez>=-1;ez--){var eN=-1===ez?eA:r[eE[ez]];if(eN&u){eN===P&&i(eL,_);break}}}if(a.get(P))for(var eB=0;eB<eE.length;eB++){var eG=eE[eB];r[eG]&P&&i(eG,S)}if(a.get(M)||a.get(k))for(var eV=1;eV<eE.length-1;eV++){var eW=eE[eV];if(r[eW]&(M|k)){for(var eq=0,eH=0,eX=eV-1;eX>=0&&(eq=r[eE[eX]])&d;eX--);for(var eY=eV+1;eY<eE.length&&(eH=r[eE[eY]])&d;eY++);eq===eH&&(r[eW]===M?eq===w:eq&(w|_))&&i(eW,eq)}}if(a.get(w)){for(var e$=0;e$<eE.length;e$++)if(r[eE[e$]]&w){for(var eK=e$-1;eK>=0&&r[eE[eK]]&(U|d);eK--)i(eE[eK],w);for(e$++;e$<eE.length&&r[eE[e$]]&(U|d|w);e$++)r[eE[e$]]!==w&&i(eE[e$],w)}}if(a.get(U)||a.get(M)||a.get(k))for(var eZ=0;eZ<eE.length;eZ++){var eQ=eE[eZ];if(r[eQ]&(U|M|k)){i(eQ,E);for(var eJ=eZ-1;eJ>=0&&r[eE[eJ]]&d;eJ--)i(eE[eJ],E);for(var e1=eZ+1;e1<eE.length&&r[eE[e1]]&d;e1++)i(eE[e1],E)}}if(a.get(w))for(var e0=0,e2=eA;e0<eE.length;e0++){var e3=eE[e0],e4=r[e3];e4&w?e2===x&&i(e3,x):e4&u&&(e2=e4)}if(a.get(c)){for(var e5=S|w|_,e6=e5|x,e9=[],e8=[],e7=0;e7<eE.length;e7++)if(r[eE[e7]]&c){var te=e[eE[e7]],tt=void 0;if(null!==g(te))if(e8.length<63)e8.push({char:te,seqIndex:e7});else break;else if(null!==(tt=y(te)))for(var tr=e8.length-1;tr>=0;tr--){var tn=e8[tr].char;if(tn===tt||tn===y(b(te))||g(b(tn))===te){e9.push([e8[tr].seqIndex,e7]),e8.length=tr;break}}}e9.sort(function(e,t){return e[0]-t[0]});for(var ta=0;ta<e9.length;ta++){for(var ti=e9[ta],to=ti[0],ts=ti[1],tl=!1,tu=0,tc=to+1;tc<ts;tc++){var td=eE[tc];if(r[td]&e6){tl=!0;var tf=r[td]&e5?S:x;if(tf===eP){tu=tf;break}}}if(tl&&!tu){tu=eA;for(var th=to-1;th>=0;th--){var tp=eE[th];if(r[tp]&e6){var tv=r[tp]&e5?S:x;tu=tv!==eP?tv:eP;break}}}if(tu){if(r[eE[to]]=r[eE[ts]]=tu,tu!==eP){for(var tm=to+1;tm<eE.length;tm++)if(!(r[eE[tm]]&d)){p(e[eE[tm]])&F&&(r[eE[tm]]=tu);break}}if(tu!==eP){for(var tg=ts+1;tg<eE.length;tg++)if(!(r[eE[tg]]&d)){p(e[eE[tg]])&F&&(r[eE[tg]]=tu);break}}}}for(var ty=0;ty<eE.length;ty++)if(r[eE[ty]]&c){for(var tb=ty,tx=ty,tS=eA,tw=ty-1;tw>=0;tw--)if(r[eE[tw]]&d)tb=tw;else{tS=r[eE[tw]]&e5?S:x;break}for(var tM=eF,tU=ty+1;tU<eE.length;tU++)if(r[eE[tU]]&(c|d))tx=tU;else{tM=r[eE[tU]]&e5?S:x;break}for(var t_=tb;t_<=tx;t_++)r[eE[t_]]=tS===tM?tS:eP;ty=tx}}}for(var tk=v.start;tk<=v.end;tk++){var tT=o[tk],tC=r[tk];if(1&tT?tC&(x|w|_)&&o[tk]++:tC&S?o[tk]++:tC&(_|w)&&(o[tk]+=2),tC&d&&(o[tk]=0===tk?v.level:o[tk-1]),tk===v.end||p(e[tk])&(C|T))for(var tE=tk;tE>=0&&p(e[tE])&f;tE--)o[tE]=v.level}}return{levels:o,paragraphs:h};function tA(t,n){for(var a=t;a<e.length;a++){var i=r[a];if(i&(S|P))return 1;if(i&(T|x)||n&&i===B)break;if(i&l){var o=function(t){for(var n=1,a=t+1;a<e.length;a++){var i=r[a];if(i&T)break;if(i&B){if(0==--n)return a}else i&l&&n++}return -1}(a);a=-1===o?e.length:o}}return 0}},e.getMirroredCharacter=G,e.getMirroredCharactersMap=function(e,t,r,n){var a=e.length;r=Math.max(0,null==r?0:+r),n=Math.min(a-1,null==n?a-1:+n);for(var i=new Map,o=r;o<=n;o++)if(1&t[o]){var s=G(e[o]);null!==s&&i.set(o,s)}return i},e.getReorderSegments=V,e.getReorderedIndices=W,e.getReorderedString=function(e,t,r,n){var a=W(e,t,r,n),i=[].concat(e);return a.forEach(function(r,n){i[n]=(1&t.levels[r]?G(e[r]):null)||e[r]}),i.join("")},e.openingToClosingBracket=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}],init:(e,t,r)=>e(t,r())}),ez=X({name:"Typesetter",dependencies:[eL],init:e=>function(t){return new Promise(r=>{e.typeset(t,r)})},getTransferables(e){let t=[];for(let r in e)e[r]&&e[r].buffer&&t.push(e[r].buffer);return t}}),eN=ez.onMainThread,eB={},eG="aTroikaGlyphIndex";class eV extends L.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new L.Sphere,this.boundingBox=new L.Box3}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){var t;let r;this._detail=e,("number"!=typeof e||e<1)&&(e=1);let n=((r=eB[t=e])||(r=eB[t]=new L.PlaneGeometry(1,1,t,t).translate(.5,.5,0)),r);["position","normal","uv"].forEach(e=>{this.attributes[e]=n.attributes[e].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,n,a){this.updateAttributeData("aTroikaGlyphBounds",e,4),this.updateAttributeData(eG,t,1),this.updateAttributeData("aTroikaGlyphColor",a,3),this._blockBounds=r,this._chunkedBounds=n,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){let e=this._blockBounds;if(e){let{curveRadius:t,boundingBox:r}=this;if(t){let{PI:n,floor:a,min:i,max:o,sin:s,cos:l}=Math,u=n/2,c=2*n,d=Math.abs(t),f=e[0]/d,h=e[2]/d,p=a((f+u)/c)!==a((h+u)/c)?-d:i(s(f)*d,s(h)*d),v=a((f-u)/c)!==a((h-u)/c)?d:o(s(f)*d,s(h)*d),m=a((f+n)/c)!==a((h+n)/c)?2*d:o(d-l(f)*d,d-l(h)*d);r.min.set(p,e[1],t<0?-m:0),r.max.set(v,e[3],t<0?0:m)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(eG).count,r=this._chunkedBounds;if(r)for(let n=r.length;n--;){t=r[n].end;let a=r[n].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,r){let n=this.getAttribute(e);t?n&&n.array.length===t.length?(n.array.set(t),n.needsUpdate=!0):(this.setAttribute(e,new L.InstancedBufferAttribute(t,r)),delete this._maxInstanceCount,this.dispose()):n&&this.deleteAttribute(e)}}let eW=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,eq=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,eH=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,eX=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`,eY=new L.MeshBasicMaterial({color:0xffffff,side:L.DoubleSide,transparent:!0}),e$=new L.Matrix4,eK=new L.Vector3,eZ=new L.Vector3,eQ=[],eJ=new L.Vector3,e1="+x+y";function e0(e){return Array.isArray(e)?e[0]:e}let e2=()=>{let e=new L.Mesh(new L.PlaneGeometry(1,1),eY);return e2=()=>e,e},e3=()=>{let e=new L.Mesh(new L.PlaneGeometry(1,1,32,1),eY);return e3=()=>e,e},e4={type:"syncstart"},e5={type:"synccomplete"},e6=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],e9=e6.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class e8 extends L.Mesh{constructor(){super(new eV,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=8421504,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=e1,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(e4),eO({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);let r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(e=>e&&e())})),this.dispatchEvent(e5),e&&e()})))}onBeforeRender(e,t,r,n,a,i){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){let t;return(t=es(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new L.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new L.Vector4(0,0,0,0)},uTroikaClipRect:{value:new L.Vector4(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new L.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new L.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new L.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:eW,vertexTransform:eq,fragmentDefs:eH,fragmentColorTransform:eX,customRewriter({vertexShader:e,fragmentShader:t}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(t)&&(t=t.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(e)||(e=e.replace(J,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}})).transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}get material(){let e=this._derivedMaterial,t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=eY.clone());if(e&&e.isDerivedFrom(t)||(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),!this.hasOutline())return e;{let t=e._outlineMtl;return t||((t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}})).isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),t.dispose()})),[t,e]}}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return e0(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return e0(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){let t=e.isTextOutlineMaterial,r=e.uniforms,n=this.textRenderInfo;if(n){let e,a,i,{sdfTexture:o,blockBounds:s}=n;r.uTroikaSDFTexture.value=o,r.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),r.uTroikaSDFGlyphSize.value=n.sdfGlyphSize,r.uTroikaSDFExponent.value=n.sdfExponent,r.uTroikaTotalBounds.value.fromArray(s),r.uTroikaUseGlyphColors.value=!t&&!!n.glyphColors;let l=0,u=0,c=0,d=0,f=0;if(t){let{outlineWidth:t,outlineOffsetX:r,outlineOffsetY:n,outlineBlur:a,outlineOpacity:i}=this;l=this._parsePercent(t)||0,u=Math.max(0,this._parsePercent(a)||0),e=i,d=this._parsePercent(r)||0,f=this._parsePercent(n)||0}else(c=Math.max(0,this._parsePercent(this.strokeWidth)||0))&&(i=this.strokeColor,r.uTroikaStrokeColor.value.set(null==i?8421504:i),null==(a=this.strokeOpacity)&&(a=1)),e=this.fillOpacity;r.uTroikaEdgeOffset.value=l,r.uTroikaPositionOffset.value.set(d,f),r.uTroikaBlurRadius.value=u,r.uTroikaStrokeWidth.value=c,r.uTroikaStrokeOpacity.value=a,r.uTroikaFillOpacity.value=null==e?1:e,r.uTroikaCurveRadius.value=this.curveRadius||0;let h=this.clipRect;if(h&&Array.isArray(h)&&4===h.length)r.uTroikaClipRect.value.fromArray(h);else{let e=100*(this.fontSize||.1);r.uTroikaClipRect.value.set(s[0]-e,s[1]-e,s[2]+e,s[3]+e)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;let a=t?this.outlineColor||0:this.color;if(null==a)delete e.color;else{let t=e.hasOwnProperty("color")?e.color:e.color=new L.Color;(a!==t._input||"object"==typeof a)&&t.set(t._input=a)}let i=this.orientation||e1;if(i!==e._orientation){let t=r.uTroikaOrient.value,n=(i=i.replace(/[^-+xyz]/g,""))!==e1&&i.match(/^([-+])([xyz])([-+])([xyz])$/);if(n){let[,e,r,a,i]=n;eK.set(0,0,0)[r]="-"===e?1:-1,eZ.set(0,0,0)[i]="-"===a?-1:1,e$.lookAt(eJ,eK.cross(eZ),eZ),t.setFromMatrix4(e$)}else t.identity();e._orientation=i}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new L.Vector2){t.copy(e);let r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new L.Vector2){return eK.copy(e),this.localPositionToTextCoords(this.worldToLocal(eK),t)}raycast(e,t){let{textRenderInfo:r,curveRadius:n}=this;if(r){let a=r.blockBounds,i=n?e3():e2(),o=i.geometry,{position:s,uv:l}=o.attributes;for(let e=0;e<l.count;e++){let t=a[0]+l.getX(e)*(a[2]-a[0]),r=a[1]+l.getY(e)*(a[3]-a[1]),i=0;n&&(i=n-Math.cos(t/n)*n,t=Math.sin(t/n)*n),s.setXYZ(e,t,r,i)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,i.matrixWorld=this.matrixWorld,i.material.side=this.material.side,eQ.length=0,i.raycast(e,eQ);for(let e=0;e<eQ.length;e++)eQ[e].object=this,t.push(eQ[e])}}copy(e){let t=this.geometry;return super.copy(e),this.geometry=t,e9.forEach(t=>{this[t]=e[t]}),this}clone(){return new this.constructor().copy(this)}}e6.forEach(e=>{let t="_private_"+e;Object.defineProperty(e8.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}),new L.Box3,new L.Color,new WeakMap,new WeakMap;var w=x,e7=e.i(20284);let te=m.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:r="middle",font:n,fontSize:a=1,children:i,characters:o,onSync:s,...l},u)=>{let c=(0,w.C)(({invalidate:e})=>e),[d]=m.useState(()=>new e8),[f,h]=m.useMemo(()=>{let e=[],t="";return m.Children.forEach(i,r=>{"string"==typeof r||"number"==typeof r?t+=r:e.push(r)}),[e,t]},[i]);return(0,e7.suspend)(()=>new Promise(e=>(function({font:e,characters:t,sdfGlyphSize:r},n){eO({font:e,sdfGlyphSize:r,text:Array.isArray(t)?t.join("\n"):""+t},n)})({font:n,characters:o},e)),["troika-text",n,o]),m.useLayoutEffect(()=>void d.sync(()=>{c(),s&&s(d)})),m.useEffect(()=>()=>d.dispose(),[d]),m.createElement("primitive",S({object:d,ref:u,font:n,text:h,anchorX:t,anchorY:r,fontSize:a,sdfGlyphSize:e},l),f)});var x=x;let tt=m.forwardRef(function({children:e,follow:t=!0,lockX:r=!1,lockY:n=!1,lockZ:a=!1,...i},o){let s=m.useRef(null),l=m.useRef(null),u=new M.Quaternion;return(0,x.D)(({camera:e})=>{if(!t||!l.current)return;let i=s.current.rotation.clone();l.current.updateMatrix(),l.current.updateWorldMatrix(!1,!1),l.current.getWorldQuaternion(u),e.getWorldQuaternion(s.current.quaternion).premultiply(u.invert()),r&&(s.current.rotation.x=i.x),n&&(s.current.rotation.y=i.y),a&&(s.current.rotation.z=i.z)}),m.useImperativeHandle(o,()=>l.current,[]),m.createElement("group",S({ref:l},i),m.createElement("group",{ref:s},e))}),tr={Sirius:{displayName:"",description:"   ,  "},Canopus:{displayName:"",description:"    ,  "},"Alpha Centauri":{displayName:" ",description:"   ,  "},Arcturus:{displayName:"",description:"   ,  "},Vega:{displayName:"",description:"  ,  "},Capella:{displayName:"",description:"    ,  "},Rigel:{displayName:"",description:"  ,  "},Procyon:{displayName:"",description:"  ,  "},Betelgeuse:{displayName:"",description:"  ,  "},Achernar:{displayName:"",description:" ,   "},Hadar:{displayName:"",description:" ,   "},Altair:{displayName:"",description:"  ,   ()"},Acrux:{displayName:"",description:" ,   "},Aldebaran:{displayName:"",description:" ,  "},Antares:{displayName:"",description:" ,   ( )"},Spica:{displayName:"",description:" ,   "},Pollux:{displayName:"",description:" ,  "},Fomalhaut:{displayName:"",description:" ,   "},Deneb:{displayName:"",description:"  ,  "},Mimosa:{displayName:"",description:" "},Regulus:{displayName:"",description:" ,  "},Adhara:{displayName:"",description:" ,    "},Castor:{displayName:"",description:" ,  6"},Shaula:{displayName:"",description:"  "},Gacrux:{displayName:"",description:" ,  "},Bellatrix:{displayName:"",description:"  "},Alnitak:{displayName:"",description:"   "},Alnilam:{displayName:"",description:"   "},Alnair:{displayName:"",description:" "},Alioth:{displayName:"",description:"() "},"Kaus Australis":{displayName:" ",description:" ,   "},Alkaid:{displayName:"",description:"  "},Polaris:{displayName:"",description:",  "},Alphard:{displayName:"",description:" , ' '"},Mirfak:{displayName:"",description:" "},Hamal:{displayName:"",description:" "},Dubhe:{displayName:"",description:"() ,  "},Mizar:{displayName:"",description:"   , "},Wezen:{displayName:"",description:" , "},Saiph:{displayName:"",description:"  "},Mintaka:{displayName:"",description:"   "},Atria:{displayName:"",description:" "},Peacock:{displayName:"",description:" "},Avior:{displayName:"",description:" "},Suhail:{displayName:"",description:" "},Mirzam:{displayName:"",description:" ,  "},Markeb:{displayName:"",description:" "},Denebola:{displayName:"",description:" ,  "},Alphecca:{displayName:"",description:" ,   "},Schedar:{displayName:"",description:" "},Eltanin:{displayName:"",description:" ,  "},Sadr:{displayName:"",description:" ,  "}},tn={:{displayName:"",description:"   ,   "},:{displayName:"",description:"(),     "},:{displayName:"",description:" ,    "},:{displayName:"",description:"   ,  "},:{displayName:"",description:"   "},:{displayName:"",description:"     "},:{displayName:"",description:"  ,    "}},ta={displayName:"",description:"   ,  29.5   "},ti={displayName:"",description:"  , G  (  -26.74)"},to={And:"",Ant:"",Aps:"",Aqr:"",Aql:"",Ara:"",Ari:"",Aur:"",Boo:"",Cae:"",Cam:"",Cnc:"",CVn:"",CMa:"",CMi:"",Cap:"",Car:"",Cas:"",Cen:"",Cep:"",Cet:"",Cha:"",Cir:"",Col:"",Com:"",CrA:"",CrB:"",Crv:"",Crt:"",Cru:"",Cyg:"",Del:"",Dor:"",Dra:"",Equ:"",Eri:"",For:"",Gem:"",Gru:"",Her:"",Hor:"",Hya:"",Hyi:"",Ind:"",Lac:"",Leo:"",LMi:"",Lep:"",Lib:"",Lup:"",Lyn:"",Lyr:"",Men:"",Mic:"",Mon:"",Mus:"",Nor:"",Oct:"",Oph:"",Ori:"",Pav:"",Peg:"",Per:"",Phe:"",Pic:"",Psc:"",PsA:"",Pup:"",Pyx:"",Ret:"",Sge:"",Sgr:"",Sco:"",Scl:"",Sct:"",Ser:"",Sex:"",Tau:"",Tel:"",TrA:"",Tri:"",Tuc:"",UMa:"",UMi:"",Vel:"",Vir:"",Vol:"",Vul:""};function ts(e){let t,r,n;if(e<-.4&&(e=-.4),e>2&&(e=2),e<0){let a=(e+.4)/.4;t=.6+.4*a,r=.7+.3*a,n=1}else if(e<.4){let a=e/.4;t=1,r=1-.1*a,n=1-.2*a}else if(e<.8){let a=(e-.4)/.4;t=1,r=.9-.15*a,n=.8-.3*a}else if(e<1.2){let a=(e-.8)/.4;t=1,r=.75-.2*a,n=.5-.2*a}else{let a=(e-1.2)/.8;t=1-.1*a,r=.55-.25*a,n=.3-.15*a}return[t,r,n]}let tl=new M.Vector3,tu=new M.Vector3;function tc(e){let t,r,n,a,i,o,s,l,u,c,d,f,h,p,y,b,S,w,U,_,k,T=(0,g.c)(42),{stars:C,onStarClick:E}=e,A=(0,m.useRef)(null);T[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Map,T[0]=t):t=T[0];let F=(0,m.useRef)(t);T[1]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,T[1]=r):r=T[1];let P=(0,m.useRef)(r);T[2]!==C?(i=new Float32Array(3*C.length),n=new Float32Array(3*C.length),o=new Float32Array(C.length),a=new Float32Array(C.length),C.forEach((e,t)=>{let r;i[3*t]=e.position[0],i[3*t+1]=e.position[1],i[3*t+2]=e.position[2];let[s,l,u]=ts(e.bv??.6);n[3*t]=s,n[3*t+1]=l,n[3*t+2]=u,o[t]=(r=Math.sqrt(Math.pow(10,-e.mag/2.5)),Math.max(.8,Math.min(8,.8+r/Math.sqrt(3.8370724549227875)*7.2))),a[t]=Math.max(.35,Math.min(1,Math.pow(10,-e.mag/2.5)/3.8370724549227875))}),T[2]=C,T[3]=n,T[4]=a,T[5]=i,T[6]=o):(n=T[3],a=T[4],i=T[5],o=T[6]),T[7]!==n||T[8]!==a||T[9]!==i||T[10]!==o?(s={positions:i,colors:n,sizes:o,opacities:a},T[7]=n,T[8]=a,T[9]=i,T[10]=o,T[11]=s):s=T[11];let{positions:D,colors:O,sizes:j,opacities:R}=s;T[12]!==C?(l=C.map(tf).filter(td),T[12]=C,T[13]=l):l=T[13];let I=l;if(T[14]===Symbol.for("react.memo_cache_sentinel")){let e=document.createElement("canvas");e.width=64,e.height=64;let t=e.getContext("2d"),r=t.createRadialGradient(32,32,0,32,32,32);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(.15,"rgba(255, 255, 255, 0.9)"),r.addColorStop(.35,"rgba(255, 255, 255, 0.5)"),r.addColorStop(.65,"rgba(255, 255, 255, 0.15)"),r.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=r,t.fillRect(0,0,64,64),u=new M.CanvasTexture(e),T[14]=u}else u=T[14];let L=u;T[15]===Symbol.for("react.memo_cache_sentinel")?(c=(e,t)=>{t?F.current.set(e,t):F.current.delete(e)},T[15]=c):c=T[15];let z=c;T[16]===Symbol.for("react.memo_cache_sentinel")?(d=(e,t)=>{t?P.current.set(e,t):P.current.delete(e)},T[16]=d):d=T[16];let N=d;if(T[17]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{let{camera:t}=e;t.getWorldDirection(tl);let r=Math.tan(t.fov*Math.PI/360),n=Math.cos((.5*t.fov+15)*Math.PI/180);F.current.forEach((e,t)=>{tu.set(...e.position.toArray()).normalize();let a=tl.dot(tu);if(a<n){e.visible=!1;return}e.visible=!0;let i=P.current.get(t);if(i){let e=Math.max(a,.15);i.scale.setScalar(r*e)}})},T[17]=f):f=T[17],(0,x.D)(f),T[18]!==D?(h=(0,v.jsx)("bufferAttribute",{attach:"attributes-position",args:[D,3]}),T[18]=D,T[19]=h):h=T[19],T[20]!==O?(p=(0,v.jsx)("bufferAttribute",{attach:"attributes-color",args:[O,3]}),T[20]=O,T[21]=p):p=T[21],T[22]!==j?(y=(0,v.jsx)("bufferAttribute",{attach:"attributes-size",args:[j,1]}),T[22]=j,T[23]=y):y=T[23],T[24]!==R?(b=(0,v.jsx)("bufferAttribute",{attach:"attributes-opacity",args:[R,1]}),T[24]=R,T[25]=b):b=T[25],T[26]!==p||T[27]!==y||T[28]!==b||T[29]!==h?(S=(0,v.jsxs)("bufferGeometry",{children:[h,p,y,b]}),T[26]=p,T[27]=y,T[28]=b,T[29]=h,T[30]=S):S=T[30],T[31]===Symbol.for("react.memo_cache_sentinel")?(w=(0,v.jsx)("shaderMaterial",{transparent:!0,depthWrite:!1,blending:M.AdditiveBlending,vertexColors:!0,uniforms:{pointTexture:{value:L}},vertexShader:"\n            attribute float size;\n            attribute float opacity;\n            varying vec3 vColor;\n            varying float vOpacity;\n\n            void main() {\n              vColor = color;\n              vOpacity = opacity;\n              vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n              gl_PointSize = size * (450.0 / -mvPosition.z);\n              gl_Position = projectionMatrix * mvPosition;\n            }\n          ",fragmentShader:"\n            uniform sampler2D pointTexture;\n            varying vec3 vColor;\n            varying float vOpacity;\n\n            void main() {\n              vec4 texColor = texture2D(pointTexture, gl_PointCoord);\n              gl_FragColor = vec4(vColor, vOpacity) * texColor;\n            }\n          "}),T[31]=w):w=T[31],T[32]!==S?(U=(0,v.jsxs)("points",{ref:A,children:[S,w]}),T[32]=S,T[33]=U):U=T[33],T[34]!==I||T[35]!==E){let e;T[37]!==E?(e=e=>(0,v.jsxs)("group",{ref:t=>z(e.starId,t),position:e.position,onClick:t=>{t.stopPropagation(),E?.(e)},children:[(0,v.jsx)("sprite",{scale:[1.5,1.5,1],children:(0,v.jsx)("spriteMaterial",{map:L,color:e.color,transparent:!0,opacity:.9,blending:M.AdditiveBlending,depthWrite:!1})}),(0,v.jsx)("group",{ref:t=>N(e.starId,t),position:[0,3,0],children:(0,v.jsx)(tt,{children:(0,v.jsx)(te,{fontSize:2.5,color:"#ffffff",anchorX:"center",anchorY:"bottom",outlineWidth:.1,outlineColor:"#000000",children:e.displayName})})}),(0,v.jsxs)("mesh",{children:[(0,v.jsx)("boxGeometry",{args:[4,4,4]}),(0,v.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]})]},`${e.name}-${e.ra.toFixed(4)}`),T[37]=E,T[38]=e):e=T[38],_=I.map(e),T[34]=I,T[35]=E,T[36]=_}else _=T[36];return T[39]!==U||T[40]!==_?(k=(0,v.jsxs)(v.Fragment,{children:[U,_]}),T[39]=U,T[40]=_,T[41]=k):k=T[41],k}function td(e){return null!==e}function tf(e){var t;if(!e.name||e.mag>3)return null;let r=(t=e.name,tr[t]?.displayName??null??e.name),n=new M.Color(...ts(e.bv??.6)),a=`${e.name}-${e.ra.toFixed(4)}`;return{...e,displayName:r,color:n,starId:a}}var x=x,th=x;let tp=new Date("2000-01-01T12:00:00Z"),tv=2*Math.PI,tm=180/Math.PI*3600,tg=-.17-5*Math.log10(648e3/Math.PI);function ty(e){if(!0!==e&&!1!==e)throw console.trace(),`Value is not boolean: ${e}`;return e}function tb(e){if(!Number.isFinite(e))throw console.trace(),`Value is not a finite number: ${e}`;return e}function tx(e){return e-Math.floor(e)}(a=u||(u={})).Sun="Sun",a.Moon="Moon",a.Mercury="Mercury",a.Venus="Venus",a.Earth="Earth",a.Mars="Mars",a.Jupiter="Jupiter",a.Saturn="Saturn",a.Uranus="Uranus",a.Neptune="Neptune",a.Pluto="Pluto",a.SSB="SSB",a.EMB="EMB",a.Star1="Star1",a.Star2="Star2",a.Star3="Star3",a.Star4="Star4",a.Star5="Star5",a.Star6="Star6",a.Star7="Star7",a.Star8="Star8";let tS=[u.Star1,u.Star2,u.Star3,u.Star4,u.Star5,u.Star6,u.Star7,u.Star8],tw=[{ra:0,dec:0,dist:0},{ra:0,dec:0,dist:0},{ra:0,dec:0,dist:0},{ra:0,dec:0,dist:0},{ra:0,dec:0,dist:0},{ra:0,dec:0,dist:0},{ra:0,dec:0,dist:0},{ra:0,dec:0,dist:0}];function tM(e){let t,r=(t=tS.indexOf(e))>=0?tw[t]:null;return r&&r.dist>0?r:null}(i=c||(c={}))[i.From2000=0]="From2000",i[i.Into2000=1]="Into2000";let tU={Mercury:[[[[4.40250710144,0,0],[.40989414977,1.48302034195,26087.9031415742],[.050462942,4.47785489551,52175.8062831484],[.00855346844,1.16520322459,78263.70942472259],[.00165590362,4.11969163423,104351.61256629678],[34561897e-11,.77930768443,130439.51570787099],[7583476e-11,3.71348404924,156527.41884944518]],[[26087.90313685529,0,0],[.01131199811,6.21874197797,26087.9031415742],[.00292242298,3.04449355541,52175.8062831484],[75775081e-11,6.08568821653,78263.70942472259],[19676525e-11,2.80965111777,104351.61256629678]]],[[[.11737528961,1.98357498767,26087.9031415742],[.02388076996,5.03738959686,52175.8062831484],[.01222839532,3.14159265359,0],[.0054325181,1.79644363964,78263.70942472259],[.0012977877,4.83232503958,104351.61256629678],[31866927e-11,1.58088495658,130439.51570787099],[7963301e-11,4.60972126127,156527.41884944518]],[[.00274646065,3.95008450011,26087.9031415742],[99737713e-11,3.14159265359,0]]],[[[.39528271651,0,0],[.07834131818,6.19233722598,26087.9031415742],[.00795525558,2.95989690104,52175.8062831484],[.00121281764,6.01064153797,78263.70942472259],[21921969e-11,2.77820093972,104351.61256629678],[4354065e-11,5.82894543774,130439.51570787099]],[[.0021734774,4.65617158665,26087.9031415742],[44141826e-11,1.42385544001,52175.8062831484]]]],Venus:[[[[3.17614666774,0,0],[.01353968419,5.59313319619,10213.285546211],[89891645e-11,5.30650047764,20426.571092422],[5477194e-11,4.41630661466,7860.4193924392],[3455741e-11,2.6996444782,11790.6290886588],[2372061e-11,2.99377542079,3930.2096962196],[1317168e-11,5.18668228402,26.2983197998],[1664146e-11,4.25018630147,1577.3435424478],[1438387e-11,4.15745084182,9683.5945811164],[1200521e-11,6.15357116043,30639.856638633]],[[10213.28554621638,0,0],[95617813e-11,2.4640651111,10213.285546211],[7787201e-11,.6247848222,20426.571092422]]],[[[.05923638472,.26702775812,10213.285546211],[40107978e-11,1.14737178112,20426.571092422],[32814918e-11,3.14159265359,0]],[[.00287821243,1.88964962838,10213.285546211]]],[[[.72334820891,0,0],[.00489824182,4.02151831717,10213.285546211],[1658058e-11,4.90206728031,20426.571092422],[1378043e-11,1.12846591367,11790.6290886588],[1632096e-11,2.84548795207,7860.4193924392],[498395e-11,2.58682193892,9683.5945811164],[221985e-11,2.01346696541,19367.1891622328],[237454e-11,2.55136053886,15720.8387848784]],[[34551041e-11,.89198706276,10213.285546211]]]],Earth:[[[[1.75347045673,0,0],[.03341656453,4.66925680415,6283.0758499914],[34894275e-11,4.62610242189,12566.1516999828],[3417572e-11,2.82886579754,3.523118349],[3497056e-11,2.74411783405,5753.3848848968],[3135899e-11,3.62767041756,77713.7714681205],[2676218e-11,4.41808345438,7860.4193924392],[2342691e-11,6.13516214446,3930.2096962196],[1273165e-11,2.03709657878,529.6909650946],[1324294e-11,.74246341673,11506.7697697936],[901854e-11,2.04505446477,26.2983197998],[1199167e-11,1.10962946234,1577.3435424478],[857223e-11,3.50849152283,398.1490034082],[779786e-11,1.17882681962,5223.6939198022],[99025e-10,5.23268072088,5884.9268465832],[753141e-11,2.53339052847,5507.5532386674],[505267e-11,4.58292599973,18849.2275499742],[492392e-11,4.20505711826,775.522611324],[356672e-11,2.91954114478,.0673103028],[284125e-11,1.89869240932,796.2980068164],[242879e-11,.34481445893,5486.777843175],[317087e-11,5.84901948512,11790.6290886588],[271112e-11,.31486255375,10977.078804699],[206217e-11,4.80646631478,2544.3144198834],[205478e-11,1.86953770281,5573.1428014331],[202318e-11,2.45767790232,6069.7767545534],[126225e-11,1.08295459501,20.7753954924],[155516e-11,.83306084617,213.299095438]],[[6283.0758499914,0,0],[.00206058863,2.67823455808,6283.0758499914],[4303419e-11,2.63512233481,12566.1516999828]],[[8721859e-11,1.07253635559,6283.0758499914]]],[[],[[.00227777722,3.4137662053,6283.0758499914],[3805678e-11,3.37063423795,12566.1516999828]]],[[[1.00013988784,0,0],[.01670699632,3.09846350258,6283.0758499914],[13956024e-11,3.05524609456,12566.1516999828],[308372e-10,5.19846674381,77713.7714681205],[1628463e-11,1.17387558054,5753.3848848968],[1575572e-11,2.84685214877,7860.4193924392],[924799e-11,5.45292236722,11506.7697697936],[542439e-11,4.56409151453,3930.2096962196],[47211e-10,3.66100022149,5884.9268465832],[85831e-11,1.27079125277,161000.6857376741],[57056e-11,2.01374292245,83996.84731811189],[55736e-11,5.2415979917,71430.69561812909],[174844e-11,3.01193636733,18849.2275499742],[243181e-11,4.2734953079,11790.6290886588]],[[.00103018607,1.10748968172,6283.0758499914],[1721238e-11,1.06442300386,12566.1516999828]],[[4359385e-11,5.78455133808,6283.0758499914]]]],Mars:[[[[6.20347711581,0,0],[.18656368093,5.0503710027,3340.6124266998],[.01108216816,5.40099836344,6681.2248533996],[91798406e-11,5.75478744667,10021.8372800994],[27744987e-11,5.97049513147,3.523118349],[10610235e-11,2.93958560338,2281.2304965106],[12315897e-11,.84956094002,2810.9214616052],[8926784e-11,4.15697846427,.0172536522],[8715691e-11,6.11005153139,13362.4497067992],[6797556e-11,.36462229657,398.1490034082],[7774872e-11,3.33968761376,5621.8429232104],[3575078e-11,1.6618650571,2544.3144198834],[4161108e-11,.22814971327,2942.4634232916],[3075252e-11,.85696614132,191.4482661116],[2628117e-11,.64806124465,3337.0893083508],[2937546e-11,6.07893711402,.0673103028],[2389414e-11,5.03896442664,796.2980068164],[2579844e-11,.02996736156,3344.1355450488],[1528141e-11,1.14979301996,6151.533888305],[1798806e-11,.65634057445,529.6909650946],[1264357e-11,3.62275122593,5092.1519581158],[1286228e-11,3.06796065034,2146.1654164752],[1546404e-11,2.91579701718,1751.539531416],[1024902e-11,3.69334099279,8962.4553499102],[891566e-11,.18293837498,16703.062133499],[858759e-11,2.4009381194,2914.0142358238],[832715e-11,2.46418619474,3340.5951730476],[83272e-10,4.49495782139,3340.629680352],[712902e-11,3.66335473479,1059.3819301892],[748723e-11,3.82248614017,155.4203994342],[723861e-11,.67497311481,3738.761430108],[635548e-11,2.92182225127,8432.7643848156],[655162e-11,.48864064125,3127.3133312618],[550474e-11,3.81001042328,.9803210682],[55275e-10,4.47479317037,1748.016413067],[425966e-11,.55364317304,6283.0758499914],[415131e-11,.49662285038,213.299095438],[472167e-11,3.62547124025,1194.4470102246],[306551e-11,.38052848348,6684.7479717486],[312141e-11,.99853944405,6677.7017350506],[293198e-11,4.22131299634,20.7753954924],[302375e-11,4.48618007156,3532.0606928114],[274027e-11,.54222167059,3340.545116397],[281079e-11,5.88163521788,1349.8674096588],[231183e-11,1.28242156993,3870.3033917944],[283602e-11,5.7688543494,3149.1641605882],[236117e-11,5.75503217933,3333.498879699],[274033e-11,.13372524985,3340.6797370026],[299395e-11,2.78323740866,6254.6266625236]],[[3340.61242700512,0,0],[.01457554523,3.60433733236,3340.6124266998],[.00168414711,3.92318567804,6681.2248533996],[20622975e-11,4.26108844583,10021.8372800994],[3452392e-11,4.7321039319,3.523118349],[2586332e-11,4.60670058555,13362.4497067992],[841535e-11,4.45864030426,2281.2304965106]],[[58152577e-11,2.04961712429,3340.6124266998],[13459579e-11,2.45738706163,6681.2248533996]]],[[[.03197134986,3.76832042431,3340.6124266998],[.00298033234,4.10616996305,6681.2248533996],[.00289104742,0,0],[31365539e-11,4.4465105309,10021.8372800994],[34841e-9,4.7881254926,13362.4497067992]],[[.00217310991,6.04472194776,3340.6124266998],[20976948e-11,3.14159265359,0],[12834709e-11,1.60810667915,6681.2248533996]]],[[[1.53033488271,0,0],[.1418495316,3.47971283528,3340.6124266998],[.00660776362,3.81783443019,6681.2248533996],[46179117e-11,4.15595316782,10021.8372800994],[8109733e-11,5.55958416318,2810.9214616052],[7485318e-11,1.77239078402,5621.8429232104],[5523191e-11,1.3643630377,2281.2304965106],[382516e-10,4.49407183687,13362.4497067992],[2306537e-11,.09081579001,2544.3144198834],[1999396e-11,5.36059617709,3337.0893083508],[2484394e-11,4.9254563992,2942.4634232916],[1960195e-11,4.74249437639,3344.1355450488],[1167119e-11,2.11260868341,5092.1519581158],[1102816e-11,5.00908403998,398.1490034082],[899066e-11,4.40791133207,529.6909650946],[992252e-11,5.83861961952,6151.533888305],[807354e-11,2.10217065501,1059.3819301892],[797915e-11,3.44839203899,796.2980068164],[740975e-11,1.49906336885,2146.1654164752]],[[.01107433345,2.03250524857,3340.6124266998],[.00103175887,2.37071847807,6681.2248533996],[128772e-9,0,0],[1081588e-10,2.70888095665,10021.8372800994]],[[44242249e-11,.47930604954,3340.6124266998],[8138042e-11,.86998389204,6681.2248533996]]]],Jupiter:[[[[.59954691494,0,0],[.09695898719,5.06191793158,529.6909650946],[.00573610142,1.44406205629,7.1135470008],[.00306389205,5.41734730184,1059.3819301892],[97178296e-11,4.14264726552,632.7837393132],[72903078e-11,3.64042916389,522.5774180938],[64263975e-11,3.41145165351,103.0927742186],[39806064e-11,2.29376740788,419.4846438752],[38857767e-11,1.27231755835,316.3918696566],[27964629e-11,1.7845459182,536.8045120954],[1358973e-10,5.7748104079,1589.0728952838],[8246349e-11,3.5822792584,206.1855484372],[8768704e-11,3.63000308199,949.1756089698],[7368042e-11,5.0810119427,735.8765135318],[626315e-10,.02497628807,213.299095438],[6114062e-11,4.51319998626,1162.4747044078],[4905396e-11,1.32084470588,110.2063212194],[5305285e-11,1.30671216791,14.2270940016],[5305441e-11,4.18625634012,1052.2683831884],[4647248e-11,4.69958103684,3.9321532631],[3045023e-11,4.31676431084,426.598190876],[2609999e-11,1.56667394063,846.0828347512],[2028191e-11,1.06376530715,3.1813937377],[1764763e-11,2.14148655117,1066.49547719],[1722972e-11,3.88036268267,1265.5674786264],[1920945e-11,.97168196472,639.897286314],[1633223e-11,3.58201833555,515.463871093],[1431999e-11,4.29685556046,625.6701923124],[973272e-11,4.09764549134,95.9792272178]],[[529.69096508814,0,0],[.00489503243,4.2208293947,529.6909650946],[.00228917222,6.02646855621,7.1135470008],[30099479e-11,4.54540782858,1059.3819301892],[2072092e-10,5.45943156902,522.5774180938],[12103653e-11,.16994816098,536.8045120954],[6067987e-11,4.42422292017,103.0927742186],[5433968e-11,3.98480737746,419.4846438752],[4237744e-11,5.89008707199,14.2270940016]],[[47233601e-11,4.32148536482,7.1135470008],[30649436e-11,2.929777887,529.6909650946],[14837605e-11,3.14159265359,0]]],[[[.02268615702,3.55852606721,529.6909650946],[.00109971634,3.90809347197,1059.3819301892],[.00110090358,0,0],[8101428e-11,3.60509572885,522.5774180938],[6043996e-11,4.25883108339,1589.0728952838],[6437782e-11,.30627119215,536.8045120954]],[[78203446e-11,1.52377859742,529.6909650946]]],[[[5.20887429326,0,0],[.25209327119,3.49108639871,529.6909650946],[.00610599976,3.84115365948,1059.3819301892],[.00282029458,2.57419881293,632.7837393132],[.00187647346,2.07590383214,522.5774180938],[86792905e-11,.71001145545,419.4846438752],[72062974e-11,.21465724607,536.8045120954],[65517248e-11,5.9799588479,316.3918696566],[29134542e-11,1.67759379655,103.0927742186],[30135335e-11,2.16132003734,949.1756089698],[23453271e-11,3.54023522184,735.8765135318],[22283743e-11,4.19362594399,1589.0728952838],[23947298e-11,.2745803748,7.1135470008],[13032614e-11,2.96042965363,1162.4747044078],[970336e-10,1.90669633585,206.1855484372],[12749023e-11,2.71550286592,1052.2683831884],[7057931e-11,2.18184839926,1265.5674786264],[6137703e-11,6.26418240033,846.0828347512],[2616976e-11,2.00994012876,1581.959348283]],[[.0127180152,2.64937512894,529.6909650946],[61661816e-11,3.00076460387,1059.3819301892],[53443713e-11,3.89717383175,522.5774180938],[31185171e-11,4.88276958012,536.8045120954],[41390269e-11,0,0]]]],Saturn:[[[[.87401354025,0,0],[.11107659762,3.96205090159,213.299095438],[.01414150957,4.58581516874,7.1135470008],[.00398379389,.52112032699,206.1855484372],[.00350769243,3.30329907896,426.598190876],[.00206816305,.24658372002,103.0927742186],[792713e-9,3.84007056878,220.4126424388],[23990355e-11,4.66976924553,110.2063212194],[16573588e-11,.43719228296,419.4846438752],[14906995e-11,5.76903183869,316.3918696566],[1582029e-10,.93809155235,632.7837393132],[14609559e-11,1.56518472,3.9321532631],[13160301e-11,4.44891291899,14.2270940016],[15053543e-11,2.71669915667,639.897286314],[13005299e-11,5.98119023644,11.0457002639],[10725067e-11,3.12939523827,202.2533951741],[5863206e-11,.23656938524,529.6909650946],[5227757e-11,4.20783365759,3.1813937377],[6126317e-11,1.76328667907,277.0349937414],[5019687e-11,3.17787728405,433.7117378768],[459255e-10,.61977744975,199.0720014364],[4005867e-11,2.24479718502,63.7358983034],[2953796e-11,.98280366998,95.9792272178],[387367e-10,3.22283226966,138.5174968707],[2461186e-11,2.03163875071,735.8765135318],[3269484e-11,.77492638211,949.1756089698],[1758145e-11,3.2658010994,522.5774180938],[1640172e-11,5.5050445305,846.0828347512],[1391327e-11,4.02333150505,323.5054166574],[1580648e-11,4.37265307169,309.2783226558],[1123498e-11,2.83726798446,415.5524906121],[1017275e-11,3.71700135395,227.5261894396],[848642e-11,3.1915017083,209.3669421749]],[[213.2990952169,0,0],[.01297370862,1.82834923978,213.299095438],[.00564345393,2.88499717272,7.1135470008],[93734369e-11,1.06311793502,426.598190876],[.00107674962,2.27769131009,206.1855484372],[40244455e-11,2.04108104671,220.4126424388],[19941774e-11,1.2795439047,103.0927742186],[10511678e-11,2.7488034213,14.2270940016],[6416106e-11,.38238295041,639.897286314],[4848994e-11,2.43037610229,419.4846438752],[4056892e-11,2.92133209468,110.2063212194],[3768635e-11,3.6496533078,3.9321532631]],[[.0011644133,1.17988132879,7.1135470008],[91841837e-11,.0732519584,213.299095438],[36661728e-11,0,0],[15274496e-11,4.06493179167,206.1855484372]]],[[[.04330678039,3.60284428399,213.299095438],[.00240348302,2.85238489373,426.598190876],[84745939e-11,0,0],[30863357e-11,3.48441504555,220.4126424388],[34116062e-11,.57297307557,206.1855484372],[1473407e-10,2.11846596715,639.897286314],[9916667e-11,5.79003188904,419.4846438752],[6993564e-11,4.7360468972,7.1135470008],[4807588e-11,5.43305312061,316.3918696566]],[[.00198927992,4.93901017903,213.299095438],[36947916e-11,3.14159265359,0],[17966989e-11,.5197943111,426.598190876]]],[[[9.55758135486,0,0],[.52921382865,2.39226219573,213.299095438],[.01873679867,5.2354960466,206.1855484372],[.01464663929,1.64763042902,426.598190876],[.00821891141,5.93520042303,316.3918696566],[.00547506923,5.0153261898,103.0927742186],[.0037168465,2.27114821115,220.4126424388],[.00361778765,3.13904301847,7.1135470008],[.00140617506,5.70406606781,632.7837393132],[.00108974848,3.29313390175,110.2063212194],[69006962e-11,5.94099540992,419.4846438752],[61053367e-11,.94037691801,639.897286314],[48913294e-11,1.55733638681,202.2533951741],[34143772e-11,.19519102597,277.0349937414],[32401773e-11,5.47084567016,949.1756089698],[20936596e-11,.46349251129,735.8765135318],[9796004e-11,5.20477537945,1265.5674786264],[11993338e-11,5.98050967385,846.0828347512],[208393e-9,1.52102476129,433.7117378768],[15298404e-11,3.0594381494,529.6909650946],[6465823e-11,.17732249942,1052.2683831884],[11380257e-11,1.7310542704,522.5774180938],[3419618e-11,4.94550542171,1581.959348283]],[[.0618298134,.2584351148,213.299095438],[.00506577242,.71114625261,206.1855484372],[.00341394029,5.79635741658,426.598190876],[.00188491195,.47215589652,220.4126424388],[.00186261486,3.14159265359,0],[.00143891146,1.40744822888,7.1135470008]],[[.00436902572,4.78671677509,213.299095438]]]],Uranus:[[[[5.48129294297,0,0],[.09260408234,.89106421507,74.7815985673],[.01504247898,3.6271926092,1.4844727083],[.00365981674,1.89962179044,73.297125859],[.00272328168,3.35823706307,149.5631971346],[70328461e-11,5.39254450063,63.7358983034],[68892678e-11,6.09292483287,76.2660712756],[61998615e-11,2.26952066061,2.9689454166],[61950719e-11,2.85098872691,11.0457002639],[2646877e-10,3.14152083966,71.8126531507],[25710476e-11,6.11379840493,454.9093665273],[2107885e-10,4.36059339067,148.0787244263],[17818647e-11,1.74436930289,36.6485629295],[14613507e-11,4.73732166022,3.9321532631],[11162509e-11,5.8268179635,224.3447957019],[1099791e-10,.48865004018,138.5174968707],[9527478e-11,2.95516862826,35.1640902212],[7545601e-11,5.236265824,109.9456887885],[4220241e-11,3.23328220918,70.8494453042],[40519e-9,2.277550173,151.0476698429],[3354596e-11,1.0654900738,4.4534181249],[2926718e-11,4.62903718891,9.5612275556],[349034e-10,5.48306144511,146.594251718],[3144069e-11,4.75199570434,77.7505439839],[2922333e-11,5.35235361027,85.8272988312],[2272788e-11,4.36600400036,70.3281804424],[2051219e-11,1.51773566586,.1118745846],[2148602e-11,.60745949945,38.1330356378],[1991643e-11,4.92437588682,277.0349937414],[1376226e-11,2.04283539351,65.2203710117],[1666902e-11,3.62744066769,380.12776796],[1284107e-11,3.11347961505,202.2533951741],[1150429e-11,.93343589092,3.1813937377],[1533221e-11,2.58594681212,52.6901980395],[1281604e-11,.54271272721,222.8603229936],[1372139e-11,4.19641530878,111.4301614968],[1221029e-11,.1990065003,108.4612160802],[946181e-11,1.19253165736,127.4717966068],[1150989e-11,4.17898916639,33.6796175129]],[[74.7815986091,0,0],[.00154332863,5.24158770553,74.7815985673],[24456474e-11,1.71260334156,1.4844727083],[9258442e-11,.4282973235,11.0457002639],[8265977e-11,1.50218091379,63.7358983034],[915016e-10,1.41213765216,149.5631971346]]],[[[.01346277648,2.61877810547,74.7815985673],[623414e-9,5.08111189648,149.5631971346],[61601196e-11,3.14159265359,0],[9963722e-11,1.61603805646,76.2660712756],[992616e-10,.57630380333,73.297125859]],[[34101978e-11,.01321929936,74.7815985673]]],[[[19.21264847206,0,0],[.88784984413,5.60377527014,74.7815985673],[.03440836062,.32836099706,73.297125859],[.0205565386,1.7829515933,149.5631971346],[.0064932241,4.52247285911,76.2660712756],[.00602247865,3.86003823674,63.7358983034],[.00496404167,1.40139935333,454.9093665273],[.00338525369,1.58002770318,138.5174968707],[.00243509114,1.57086606044,71.8126531507],[.00190522303,1.99809394714,1.4844727083],[.00161858838,2.79137786799,148.0787244263],[.00143706183,1.38368544947,11.0457002639],[93192405e-11,.17437220467,36.6485629295],[71424548e-11,4.24509236074,224.3447957019],[89806014e-11,3.66105364565,109.9456887885],[39009723e-11,1.66971401684,70.8494453042],[46677296e-11,1.39976401694,35.1640902212],[39025624e-11,3.36234773834,277.0349937414],[36755274e-11,3.88649278513,146.594251718],[30348723e-11,.70100838798,151.0476698429],[29156413e-11,3.180563367,77.7505439839],[22637073e-11,.72518687029,529.6909650946],[11959076e-11,1.7504339214,984.6003316219],[25620756e-11,5.25656086672,380.12776796]],[[.01479896629,3.67205697578,74.7815985673]]]],Neptune:[[[[5.31188633046,0,0],[.0179847553,2.9010127389,38.1330356378],[.01019727652,.48580922867,1.4844727083],[.00124531845,4.83008090676,36.6485629295],[42064466e-11,5.41054993053,2.9689454166],[37714584e-11,6.09221808686,35.1640902212],[33784738e-11,1.24488874087,76.2660712756],[16482741e-11,7727998e-11,491.5579294568],[9198584e-11,4.93747051954,39.6175083461],[899425e-10,.27462171806,175.1660598002]],[[38.13303563957,0,0],[16604172e-11,4.86323329249,1.4844727083],[15744045e-11,2.27887427527,38.1330356378]]],[[[.03088622933,1.44104372644,38.1330356378],[27780087e-11,5.91271884599,76.2660712756],[27623609e-11,0,0],[15355489e-11,2.52123799551,36.6485629295],[15448133e-11,3.50877079215,39.6175083461]]],[[[30.07013205828,0,0],[.27062259632,1.32999459377,38.1330356378],[.01691764014,3.25186135653,36.6485629295],[.00807830553,5.18592878704,1.4844727083],[.0053776051,4.52113935896,35.1640902212],[.00495725141,1.5710564165,491.5579294568],[.00274571975,1.84552258866,175.1660598002],[1201232e-10,1.92059384991,1021.2488945514],[.00121801746,5.79754470298,76.2660712756],[.00100896068,.3770272493,73.297125859],[.00135134092,3.37220609835,39.6175083461],[7571796e-11,1.07149207335,388.4651552382]]]]},t_=function(e){var t,r,n,a,i,o,s;let l=2e3+(e-14)/365.24217;return l<-500?-20+32*(t=(l-1820)/100)*t:l<500?(r=(t=l/100)*t,n=t*r,a=r*r,i=r*n,o=n*n,10583.6-1014.41*t+33.78311*r-5.952053*n-.1798452*a+.022174192*i+.0090316521*o):l<1600?(r=(t=(l-1e3)/100)*t,n=t*r,a=r*r,i=r*n,o=n*n,1574.2-556.01*t+71.23472*r+.319781*n-.8503463*a-.005050998*i+.0083572073*o):l<1700?(r=(t=l-1600)*t,n=t*r,120-.9808*t-.01532*r+n/7129):l<1800?(r=(t=l-1700)*t,n=t*r,a=r*r,8.83+.1603*t-.0059285*r+13336e-8*n-a/1174e3):l<1860?(r=(t=l-1800)*t,n=t*r,a=r*r,i=r*n,o=n*n,s=n*a,13.72-.332447*t+.0068612*r+.0041116*n-37436e-8*a+121272e-10*i-1699e-10*o+875e-12*s):l<1900?(r=(t=l-1860)*t,n=t*r,a=r*r,i=r*n,7.62+.5737*t-.251754*r+.01680668*n-4473624e-10*a+i/233174):l<1920?(r=(t=l-1900)*t,n=t*r,a=r*r,-2.79+1.494119*t-.0598939*r+.0061966*n-197e-6*a):l<1941?(r=(t=l-1920)*t,n=t*r,21.2+.84493*t-.0761*r+.0020936*n):l<1961?(r=(t=l-1950)*t,n=t*r,29.07+.407*t-r/233+n/2547):l<1986?(r=(t=l-1975)*t,n=t*r,45.45+1.067*t-r/260-n/718):l<2005?(r=(t=l-2e3)*t,n=t*r,a=r*r,i=r*n,63.86+.3345*t-.060374*r+.0017275*n+651814e-9*a+2373599e-11*i):l<2050?62.92+.32217*(t=l-2e3)+.005589*t*t:l<2150?-20+32*(t=(l-1820)/100)*t-.5628*(2150-l):-20+32*(t=(l-1820)/100)*t};function tk(e){return e+t_(e)/86400}class tT{constructor(e){if(e instanceof tT){this.date=e.date,this.ut=e.ut,this.tt=e.tt;return}if(e instanceof Date&&Number.isFinite(e.getTime())){this.date=e,this.ut=(e.getTime()-tp.getTime())/864e5,this.tt=tk(this.ut);return}if(Number.isFinite(e)){this.date=new Date(tp.getTime()+864e5*e),this.ut=e,this.tt=tk(this.ut);return}throw"Argument must be a Date object, an AstroTime object, or a numeric UTC Julian date."}static FromTerrestrialTime(e){let t=new tT(e);for(;;){let r=e-t.tt;if(1e-12>Math.abs(r))return t;t=t.AddDays(r)}}toString(){return this.date.toISOString()}AddDays(e){return new tT(this.ut+e)}}function tC(e){return e instanceof tT?e:new tT(e)}function tE(e){var t=e.tt/36525;return(((((-434e-10*t-576e-9)*t+.0020034)*t-1831e-7)*t-46.836769)*t+84381.406)/3600}function tA(e){if(!d||Math.abs(d.tt-e.tt)>1e-6){let t=function(e){function t(e){return e%1296e3*484813681109536e-20}let r=e.tt/36525,n=t(1287104.79305+129596581.0481*r),a=t(335779.526232+1739527262.8478*r),i=t(1072260.70369+1602961601.209*r),o=t(450160.398036-6962890.5431*r),s=Math.sin(o),l=Math.cos(o),u=(-0xa417da1-174666*r)*s+33386*l,c=(0x57c9b6b+9086*r)*l+15377*s,d=2*(a-i+o);return u+=(-0xc8f8da-1675*r)*(s=Math.sin(d))-13696*(l=Math.cos(d)),c+=(5730336-3015*r)*l-4587*s,u+=(-2276413-234*r)*(s=Math.sin(d=2*(a+o)))+2796*(l=Math.cos(d)),c+=(978459-485*r)*l+1374*s,u+=(2074554+207*r)*(s=Math.sin(d=2*o))-698*(l=Math.cos(d)),c+=(-897492+470*r)*l-291*s,{dpsi:-135e-6+1e-7*(u+=(1475877-3633*r)*(s=Math.sin(n))+11817*(l=Math.cos(n))),deps:388e-6+1e-7*(c+=(73871-184*r)*l-1924*s)}}(e),r=tE(e),n=r+t.deps/3600;d={tt:e.tt,dpsi:t.dpsi,deps:t.deps,ee:t.dpsi*Math.cos(.017453292519943295*r)/15,mobl:r,tobl:n}}return d}let tF=0;function tP(e,t){return[e.rot[0][0]*t[0]+e.rot[1][0]*t[1]+e.rot[2][0]*t[2],e.rot[0][1]*t[0]+e.rot[1][1]*t[1]+e.rot[2][1]*t[2],e.rot[0][2]*t[0]+e.rot[1][2]*t[1]+e.rot[2][2]*t[2]]}function tD(e,t){let r=e.tt/36525,n=((((-951e-10*r+132851e-9)*r-.00114045)*r-1.0790069)*r+5038.481507)*r,a=((((3337e-10*r-467e-9)*r-.00772503)*r+.0512623)*r-.025754)*r+84381.406,i=((((-56e-9*r+170663e-9)*r-.00121197)*r-2.3814292)*r+10.556403)*r,o=Math.sin(-(n*=484813681109536e-20)),s=Math.cos(-n),l=Math.sin(-(a*=484813681109536e-20)),u=Math.cos(-a),d=Math.sin(i*=484813681109536e-20),f=Math.cos(i),h=f*s-o*d*u,p=f*o*.9174821430652418+d*u*s*.9174821430652418-.397776969112606*d*l,v=f*o*.397776969112606+d*u*s*.397776969112606+.9174821430652418*d*l,m=-d*s-o*f*u,g=-d*o*.9174821430652418+f*u*s*.9174821430652418-.397776969112606*f*l,y=-d*o*.397776969112606+f*u*s*.397776969112606+.9174821430652418*f*l,b=o*l,x=-l*s*.9174821430652418-.397776969112606*u,S=-l*s*.397776969112606+.9174821430652418*u;if(t===c.Into2000)return new tB([[h,p,v],[m,g,y],[b,x,S]]);if(t===c.From2000)return new tB([[h,m,b],[p,g,x],[v,y,S]]);throw"Invalid precess direction"}function tO(e){if(!n||n.tt!==e.tt){let t,r=e.tt/36525,a=((15*tA(e).ee+.014506+((((-368e-10*r-29956e-9)*r-44e-8)*r+1.3915817)*r+4612.156534)*r)/3600+((t=(.779057273264+.00273781191135448*e.ut+e.ut%1)%1*360)<0&&(t+=360),t))%360/15;a<0&&(a+=24),n={tt:e.tt,st:a}}return n.st}function tj(e,t){let r=tA(e),n=.017453292519943295*r.mobl,a=.017453292519943295*r.tobl,i=484813681109536e-20*r.dpsi,o=Math.cos(n),s=Math.sin(n),l=Math.cos(a),u=Math.sin(a),d=Math.cos(i),f=Math.sin(i),h=-f*o,p=-f*s,v=f*l,m=d*o*l+s*u,g=d*s*l-o*u,y=f*u,b=d*o*u-s*l,x=d*s*u+o*l;if(t===c.From2000)return new tB([[d,v,y],[h,m,b],[p,g,x]]);if(t===c.Into2000)return new tB([[d,h,p],[v,m,g],[y,b,x]]);throw"Invalid precess direction"}function tR(e,t,r){var n,a;return r===c.Into2000?(n=tP(tj(t,r),e),tP(tD(t,r),n)):(a=tP(tD(t,r),e),tP(tj(t,r),a))}class tI{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}Length(){return Math.hypot(this.x,this.y,this.z)}}class tL{constructor(e,t,r,n,a,i,o){this.x=e,this.y=t,this.z=r,this.vx=n,this.vy=a,this.vz=i,this.t=o}}class tz{constructor(e,t,r){this.lat=tb(e),this.lon=tb(t),this.dist=tb(r)}}class tN{constructor(e,t,r,n){this.ra=tb(e),this.dec=tb(t),this.dist=tb(r),this.vec=n}}class tB{constructor(e){this.rot=e}}class tG{constructor(e,t,r){this.vec=e,this.elat=tb(t),this.elon=tb(r)}}function tV(e,t){let r=new tI(e[0],e[1],e[2],t),n=r.x*r.x+r.y*r.y,a=Math.sqrt(n+r.z*r.z);if(0===n){if(0===r.z)throw"Indeterminate sky coordinates";return new tN(0,r.z<0?-90:90,a,r)}let i=3.819718634205488*Math.atan2(r.y,r.x);return i<0&&(i+=24),new tN(i,57.29577951308232*Math.atan2(e[2],Math.sqrt(n)),a,r)}function tW(e){if(!(e instanceof tq))throw`Not an instance of the Observer class: ${e}`;if(tb(e.latitude),tb(e.longitude),tb(e.height),e.latitude<-90||e.latitude>90)throw`Latitude ${e.latitude} is out of range. Must be -90..+90.`;return e}class tq{constructor(e,t,r){this.latitude=e,this.longitude=t,this.height=r,tW(this)}}function tH(e,t,r,n,a){let i,o,s,l,d,f,h,p,v,m;tW(r),ty(n),ty(a);let g=tC(t),y=tR((i=tO(g),s=Math.sin(o=.017453292519943295*r.latitude),d=1/Math.hypot(l=Math.cos(o),.996647180302104*s),h=6378.1366*d+(f=r.height/1e3),v=Math.sin(p=(15*i+r.longitude)*.017453292519943295),{pos:[h*l*(m=Math.cos(p))/149597870.69098932,h*l*v/149597870.69098932,(.9933056020041345*d*6378.1366+f)*s/149597870.69098932],vel:[-7292115e-11*h*l*v*86400/149597870.69098932,7292115e-11*h*l*m*86400/149597870.69098932,0]}).pos,g,c.Into2000),b=function(e,t,r){ty(r);let n=tC(t);switch(e){case u.Earth:return new tI(0,0,0,n);case u.Moon:return tX(n);default:let a=function(e,t,r,n){let a;ty(n);let i=tC(e);if(tM(r)){let e=rl(r,i);if(n){let r=function(e,t){let r=tC(t);switch(e){case u.Sun:return new tL(0,0,0,0,0,0,r);case u.SSB:let n=new t9(r.tt);return new tL(-n.Sun.r.x,-n.Sun.r.y,-n.Sun.r.z,-n.Sun.v.x,-n.Sun.v.y,-n.Sun.v.z,r);case u.Mercury:case u.Venus:case u.Earth:case u.Mars:case u.Jupiter:case u.Saturn:case u.Uranus:case u.Neptune:var a;return a=t1(tU[e],r.tt),new tL(a.r.x,a.r.y,a.r.z,a.v.x,a.v.y,a.v.z,r);case u.Pluto:return rs(r,!0);case u.Moon:case u.EMB:let i,o,s=t1(tU.Earth,r.tt),l=e==u.Moon?tY(r):(o=tY(i=tC(r)),new tL(o.x/82.30056,o.y/82.30056,o.z/82.30056,o.vx/82.30056,o.vy/82.30056,o.vz/82.30056,i));return new tL(l.x+s.r.x,l.y+s.r.y,l.z+s.r.z,l.vx+s.v.x,l.vy+s.v.y,l.vz+s.v.z,r);default:if(tM(e)){let t=rl(e,r);return new tL(t.x,t.y,t.z,0,0,0,r)}throw`HelioState: Unsupported body "${e}"`}}(t,i),n=new tI(e.x-r.x,e.y-r.y,e.z-r.z,i),a=173.1446326846693/n.Length();return new tI(n.x+r.vx/a,n.y+r.vy/a,n.z+r.vz/a,i)}let a=rl(t,i);return new tI(e.x-a.x,e.y-a.y,e.z-a.z,i)}a=n?new tI(0,0,0,i):rl(t,i);let o=new ru(t,r,n,a);return function(e,t){let r=t,n=0;for(let a=0;a<10;++a){let a=e(r),i=a.Length()/173.1446326846693;if(i>1)throw"Object is too distant for light-travel solver.";let o=t.AddDays(-i);if((n=Math.abs(o.tt-r.tt))<1e-9)return a;r=o}throw`Light-travel time solver did not converge: dt = ${n}`}(e=>o.Position(e),i)}(n,u.Earth,e,r);return a.t=n,a}}(e,g,a),x=[b.x-y[0],b.y-y[1],b.z-y[2]];return n?tV(tR(x,g,c.From2000),g):tV(x,g)}function tX(e){var t,r;let n,a,i,o=tC(e),s=function(e){let t,r,n,a,i,o,s,l,u,c,d,f,h,p,v,m,g,y,b,x,S,w;++tF;let M=e.tt/36525;function U(e,t,r,n){let a=[];for(let i=0;i<=t-e;++i)a.push(function(e,t){let r,n=[];for(r=0;r<=t-e;++r)n.push(0);return{min:e,array:n}}(r,n));return{min:e,array:a}}function _(e,t,r){let n=e.array[t-e.min];return n.array[r-n.min]}function k(e,t,r,n){let a=e.array[t-e.min];a.array[r-a.min]=n}let T=U(-6,6,1,4),C=U(-6,6,1,4);function E(e){return Math.sin(tv*e)}s=M*M,u=0,w=0,d=0,f=3422.7;var A,F,P,D,O,j,R,I,L,z,N=E(.19833+.05611*M),B=E(.27869+.04508*M),G=E(.16827-.36903*M),V=E(.34734-5.37261*M),W=E(.10498-5.37899*M),q=E(.42681-.41855*M),H=E(.14943-5.37511*M);for(y=.84*N+.31*B+14.27*G+7.26*V+.28*W+.24*q,b=2.94*N+.31*B+14.27*G+9.34*V+1.12*W+.83*q,x=-6.4*N-1.89*q,S=.21*N+.31*B+14.27*G-88.7*V-15.3*W+.24*q-1.86*H,i=1,l=-3332e-9*E(.59734-5.37261*M)-539e-9*E(.35498-5.37899*M)-64e-9*E(.39943-5.37511*M),h=tv*tx(.60643382+1336.85522467*M-313e-8*s)+y/tm,p=tv*tx(.37489701+1325.55240982*M+2565e-8*s)+b/tm,v=tv*tx(.99312619+99.99735956*M-44e-8*s)+x/tm,m=tv*tx(.25909118+1342.2278298*M-892e-8*s)+S/tm,g=tv*tx(.82736186+1236.85308708*M-397e-8*s)+(y-x)/tm;i<=4;++i){switch(i){case 1:n=p,r=4,a=1.000002208;break;case 2:n=v,r=3,a=.997504612-.002495388*M;break;case 3:n=m,r=4,a=1.000002708+139.978*l;break;case 4:n=g,r=6,a=1;break;default:throw`Internal error: I = ${i}`}for(k(T,0,i,1),k(T,1,i,Math.cos(n)*a),k(C,0,i,0),k(C,1,i,Math.sin(n)*a),o=2;o<=r;++o){let e,t;A=_(T,o-1,i),F=_(C,o-1,i),P=_(T,1,i),D=_(C,1,i),e=A*P-F*D,t=F*P+A*D,k(T,o,i,e),k(C,o,i,t)}for(o=1;o<=r;++o)O=-o,j=i,R=_(T,o,i),k(T,O,j,R),I=-o,L=i,z=-_(C,o,i),k(C,I,L,z)}function X(e,t,r,n){for(var a,i,o,s,l={x:1,y:0},u=[0,e,t,r,n],c=1;c<=4;++c){let e,t;0!==u[c]&&(a=l.x,i=l.y,o=_(T,u[c],c),s=_(C,u[c],c),e=a*o-i*s,t=i*o+a*s,l.x=e,l.y=t)}return l}function Y(e,t,r,n,a,i,o,s){var l=X(a,i,o,s);u+=e*l.y,w+=t*l.y,d+=r*l.x,f+=n*l.x}function $(e,t,r,n,a){return e*X(t,r,n,a).y}Y(13.902,14.06,-.001,.2607,0,0,0,4),Y(.403,-4.01,.394,.0023,0,0,0,3),Y(2369.912,2373.36,.601,28.2333,0,0,0,2),Y(-125.154,-112.79,-.725,-.9781,0,0,0,1),Y(1.979,6.98,-.445,.0433,1,0,0,4),Y(191.953,192.72,.029,3.0861,1,0,0,2),Y(-8.466,-13.51,.455,-.1093,1,0,0,1),Y(22639.5,22609.07,.079,186.5398,1,0,0,0),Y(18.609,3.59,-.094,.0118,1,0,0,-1),Y(-4586.465,-4578.13,-.077,34.3117,1,0,0,-2),Y(3.215,5.44,.192,-.0386,1,0,0,-3),Y(-38.428,-38.64,.001,.6008,1,0,0,-4),Y(-.393,-1.43,-.092,.0086,1,0,0,-6),Y(-.289,-1.59,.123,-.0053,0,1,0,4),Y(-24.42,-25.1,.04,-.3,0,1,0,2),Y(18.023,17.93,.007,.1494,0,1,0,1),Y(-668.146,-126.98,-1.302,-.3997,0,1,0,0),Y(.56,.32,-.001,-.0037,0,1,0,-1),Y(-165.145,-165.06,.054,1.9178,0,1,0,-2),Y(-1.877,-6.46,-.416,.0339,0,1,0,-4),Y(.213,1.02,-.074,.0054,2,0,0,4),Y(14.387,14.78,-.017,.2833,2,0,0,2),Y(-.586,-1.2,.054,-.01,2,0,0,1),Y(769.016,767.96,.107,10.1657,2,0,0,0),Y(1.75,2.01,-.018,.0155,2,0,0,-1),Y(-211.656,-152.53,5.679,-.3039,2,0,0,-2),Y(1.225,.91,-.03,-.0088,2,0,0,-3),Y(-30.773,-34.07,-.308,.3722,2,0,0,-4),Y(-.57,-1.4,-.074,.0109,2,0,0,-6),Y(-2.921,-11.75,.787,-.0484,1,1,0,2),Y(1.267,1.52,-.022,.0164,1,1,0,1),Y(-109.673,-115.18,.461,-.949,1,1,0,0),Y(-205.962,-182.36,2.056,1.4437,1,1,0,-2),Y(.233,.36,.012,-.0025,1,1,0,-3),Y(-4.391,-9.66,-.471,.0673,1,1,0,-4),Y(.283,1.53,-.111,.006,1,-1,0,4),Y(14.577,31.7,-1.54,.2302,1,-1,0,2),Y(147.687,138.76,.679,1.1528,1,-1,0,0),Y(-1.089,.55,.021,0,1,-1,0,-1),Y(28.475,23.59,-.443,-.2257,1,-1,0,-2),Y(-.276,-.38,-.006,-.0036,1,-1,0,-3),Y(.636,2.27,.146,-.0102,1,-1,0,-4),Y(-.189,-1.68,.131,-.0028,0,2,0,2),Y(-7.486,-.66,-.037,-.0086,0,2,0,0),Y(-8.096,-16.35,-.74,.0918,0,2,0,-2),Y(-5.741,-.04,0,-9e-4,0,0,2,2),Y(.255,0,0,0,0,0,2,1),Y(-411.608,-.2,0,-.0124,0,0,2,0),Y(.584,.84,0,.0071,0,0,2,-1),Y(-55.173,-52.14,0,-.1052,0,0,2,-2),Y(.254,.25,0,-.0017,0,0,2,-3),Y(.025,-1.67,0,.0031,0,0,2,-4),Y(1.06,2.96,-.166,.0243,3,0,0,2),Y(36.124,50.64,-1.3,.6215,3,0,0,0),Y(-13.193,-16.4,.258,-.1187,3,0,0,-2),Y(-1.187,-.74,.042,.0074,3,0,0,-4),Y(-.293,-.31,-.002,.0046,3,0,0,-6),Y(-.29,-1.45,.116,-.0051,2,1,0,2),Y(-7.649,-10.56,.259,-.1038,2,1,0,0),Y(-8.627,-7.59,.078,-.0192,2,1,0,-2),Y(-2.74,-2.54,.022,.0324,2,1,0,-4),Y(1.181,3.32,-.212,.0213,2,-1,0,2),Y(9.703,11.67,-.151,.1268,2,-1,0,0),Y(-.352,-.37,.001,-.0028,2,-1,0,-1),Y(-2.494,-1.17,-.003,-.0017,2,-1,0,-2),Y(.36,.2,-.012,-.0043,2,-1,0,-4),Y(-1.167,-1.25,.008,-.0106,1,2,0,0),Y(-7.412,-6.12,.117,.0484,1,2,0,-2),Y(-.311,-.65,-.032,.0044,1,2,0,-4),Y(.757,1.82,-.105,.0112,1,-2,0,2),Y(2.58,2.32,.027,.0196,1,-2,0,0),Y(2.533,2.4,-.014,-.0212,1,-2,0,-2),Y(-.344,-.57,-.025,.0036,0,3,0,-2),Y(-.992,-.02,0,0,1,0,2,2),Y(-45.099,-.02,0,-.001,1,0,2,0),Y(-.179,-9.52,0,-.0833,1,0,2,-2),Y(-.301,-.33,0,.0014,1,0,2,-4),Y(-6.382,-3.37,0,-.0481,1,0,-2,2),Y(39.528,85.13,0,-.7136,1,0,-2,0),Y(9.366,.71,0,-.0112,1,0,-2,-2),Y(.202,.02,0,0,1,0,-2,-4),Y(.415,.1,0,.0013,0,1,2,0),Y(-2.152,-2.26,0,-.0066,0,1,2,-2),Y(-1.44,-1.3,0,.0014,0,1,-2,2),Y(.384,-.04,0,0,0,1,-2,-2),Y(1.938,3.6,-.145,.0401,4,0,0,0),Y(-.952,-1.58,.052,-.013,4,0,0,-2),Y(-.551,-.94,.032,-.0097,3,1,0,0),Y(-.482,-.57,.005,-.0045,3,1,0,-2),Y(.681,.96,-.026,.0115,3,-1,0,0),Y(-.297,-.27,.002,-9e-4,2,2,0,-2),Y(.254,.21,-.003,0,2,-2,0,-2),Y(-.25,-.22,.004,.0014,1,3,0,-2),Y(-3.996,0,0,4e-4,2,0,2,0),Y(.557,-.75,0,-.009,2,0,2,-2),Y(-.459,-.38,0,-.0053,2,0,-2,2),Y(-1.298,.74,0,4e-4,2,0,-2,0),Y(.538,1.14,0,-.0141,2,0,-2,-2),Y(.263,.02,0,0,1,1,2,0),Y(.426,.07,0,-6e-4,1,1,-2,-2),Y(-.304,.03,0,3e-4,1,-1,2,0),Y(-.372,-.19,0,-.0027,1,-1,-2,2),Y(.418,0,0,0,0,0,4,0),Y(-.33,-.04,0,0,3,0,2,0),c=0+$(-526.069,0,0,1,-2)+$(-3.352,0,0,1,-4)+$(44.297,1,0,1,-2)+$(-6,1,0,1,-4)+$(20.599,-1,0,1,0)+$(-30.598,-1,0,1,-2)+$(-24.649,-2,0,1,0)+$(-2,-2,0,1,-2)+$(-22.571,0,1,1,-2)+$(10.985,0,-1,1,-2),u+=.82*E(.7736-62.5512*M)+.31*E(.0466-125.1025*M)+.35*E(.5785-25.1042*M)+.66*E(.4591+1335.8075*M)+.64*E(.313-91.568*M)+1.14*E(.148+1331.2898*M)+.21*E(.5918+1056.5859*M)+.44*E(.5784+1322.8595*M)+.24*E(.2275-5.7374*M)+.28*E(.2965+2.6929*M)+.33*E(.3132+6.3368*M);let K=(1.000002708+139.978*l)*(18518.511+1.189+d)*Math.sin(t=m+w/tm)-6.24*Math.sin(3*t)+c;return{geo_eclip_lon:tv*tx((h+u/tm)/tv),geo_eclip_lat:Math.PI/648e3*K,distance_au:4263520978299708e-20*tm/(.999953253*f)}}(o),l=s.distance_au*Math.cos(s.geo_eclip_lat),u=[l*Math.cos(s.geo_eclip_lon),l*Math.sin(s.geo_eclip_lon),s.distance_au*Math.sin(s.geo_eclip_lat)],d=(t=tE(o),a=Math.cos(n=.017453292519943295*t),i=Math.sin(n),r=[u[0],u[1]*a-u[2]*i,u[1]*i+u[2]*a],tP(tD(o,c.Into2000),r));return new tI(d[0],d[1],d[2],o)}function tY(e){let t=tC(e),r=t.AddDays(-1e-5),n=t.AddDays(1e-5),a=tX(r),i=tX(n);return new tL((a.x+i.x)/2,(a.y+i.y)/2,(a.z+i.z)/2,(i.x-a.x)/2e-5,(i.y-a.y)/2e-5,(i.z-a.z)/2e-5,t)}function t$(e,t,r){let n=1,a=0;for(let i of e){let e=0;for(let[r,n,a]of i)e+=r*Math.cos(n+t*a);let o=n*e;r&&(o%=tv),a+=o,n*=t}return a}function tK(e,t){let r=1,n=0,a=0,i=0;for(let o of e){let e=0,s=0;for(let[r,n,a]of o){let o=n+t*a;e+=r*a*Math.sin(o),i>0&&(s+=r*Math.cos(o))}a+=i*n*s-r*e,n=r,r*=t,++i}return a}function tZ(e){return new t3(e[0]+44036e-11*e[1]-190919e-12*e[2],-479966e-12*e[0]+.917482137087*e[1]-.397776982902*e[2],.397776982902*e[1]+.917482137087*e[2])}function tQ(e,t,r){let n=r*Math.cos(t);return[n*Math.cos(e),n*Math.sin(e),r*Math.sin(t)]}function tJ(e,t){let r=t.tt/365250;return tZ(tQ(t$(e[0],r,!0),t$(e[1],r,!1),t$(e[2],r,!1))).ToAstroVector(t)}function t1(e,t){let r=t/365250,n=t$(e[0],r,!0),a=t$(e[1],r,!1),i=t$(e[2],r,!1),o=tK(e[0],r),s=tK(e[1],r),l=tK(e[2],r),u=Math.cos(n),c=Math.sin(n),d=Math.cos(a),f=Math.sin(a),h=l*d*u-i*f*u*s-i*d*c*o,p=l*d*c-i*f*c*s+i*d*u*o,v=+(l*f)+i*d*s;return new t4(t,tZ(tQ(n,a,i)),tZ([h/365250,p/365250,v/365250]))}function t0(e,t,r,n){let a=n/(n+2959122082855911e-19),i=tJ(tU[r],t);e.x+=a*i.x,e.y+=a*i.y,e.z+=a*i.z}let t2=[[-73e4,[-26.118207232108,-14.376168177825,3.384402515299],[.0016339372163656,-.0027861699588508,-.0013585880229445]],[-700800,[41.974905202127,-.448502952929,-12.770351505989],[73458569351457e-17,.0022785014891658,48619778602049e-17]],[-671600,[14.706930780744,44.269110540027,9.353698474772],[-.00210001479998,22295915939915e-17,70143443551414e-17]],[-642400,[-29.441003929957,-6.43016153057,6.858481011305],[84495803960544e-17,-.0030783914758711,-.0012106305981192]],[-613200,[39.444396946234,-6.557989760571,-13.913760296463],[.0011480029005873,.0022400006880665,35168075922288e-17]],[-584e3,[20.2303809507,43.266966657189,7.382966091923],[-.0019754081700585,53457141292226e-17,75929169129793e-17]],[-554800,[-30.65832536462,2.093818874552,9.880531138071],[61010603013347e-18,-.0031326500935382,-99346125151067e-17]],[-525600,[35.737703251673,-12.587706024764,-14.677847247563],[.0015802939375649,.0021347678412429,19074436384343e-17]],[-496400,[25.466295188546,41.367478338417,5.216476873382],[-.0018054401046468,8328308359951e-16,80260156912107e-17]],[-467200,[-29.847174904071,10.636426313081,12.297904180106],[-63257063052907e-17,-.0029969577578221,-74476074151596e-17]],[-438e3,[30.774692107687,-18.236637015304,-14.945535879896],[.0020113162005465,.0019353827024189,-20937793168297e-19]],[-408800,[30.243153324028,38.656267888503,2.938501750218],[-.0016052508674468,.0011183495337525,83333973416824e-17]],[-379600,[-27.288984772533,18.643162147874,14.023633623329],[-.0011856388898191,-.0027170609282181,-49015526126399e-17]],[-350400,[24.519605196774,-23.245756064727,-14.626862367368],[.0024322321483154,.0016062008146048,-23369181613312e-17]],[-321200,[34.505274805875,35.125338586954,.557361475637],[-.0013824391637782,.0013833397561817,84823598806262e-17]],[-292e3,[-23.275363915119,25.818514298769,15.055381588598],[-.0016062295460975,-.0023395961498533,-24377362639479e-17]],[-262800,[17.050384798092,-27.180376290126,-13.608963321694],[.0028175521080578,.0011358749093955,-49548725258825e-17]],[-233600,[38.093671910285,30.880588383337,-1.843688067413],[-.0011317697153459,.0016128814698472,84177586176055e-17]],[-204400,[-18.197852930878,31.932869934309,15.438294826279],[-.0019117272501813,-.0019146495909842,-19657304369835e-18]],[-175200,[8.528924039997,-29.618422200048,-11.805400994258],[.0031034370787005,5139363329243e-16,-77293066202546e-17]],[-146e3,[40.94685725864,25.904973592021,-4.256336240499],[-83652705194051e-17,.0018129497136404,8156422827306e-16]],[-116800,[-12.326958895325,36.881883446292,15.217158258711],[-.0021166103705038,-.001481442003599,17401209844705e-17]],[-87600,[-.633258375909,-30.018759794709,-9.17193287495],[.0032016994581737,-25279858672148e-17,-.0010411088271861]],[-58400,[42.936048423883,20.344685584452,-6.588027007912],[-50525450073192e-17,.0019910074335507,77440196540269e-17]],[-29200,[-5.975910552974,40.61180995846,14.470131723673],[-.0022184202156107,-.0010562361130164,33652250216211e-17]],[0,[-9.875369580774,-27.978926224737,-5.753711824704],[.0030287533248818,-.0011276087003636,-.0012651326732361]],[29200,[43.958831986165,14.214147973292,-8.808306227163],[-14717608981871e-17,.0021404187242141,71486567806614e-17]],[58400,[.67813676352,43.094461639362,13.243238780721],[-.0022358226110718,-63233636090933e-17,47664798895648e-17]],[87600,[-18.282602096834,-23.30503958666,-1.766620508028],[.0025567245263557,-.0019902940754171,-.0013943491701082]],[116800,[43.873338744526,7.700705617215,-10.814273666425],[23174803055677e-17,.0022402163127924,62988756452032e-17]],[146e3,[7.392949027906,44.382678951534,11.629500214854],[-.002193281545383,-21751799585364e-17,59556516201114e-17]],[175200,[-24.981690229261,-16.204012851426,2.466457544298],[.001819398914958,-.0026765419531201,-.0013848283502247]],[204400,[42.530187039511,.845935508021,-12.554907527683],[65059779150669e-17,.0022725657282262,51133743202822e-17]],[233600,[13.999526486822,44.462363044894,9.669418486465],[-.0021079296569252,17533423831993e-17,69128485798076e-17]],[262800,[-29.184024803031,-7.371243995762,6.493275957928],[93581363109681e-17,-.0030610357109184,-.0012364201089345]],[292e3,[39.831980671753,-6.078405766765,-13.909815358656],[.0011117769689167,.0022362097830152,36230548231153e-17]],[321200,[20.294955108476,43.417190420251,7.450091985932],[-.0019742157451535,53102050468554e-17,75938408813008e-17]],[350400,[-30.66999230216,2.318743558955,9.973480913858],[45605107450676e-18,-.0031308219926928,-99066533301924e-17]],[379600,[35.626122155983,-12.897647509224,-14.777586508444],[.0016015684949743,.0021171931182284,18002516202204e-17]],[408800,[26.133186148561,41.232139187599,5.00640132622],[-.0017857704419579,86046232702817e-17,80614690298954e-17]],[438e3,[-29.57674022923,11.863535943587,12.631323039872],[-72292830060955e-17,-.0029587820140709,-708242964503e-15]],[467200,[29.910805787391,-19.159019294,-15.013363865194],[.0020871080437997,.0018848372554514,-38528655083926e-18]],[496400,[31.375957451819,38.050372720763,2.433138343754],[-.0015546055556611,.0011699815465629,83565439266001e-17]],[525600,[-26.360071336928,20.662505904952,14.414696258958],[-.0013142373118349,-.0026236647854842,-42542017598193e-17]],[554800,[22.599441488648,-24.508879898306,-14.484045731468],[.0025454108304806,.0014917058755191,-30243665086079e-17]],[584e3,[35.877864013014,33.894226366071,-.224524636277],[-.0012941245730845,.0014560427668319,84762160640137e-17]],[613200,[-21.538149762417,28.204068269761,15.321973799534],[-.001731211740901,-.0021939631314577,-1631691327518e-16]],[642400,[13.971521374415,-28.339941764789,-13.083792871886],[.0029334630526035,91860931752944e-17,-59939422488627e-17]],[671600,[39.526942044143,28.93989736011,-2.872799527539],[-.0010068481658095,.001702113288809,83578230511981e-17]],[700800,[-15.576200701394,34.399412961275,15.466033737854],[-.0020098814612884,-.0017191109825989,70414782780416e-18]],[73e4,[4.24325283709,-30.118201690825,-10.707441231349],[.0031725847067411,1609846120227e-16,-90672150593868e-17]]];class t3{constructor(e,t,r){this.x=e,this.y=t,this.z=r}clone(){return new t3(this.x,this.y,this.z)}ToAstroVector(e){return new tI(this.x,this.y,this.z,e)}static zero(){return new t3(0,0,0)}quadrature(){return this.x*this.x+this.y*this.y+this.z*this.z}add(e){return new t3(this.x+e.x,this.y+e.y,this.z+e.z)}sub(e){return new t3(this.x-e.x,this.y-e.y,this.z-e.z)}incr(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}decr(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}mul(e){return new t3(e*this.x,e*this.y,e*this.z)}div(e){return new t3(this.x/e,this.y/e,this.z/e)}mean(e){return new t3((this.x+e.x)/2,(this.y+e.y)/2,(this.z+e.z)/2)}neg(){return new t3(-this.x,-this.y,-this.z)}}class t4{constructor(e,t,r){this.tt=e,this.r=t,this.v=r}clone(){return new t4(this.tt,this.r,this.v)}sub(e){return new t4(this.tt,this.r.sub(e.r),this.v.sub(e.v))}}function t5(e,t,r,n){let a=n/(n+2959122082855911e-19),i=t1(tU[r],t);return e.r.incr(i.r.mul(a)),e.v.incr(i.v.mul(a)),i}function t6(e,t,r){let n=r.sub(e),a=n.quadrature();return n.mul(t/(a*Math.sqrt(a)))}class t9{constructor(e){let t=new t4(e,new t3(0,0,0),new t3(0,0,0));this.Jupiter=t5(t,e,u.Jupiter,2825345909524226e-22),this.Saturn=t5(t,e,u.Saturn,8459715185680659e-23),this.Uranus=t5(t,e,u.Uranus,1292024916781969e-23),this.Neptune=t5(t,e,u.Neptune,1524358900784276e-23),this.Jupiter.r.decr(t.r),this.Jupiter.v.decr(t.v),this.Saturn.r.decr(t.r),this.Saturn.v.decr(t.v),this.Uranus.r.decr(t.r),this.Uranus.v.decr(t.v),this.Neptune.r.decr(t.r),this.Neptune.v.decr(t.v),this.Sun=new t4(e,t.r.mul(-1),t.v.mul(-1))}Acceleration(e){let t=t6(e,2959122082855911e-19,this.Sun.r);return t.incr(t6(e,2825345909524226e-22,this.Jupiter.r)),t.incr(t6(e,8459715185680659e-23,this.Saturn.r)),t.incr(t6(e,1292024916781969e-23,this.Uranus.r)),t.incr(t6(e,1524358900784276e-23,this.Neptune.r)),t}}class t8{constructor(e,t,r,n){this.tt=e,this.r=t,this.v=r,this.a=n}clone(){return new t8(this.tt,this.r.clone(),this.v.clone(),this.a.clone())}}class t7{constructor(e,t){this.bary=e,this.grav=t}}function re(e,t,r,n){return new t3(t.x+e*(r.x+e*n.x/2),t.y+e*(r.y+e*n.y/2),t.z+e*(r.z+e*n.z/2))}function rt(e,t,r){return new t3(t.x+e*r.x,t.y+e*r.y,t.z+e*r.z)}function rr(e,t){let r=e-t.tt,n=new t9(e),a=re(r,t.r,t.v,t.a),i=n.Acceleration(a).mean(t.a),o=re(r,t.r,t.v,i),s=t.v.add(i.mul(r)),l=n.Acceleration(o);return new t7(n,new t8(e,o,s,l))}let rn=[];function ra(e,t){let r=Math.floor(e);return r<0?0:r>=t?t-1:r}function ri(e){let t=function(e){let[t,[r,n,a],[i,o,s]]=e;return new t4(t,new t3(r,n,a),new t3(i,o,s))}(e),r=new t9(t.tt),n=t.r.add(r.Sun.r),a=t.v.add(r.Sun.v),i=r.Acceleration(n);return new t7(r,new t8(t.tt,n,a,i))}function ro(e,t,r){let n=ri(e),a=Math.ceil((t-n.grav.tt)/r);for(let e=0;e<a;++e)n=rr(e+1===a?t:n.grav.tt+r,n.grav);return n}function rs(e,t){let r,n,a,i=function(e,t){let r=t2[0][0];if(t<r||t>t2[50][0])return null;let n=ra((t-r)/29200,50);if(!e[n]){let t,r=e[n]=[];r[0]=ri(t2[n]).grav,r[200]=ri(t2[n+1]).grav;let i=r[0].tt;for(t=1;t<200;++t)r[t]=rr(i+=146,r[t-1]).grav;i=r[200].tt;var a=[];for(a[200]=r[200],t=199;t>0;--t)a[t]=rr(i-=146,a[t+1]).grav;for(t=199;t>0;--t){let e=t/200;r[t].r=r[t].r.mul(1-e).add(a[t].r.mul(e)),r[t].v=r[t].v.mul(1-e).add(a[t].v.mul(e)),r[t].a=r[t].a.mul(1-e).add(a[t].a.mul(e))}}return e[n]}(rn,e.tt);if(i){let t=ra((e.tt-i[0].tt)/146,200),a=i[t],o=i[t+1],s=a.a.mean(o.a),l=re(e.tt-a.tt,a.r,a.v,s),u=rt(e.tt-a.tt,a.v,s),c=re(e.tt-o.tt,o.r,o.v,s),d=rt(e.tt-o.tt,o.v,s),f=(e.tt-a.tt)/146;r=l.mul(1-f).add(c.mul(f)),n=u.mul(1-f).add(d.mul(f))}else{let t;r=(t=e.tt<t2[0][0]?ro(t2[0],e.tt,-146):ro(t2[50],e.tt,146)).grav.r,n=t.grav.v,a=t.bary}return t&&(a||(a=new t9(e.tt)),r=r.sub(a.Sun.r),n=n.sub(a.Sun.v)),new tL(r.x,r.y,r.z,n.x,n.y,n.z,e)}function rl(e,t){var r,n,a=tC(t);if(e in tU)return tJ(tU[e],a);if(e===u.Pluto){let e=rs(a,!0);return new tI(e.x,e.y,e.z,a)}if(e===u.Sun)return new tI(0,0,0,a);if(e===u.Moon){var i=tJ(tU.Earth,a),o=tX(a);return new tI(i.x+o.x,i.y+o.y,i.z+o.z,a)}if(e===u.EMB){let e=tJ(tU.Earth,a),t=tX(a);return new tI(e.x+t.x/82.30056,e.y+t.y/82.30056,e.z+t.z/82.30056,a)}if(e===u.SSB){let e;return t0(e=new tI(0,0,0,a),a,u.Jupiter,2825345909524226e-22),t0(e,a,u.Saturn,8459715185680659e-23),t0(e,a,u.Uranus,1292024916781969e-23),t0(e,a,u.Neptune,1524358900784276e-23),e}let s=tM(e);if(s){let e,t,i;return r=new tz(s.dec,15*s.ra,s.dist),n=tC(n=a),e=.017453292519943295*r.lat,t=.017453292519943295*r.lon,new tI((i=r.dist*Math.cos(e))*Math.cos(t),i*Math.sin(t),r.dist*Math.sin(e),n)}throw`HelioVector: Unknown body "${e}"`}new tB([[.999432765338654,-.0336771074697641,0],[.0303959428906285,.902057912352809,.430543388542295],[-.0144994559663353,-.430299169409101,.902569881273754]]);class ru{constructor(e,t,r,n){this.observerBody=e,this.targetBody=t,this.aberration=r,this.observerPos=n}Position(e){this.aberration&&(this.observerPos=rl(this.observerBody,e));let t=rl(this.targetBody,e);return new tI(t.x-this.observerPos.x,t.y-this.observerPos.y,t.z-this.observerPos.z,e)}}class rc{constructor(e,t,r,n,a,i,o,s){this.time=e,this.mag=t,this.phase_angle=r,this.helio_dist=n,this.geo_dist=a,this.gc=i,this.hc=o,this.ring_tilt=s,this.phase_fraction=(1+Math.cos(.017453292519943295*r))/2}}function rd(e,t){var r;let n,a,i,o,s;if(e===u.Earth)throw"The illumination of the Earth is not defined.";let l=tC(t),d=tJ(tU.Earth,l);e===u.Sun?(i=new tI(-d.x,-d.y,-d.z,l),a=new tI(0,0,0,l),n=0):(e===u.Moon?(i=tX(l),a=new tI(d.x+i.x,d.y+i.y,d.z+i.z,l)):i=new tI((a=rl(e,t)).x-d.x,a.y-d.y,a.z-d.z,l),n=function(e,t){let r=e.x*e.x+e.y*e.y+e.z*e.z;if(1e-8>Math.abs(r))throw"AngleBetween: first vector is too short.";let n=t.x*t.x+t.y*t.y+t.z*t.z;if(1e-8>Math.abs(n))throw"AngleBetween: second vector is too short.";let a=(e.x*t.x+e.y*t.y+e.z*t.z)/Math.sqrt(r*n);return a<=-1?180:a>=1?0:57.29577951308232*Math.acos(a)}(i,a));let f=i.Length(),h=a.Length();if(e===u.Sun)o=tg+5*Math.log10(f);else if(e===u.Moon){let e,t;t=(e=.017453292519943295*n)*e,o=-12.717+1.49*Math.abs(e)+t*t*.0431+5*Math.log10(f/.002573570052980638*h)}else if(e===u.Saturn){let e,t,a,u,d,p=(r=n,e=function(e){var t,r,n,a;let i,o,s,l,u,d,f=tA(e.t),[h,p,v]=(t=[e.x,e.y,e.z],r=tP(tD(e.t,c.From2000),t),tP(tj(e.t,c.From2000),r)),m=new tI(h,p,v,e.t),g=.017453292519943295*f.tobl;return n=Math.cos(g),a=Math.sin(g),i=m.x,o=m.y*n+m.z*a,s=-m.y*a+m.z*n,u=0,(l=Math.hypot(i,o))>0&&(u=57.29577951308232*Math.atan2(o,i))<0&&(u+=360),d=57.29577951308232*Math.atan2(s,l),new tG(new tI(i,o,s,m.t),d,u)}(i),t=.017453292519943295*(169.51+382e-7*l.tt),{mag:-9+.044*r+((d=Math.sin(Math.abs(u=Math.asin(.8824554793477292*Math.sin(a=.017453292519943295*e.elat)-.4703959257574088*Math.cos(a)*Math.sin(.017453292519943295*e.elon-t)))))*(-2.6+1.2*d)+5*Math.log10(h*f)),ring_tilt:57.29577951308232*u});o=p.mag,s=p.ring_tilt}else o=function(e,t,r,n){let a,i=0,o=0,s=0;switch(e){case u.Mercury:a=-.6,i=4.98,o=-4.88,s=3.02;break;case u.Venus:t<163.6?(a=-4.47,i=1.03,o=.57,s=.13):(a=.98,i=-1.02);break;case u.Mars:a=-1.52,i=1.6;break;case u.Jupiter:a=-9.4,i=.5;break;case u.Uranus:a=-7.19,i=.25;break;case u.Neptune:a=-6.87;break;case u.Pluto:a=-1,i=4;break;default:throw`VisualMagnitude: unsupported body ${e}`}let l=t/100,c=a+l*(i+l*(o+l*s));return c+5*Math.log10(r*n)}(e,n,h,f);return new rc(l,o,n,h,f,i,a,s)}(o=f||(f={}))[o.Pericenter=0]="Pericenter",o[o.Apocenter=1]="Apocenter",(s=h||(h={})).Penumbral="penumbral",s.Partial="partial",s.Annular="annular",s.Total="total",(l=p||(p={}))[l.Invalid=0]="Invalid",l[l.Ascending=1]="Ascending",l[l.Descending=-1]="Descending";let rf=null,rh=NaN,rp=NaN;function rv(e){return(rh!==e.latitude||rp!==e.longitude)&&(rf=new tq(e.latitude,e.longitude,0),rh=e.latitude,rp=e.longitude),rf}let rm={mercury:{radiusKm:2439.7,albedo:.142},venus:{radiusKm:6051.8,albedo:.689},mars:{radiusKm:3389.5,albedo:.17},jupiter:{radiusKm:69911,albedo:.503},saturn:{radiusKm:58232,albedo:.499},uranus:{radiusKm:25362,albedo:.488},neptune:{radiusKm:24622,albedo:.442}},rg={mercury:u.Mercury,venus:u.Venus,earth:u.Earth,mars:u.Mars,jupiter:u.Jupiter,saturn:u.Saturn,uranus:u.Uranus,neptune:u.Neptune};function ry(e,t){return 180/Math.PI*(2*Math.atan(e/t))*3600}function rb(e){return Math.max(.3,e/1865*2)}let rx=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,rS=`
  uniform vec3 glowColor;
  uniform float glowOpacity;
  varying vec2 vUv;
  void main() {
    vec2 center = vUv - 0.5;
    float dist = length(center) * 2.0;
    float glow = exp(-dist * dist * 4.5);
    glow *= smoothstep(1.0, 0.4, dist);
    gl_FragColor = vec4(glowColor, glow * glowOpacity);
  }
`,rw=new M.ShaderMaterial({vertexShader:rx,fragmentShader:rS,uniforms:{glowColor:{value:new M.Color},glowOpacity:{value:1}},transparent:!0,blending:M.AdditiveBlending,depthWrite:!1}),rM={mercury:"/textures/planets/mercury.jpg",venus:"/textures/planets/venus_atmosphere.jpg",mars:"/textures/planets/mars.jpg",jupiter:"/textures/planets/jupiter.jpg",saturn:"/textures/planets/saturn.jpg",uranus:"/textures/planets/uranus.jpg",neptune:"/textures/planets/neptune.jpg"},rU={mercury:.002,venus:-.001,mars:.003,jupiter:.005,saturn:.004,uranus:.003,neptune:.002};function r_(e){let t,r,n,a,i=(0,g.c)(10),{size:o,opacity:s}=e,l=(0,th.G)(M.TextureLoader,"/textures/planets/saturn_ring.png");i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[Math.PI/2+Math.PI/180*27,0,0],i[0]=t):t=i[0];let u=1.4*o,c=2.3*o;i[1]!==u||i[2]!==c?(r=(0,v.jsx)("ringGeometry",{args:[u,c,64]}),i[1]=u,i[2]=c,i[3]=r):r=i[3];let d=.85*s;return i[4]!==l||i[5]!==d?(n=(0,v.jsx)("meshBasicMaterial",{map:l,transparent:!0,opacity:d,side:M.DoubleSide}),i[4]=l,i[5]=d,i[6]=n):n=i[6],i[7]!==r||i[8]!==n?(a=(0,v.jsxs)("mesh",{rotation:t,children:[r,n]}),i[7]=r,i[8]=n,i[9]=a):a=i[9],a}function rk(e){let t,r,n,a,i,o,s,l,u,c,d=(0,g.c)(32),{planetId:f,size:h,opacity:p,color:y,onClick:b,onPointerOver:S,onPointerOut:w}=e,U=(0,m.useRef)(null),_=rM[f],k=(0,th.G)(M.TextureLoader,_);d[0]!==y||d[1]!==p?((t=rw.clone()).uniforms.glowColor.value=new M.Color(y),t.uniforms.glowOpacity.value=.3*p,d[0]=y,d[1]=p,d[2]=t):t=d[2];let T=t;d[3]!==f?(r=(e,t)=>{if(U.current){let e=rU[f]||.002;U.current.rotation.y=U.current.rotation.y+e}},d[3]=f,d[4]=r):r=d[4],(0,x.D)(r),d[5]!==h?(n=(0,v.jsx)("sphereGeometry",{args:[h,16,16]}),d[5]=h,d[6]=n):n=d[6],d[7]!==p||d[8]!==k?(a=(0,v.jsx)("meshBasicMaterial",{map:k,transparent:!0,opacity:p}),d[7]=p,d[8]=k,d[9]=a):a=d[9],d[10]!==b||d[11]!==w||d[12]!==S||d[13]!==n||d[14]!==a?(i=(0,v.jsxs)("mesh",{ref:U,onClick:b,onPointerOver:S,onPointerOut:w,children:[n,a]}),d[10]=b,d[11]=w,d[12]=S,d[13]=n,d[14]=a,d[15]=i):i=d[15],d[16]!==p||d[17]!==f||d[18]!==h?(o="saturn"===f&&(0,v.jsx)(r_,{size:h,opacity:p}),d[16]=p,d[17]=f,d[18]=h,d[19]=o):o=d[19];let C=3.5*h,E=3.5*h;return d[20]!==C||d[21]!==E?(s=(0,v.jsx)("planeGeometry",{args:[C,E]}),d[20]=C,d[21]=E,d[22]=s):s=d[22],d[23]!==T?(l=(0,v.jsx)("primitive",{object:T,attach:"material"}),d[23]=T,d[24]=l):l=d[24],d[25]!==s||d[26]!==l?(u=(0,v.jsx)(tt,{children:(0,v.jsxs)("mesh",{children:[s,l]})}),d[25]=s,d[26]=l,d[27]=u):u=d[27],d[28]!==u||d[29]!==i||d[30]!==o?(c=(0,v.jsxs)("group",{children:[i,o,u]}),d[28]=u,d[29]=i,d[30]=o,d[31]=c):c=d[31],c}function rT(e){let t,r,n,a,i,o,s,l,u,c,d,f=(0,g.c)(31),{planetId:h,name:p,position:y,color:b,magnitude:x,angularSize:S,onClick:w,onLabelRef:M}=e,[U,_]=(0,m.useState)(!1);f[0]!==S?(t=rb(S),f[0]=S,f[1]=t):t=f[1];let k=Math.max(.5,t);if(f[2]!==x)r=Math.max(.3,Math.min(1,Math.pow(10,-x/2.5)/3.8370724549227875)),f[2]=x,f[3]=r;else r=f[3];let T=r;f[4]!==T||f[5]!==k?(n={size:k,opacity:T},f[4]=T,f[5]=k,f[6]=n):n=f[6];let{size:C,opacity:E}=n;f[7]!==w?(a=e=>{e.stopPropagation(),w?.()},f[7]=w,f[8]=a):a=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{e.stopPropagation(),_(!0),document.body.style.cursor="pointer"},o=()=>{_(!1),document.body.style.cursor="auto"},f[9]=i,f[10]=o):(i=f[9],o=f[10]),f[11]!==b||f[12]!==E||f[13]!==h||f[14]!==C||f[15]!==a?(s=(0,v.jsx)(rk,{planetId:h,size:C,opacity:E,color:b,onClick:a,onPointerOver:i,onPointerOut:o}),f[11]=b,f[12]=E,f[13]=h,f[14]=C,f[15]=a,f[16]=s):s=f[16];let A=C+3;f[17]!==A?(l=[0,A,0],f[17]=A,f[18]=l):l=f[18];let F=U?4.5:3,P=U?"#ffffff":b;return f[19]!==p||f[20]!==F||f[21]!==P?(u=(0,v.jsx)(tt,{children:(0,v.jsx)(te,{fontSize:F,color:P,anchorX:"center",anchorY:"bottom",outlineWidth:.1,outlineColor:"#000000",children:p})}),f[19]=p,f[20]=F,f[21]=P,f[22]=u):u=f[22],f[23]!==M||f[24]!==u||f[25]!==l?(c=(0,v.jsx)("group",{ref:M,position:l,children:u}),f[23]=M,f[24]=u,f[25]=l,f[26]=c):c=f[26],f[27]!==y||f[28]!==c||f[29]!==s?(d=(0,v.jsxs)("group",{position:y,children:[s,c]}),f[27]=y,f[28]=c,f[29]=s,f[30]=d):d=f[30],d}var th=x;let rC=`
  uniform vec3 sunDirection;
  varying vec2 vUv;
  varying float vSunFacing;
  void main() {
    vUv = uv;
    vSunFacing = dot(normal, sunDirection);
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,rE=`
  uniform sampler2D moonMap;
  varying vec2 vUv;
  varying float vSunFacing;

  void main() {
    vec4 texColor = texture2D(moonMap, vUv);

    //   (vSunFacing > 0) ,  
    float shadow = smoothstep(-0.05, 0.05, vSunFacing);

    vec3 darkColor = vec3(0.04, 0.04, 0.06);
    vec3 finalColor = texColor.rgb * mix(darkColor, vec3(1.0), shadow);

    gl_FragColor = vec4(finalColor, texColor.a);
  }
`;function rA({size:e,illumination:t,sunDirection:r,onClick:n,onPointerOver:a,onPointerOut:i}){let o=(0,m.useRef)(null),s=(0,th.G)(M.TextureLoader,"/textures/moons/moon.jpg"),l=(0,m.useMemo)(()=>new M.ShaderMaterial({uniforms:{moonMap:{value:s},sunDirection:{value:new M.Vector3(...r)}},vertexShader:rC,fragmentShader:rE,transparent:!0}),[s]);(0,m.useEffect)(()=>{l.uniforms.sunDirection.value.set(...r)},[l,r]);let u=(0,m.useMemo)(()=>{let e=rw.clone();return e.uniforms.glowColor.value=new M.Color("#f5f0e6"),e.uniforms.glowOpacity.value=.2*t,e},[]);return(0,m.useEffect)(()=>{u.uniforms.glowOpacity.value=.2*t},[u,t]),(0,v.jsxs)("group",{children:[(0,v.jsx)("mesh",{ref:o,onClick:n,onPointerOver:a,onPointerOut:i,material:l,children:(0,v.jsx)("sphereGeometry",{args:[e,32,32]})}),(0,v.jsx)(tt,{children:(0,v.jsxs)("mesh",{children:[(0,v.jsx)("planeGeometry",{args:[3*e,3*e]}),(0,v.jsx)("primitive",{object:u,attach:"material"})]})})]})}function rF(e){let t,r,n,a,i,o,s,l,u=(0,g.c)(22),{position:c,illumination:d,angularSize:f,sunDirection:h,onClick:p,onLabelRef:y}=e,[b,x]=(0,m.useState)(!1),S=rb(f);u[0]!==p?(t=e=>{e.stopPropagation(),p?.()},u[0]=p,u[1]=t):t=u[1],u[2]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{e.stopPropagation(),x(!0),document.body.style.cursor="pointer"},n=()=>{x(!1),document.body.style.cursor="auto"},u[2]=r,u[3]=n):(r=u[2],n=u[3]),u[4]!==d||u[5]!==S||u[6]!==h||u[7]!==t?(a=(0,v.jsx)(rA,{size:S,illumination:d,sunDirection:h,onClick:t,onPointerOver:r,onPointerOut:n}),u[4]=d,u[5]=S,u[6]=h,u[7]=t,u[8]=a):a=u[8];let w=S+3;u[9]!==w?(i=[0,w,0],u[9]=w,u[10]=i):i=u[10];let M=b?4.5:3,U=b?"#ffffff":"#f5f0e6";return u[11]!==M||u[12]!==U?(o=(0,v.jsx)(tt,{children:(0,v.jsx)(te,{fontSize:M,color:U,anchorX:"center",anchorY:"bottom",outlineWidth:.1,outlineColor:"#000000",children:""})}),u[11]=M,u[12]=U,u[13]=o):o=u[13],u[14]!==y||u[15]!==i||u[16]!==o?(s=(0,v.jsx)("group",{ref:y,position:i,children:o}),u[14]=y,u[15]=i,u[16]=o,u[17]=s):s=u[17],u[18]!==c||u[19]!==s||u[20]!==a?(l=(0,v.jsxs)("group",{position:c,children:[a,s]}),u[18]=c,u[19]=s,u[20]=a,u[21]=l):l=u[21],l}var x=x;let rP=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,rD=`
  uniform float time;
  uniform float opacity;
  varying vec2 vUv;

  void main() {
    vec2 center = vUv - 0.5;
    float dist = length(center) * 2.0;
    float angle = atan(center.y, center.x);

    // Radial ray pattern with multiple sine waves
    float rays = 0.0;
    rays += 0.5 * sin(angle * 8.0 + time * 0.3);
    rays += 0.3 * sin(angle * 13.0 - time * 0.5);
    rays += 0.2 * sin(angle * 21.0 + time * 0.7);
    rays = rays * 0.5 + 0.5; // Normalize to 0-1

    // Radial falloff
    float radialFalloff = exp(-dist * dist * 3.0);
    radialFalloff *= smoothstep(1.0, 0.2, dist);

    // Combine rays with falloff (rays stronger at edges)
    float edgeFactor = smoothstep(0.1, 0.5, dist);
    float corona = radialFalloff * mix(1.0, rays, edgeFactor * 0.6);

    // Warm golden-white color gradient
    vec3 innerColor = vec3(1.0, 0.95, 0.8);
    vec3 outerColor = vec3(1.0, 0.6, 0.2);
    vec3 color = mix(innerColor, outerColor, dist);

    gl_FragColor = vec4(color, corona * opacity);
  }
`;function rO({size:e,onClick:t,onPointerOver:r,onPointerOut:n}){let a=(0,m.useRef)(null);(0,m.useRef)(null);let i=(0,th.G)(M.TextureLoader,"/textures/sun.jpg"),o=(0,m.useMemo)(()=>{let e=rw.clone();return e.uniforms.glowColor.value=new M.Color("#FFD54F"),e.uniforms.glowOpacity.value=.6,e},[]),s=(0,m.useMemo)(()=>new M.ShaderMaterial({vertexShader:rP,fragmentShader:rD,uniforms:{time:{value:0},opacity:{value:.4}},transparent:!0,blending:M.AdditiveBlending,depthWrite:!1}),[]);return(0,x.D)((e,t)=>{a.current&&(a.current.rotation.y+=.001),s&&(s.uniforms.time.value+=t)}),(0,v.jsxs)("group",{children:[(0,v.jsxs)("mesh",{ref:a,onClick:t,onPointerOver:r,onPointerOut:n,children:[(0,v.jsx)("sphereGeometry",{args:[e,32,32]}),(0,v.jsx)("meshBasicMaterial",{map:i})]}),(0,v.jsx)(tt,{children:(0,v.jsxs)("mesh",{children:[(0,v.jsx)("planeGeometry",{args:[4*e,4*e]}),(0,v.jsx)("primitive",{object:o,attach:"material"})]})}),(0,v.jsx)(tt,{children:(0,v.jsxs)("mesh",{children:[(0,v.jsx)("planeGeometry",{args:[8*e,8*e]}),(0,v.jsx)("primitive",{object:s,attach:"material"})]})})]})}function rj(e){let t,r,n,a,i,o,s,l,u=(0,g.c)(20),{position:c,angularSize:d,onClick:f,onLabelRef:h}=e,[p,y]=(0,m.useState)(!1),b=rb(d);u[0]!==f?(t=e=>{e.stopPropagation(),f?.()},u[0]=f,u[1]=t):t=u[1],u[2]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{e.stopPropagation(),y(!0),document.body.style.cursor="pointer"},n=()=>{y(!1),document.body.style.cursor="auto"},u[2]=r,u[3]=n):(r=u[2],n=u[3]),u[4]!==b||u[5]!==t?(a=(0,v.jsx)(rO,{size:b,onClick:t,onPointerOver:r,onPointerOut:n}),u[4]=b,u[5]=t,u[6]=a):a=u[6];let x=b+3;u[7]!==x?(i=[0,x,0],u[7]=x,u[8]=i):i=u[8];let S=p?4.5:3,w=p?"#ffffff":"#FFD54F";return u[9]!==S||u[10]!==w?(o=(0,v.jsx)(tt,{children:(0,v.jsx)(te,{fontSize:S,color:w,anchorX:"center",anchorY:"bottom",outlineWidth:.1,outlineColor:"#000000",children:""})}),u[9]=S,u[10]=w,u[11]=o):o=u[11],u[12]!==h||u[13]!==i||u[14]!==o?(s=(0,v.jsx)("group",{ref:h,position:i,children:o}),u[12]=h,u[13]=i,u[14]=o,u[15]=s):s=u[15],u[16]!==c||u[17]!==s||u[18]!==a?(l=(0,v.jsxs)("group",{position:c,children:[a,s]}),u[16]=c,u[17]=s,u[18]=a,u[19]=l):l=u[19],l}var th=x;let rR=Math.PI/180,rI=180/Math.PI;function rL(e){return(e%360+360)%360}function rz(e,t){let r=rL(15*tO(tC(e)));return rL(r+t)}function rN(e,t,r){let{ra:n,dec:a}=e,{latitude:i,longitude:o}=t,s=rL(("number"==typeof r?r:rz(r,o))-n)*rR,l=a*rR,u=i*rR,c=Math.sin(l)*Math.sin(u)+Math.cos(l)*Math.cos(u)*Math.cos(s),d=Math.max(-1,Math.min(1,c)),f=Math.asin(d)*rI,h=Math.sqrt(1-d*d);if(1e-10>Math.abs(h))return{azimuth:0,altitude:f};let p=(Math.sin(l)-c*Math.sin(u))/(h*Math.cos(u)),v=Math.acos(p=Math.max(-1,Math.min(1,p)))*rI;return Math.sin(s)>0&&(v=360-v),{azimuth:rL(v),altitude:f}}function rB(e,t=100){let r=e.azimuth*rR,n=e.altitude*rR,a=Math.cos(n);return[t*a*Math.sin(r),t*Math.sin(n),-t*a*Math.cos(r)]}let rG={x:62.871663999999996*rR,y:192.859508*rR-Math.PI/2,z:122.932*rR-Math.PI/2},rV=new M.Euler(rG.x,rG.y,rG.z,"XYZ"),rW=new M.Matrix4().makeRotationFromEuler(rV),rq=`
  varying vec2 vUv;
  varying vec3 vNormal;

  void main() {
    vUv = uv;
    vNormal = normalize(normalMatrix * normal);
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,rH=`
  uniform sampler2D milkyWayMap;
  uniform float uOpacity;
  uniform float uBrightness;
  uniform float uNebulaBoost;
  uniform float uGlowRadius;
  uniform float uSaturation;
  uniform vec2 uTexelSize;

  varying vec2 vUv;
  varying vec3 vNormal;

  void main() {
    // --- A. 9-tap blur for nebula glow ---
    vec3 blurred = vec3(0.0);
    float totalWeight = 0.0;
    for (int y = -1; y <= 1; y++) {
      for (int x = -1; x <= 1; x++) {
        vec2 offset = vec2(float(x), float(y)) * uTexelSize * uGlowRadius;
        vec2 sampleUv = vUv + offset;
        // Horizontal wrapping for equirectangular texture
        sampleUv.x = fract(sampleUv.x);
        sampleUv.y = clamp(sampleUv.y, 0.0, 1.0);
        float w = 1.0 / (1.0 + float(abs(x) + abs(y))); // center-weighted
        blurred += texture2D(milkyWayMap, sampleUv).rgb * w;
        totalWeight += w;
      }
    }
    blurred /= totalWeight;

    // Original (sharp) sample
    vec4 texColor = texture2D(milkyWayMap, vUv);

    // --- C. Enhanced gamma correction ---
    vec3 color = pow(texColor.rgb, vec3(0.65)) * uBrightness;

    // --- D. Saturation boost ---
    float gray = dot(color, vec3(0.299, 0.587, 0.114));
    color = mix(vec3(gray), color, uSaturation);

    // --- B. Non-linear alpha curve for nebula visibility ---
    float luminance = dot(texColor.rgb, vec3(0.299, 0.587, 0.114));
    float blurredLum = dot(blurred, vec3(0.299, 0.587, 0.114));

    // pow(0.4) boosts faint regions: 0.05 -> 0.27 (5.4x), 1.0 -> 1.0
    float boostedAlpha = pow(luminance, 0.4);
    // S-curve keeps pure black sky transparent
    boostedAlpha = smoothstep(0.0, 1.0, boostedAlpha);

    // Nebula floor: minimum alpha in nebula band regions (based on blurred luminance)
    float nebulaFloor = smoothstep(0.02, 0.15, blurredLum) * uNebulaBoost;

    float alpha = max(boostedAlpha, nebulaFloor) * uOpacity;
    alpha = min(alpha, 0.85); // clamp to prevent over-brightness

    gl_FragColor = vec4(color, alpha);
  }
`;function rX({location:e,currentTime:t,opacity:r=.6,brightness:n=1.2,nebulaBoost:a=.35,glowRadius:i=8,saturation:o=1.4}){let s=(0,th.G)(M.TextureLoader,"/textures/milkyway_panorama.jpg");(0,m.useMemo)(()=>{s&&(s.wrapS=M.RepeatWrapping,s.wrapT=M.ClampToEdgeWrapping,s.minFilter=M.LinearFilter,s.magFilter=M.LinearFilter)},[s]);let l=(0,m.useMemo)(()=>new M.ShaderMaterial({vertexShader:rq,fragmentShader:rH,uniforms:{milkyWayMap:{value:s},uOpacity:{value:r},uBrightness:{value:n},uNebulaBoost:{value:a},uGlowRadius:{value:i},uSaturation:{value:o},uTexelSize:{value:new M.Vector2(1/8192,1/4096)}},transparent:!0,blending:M.AdditiveBlending,side:M.BackSide,depthWrite:!1}),[s]);(0,m.useMemo)(()=>{l.uniforms.uOpacity.value=r,l.uniforms.uBrightness.value=n,l.uniforms.uNebulaBoost.value=a,l.uniforms.uGlowRadius.value=i,l.uniforms.uSaturation.value=o},[l,r,n,a,i,o]);let u=(0,m.useMemo)(()=>{var r;let n,a=(n=rz(t,(r=e).longitude),{x:Math.PI/2-r.latitude*rR,y:-(n*rR),z:0}),i=new M.Euler(a.x,a.y,a.z,"YXZ"),o=new M.Matrix4().makeRotationFromEuler(i),s=new M.Matrix4().multiplyMatrices(o,rW),l=new M.Euler().setFromRotationMatrix(s,"XYZ");return[l.x,l.y,l.z]},[e,t]);return(0,v.jsxs)("mesh",{rotation:u,children:[(0,v.jsx)("sphereGeometry",{args:[150,64,32]}),(0,v.jsx)("primitive",{object:l,attach:"material"})]})}var w=x;let rY=new M.Vector3,r$=new M.Vector3,rK=["mercury","venus","mars","jupiter","saturn","uranus","neptune"],rZ={mercury:"",venus:"",mars:"",jupiter:"",saturn:"",uranus:"",neptune:""},rQ={mercury:"#b5a7a7",venus:"#e6c35c",mars:"#e27b58",jupiter:"#c9b896",saturn:"#e3d5a8",uranus:"#c4e4e8",neptune:"#5b7fde"};function rJ(e){let t,r,n,a,i,o,s,l,c,d,f,h,p,y,b,S,U,_,k,T,C,E,A,F,P,L,z,N,B,G,V,W,q,H,X,Y,$,K,Z,Q,J,ee,et,er,en=(0,g.c)(121),{stars:ea,location:ei,gyroState:eo,deviceOrientationRef:es,onObjectClick:el,onZoomStart:eu}=e,ec=void 0===eo?"off":eo,ed=(0,m.useRef)(null),ef=(0,m.useRef)(null);en[0]===Symbol.for("react.memo_cache_sentinel")?(t=new M.Quaternion,en[0]=t):t=en[0];let eh=(0,m.useRef)(t),{camera:ep}=(0,w.C)();en[1]!==eu?(r={onZoomStart:eu},en[1]=eu,en[2]=r):r=en[2],function({onZoomStart:e}={}){let{camera:t,gl:r}=(0,w.C)(),n=(0,m.useRef)(null),a=(0,m.useRef)(60),i=(0,m.useRef)(e);(0,m.useEffect)(()=>{i.current=e},[e]);let o=(0,m.useCallback)(e=>Math.max(20,Math.min(75,e)),[]),s=(0,m.useCallback)(e=>{let r=o(e);t instanceof M.PerspectiveCamera&&(t.fov=r,t.updateProjectionMatrix())},[t,o]);(0,m.useEffect)(()=>{let e=r.domElement,o=e=>{if(e.preventDefault(),i.current?.(),t instanceof M.PerspectiveCamera){let r=.05*e.deltaY;s(t.fov+r)}},l=e=>{let t=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+r*r)},u=e=>{2===e.touches.length&&(i.current?.(),n.current=l(e.touches),t instanceof M.PerspectiveCamera&&(a.current=t.fov))},c=e=>{if(2===e.touches.length&&null!==n.current){e.preventDefault();let t=l(e.touches),r=n.current/t;s(a.current*r)}},d=()=>{n.current=null};return e.addEventListener("wheel",o,{passive:!1}),e.addEventListener("touchstart",u,{passive:!0}),e.addEventListener("touchmove",c,{passive:!1}),e.addEventListener("touchend",d,{passive:!0}),()=>{e.removeEventListener("wheel",o),e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",c),e.removeEventListener("touchend",d)}},[t,r,s])}(r),en[3]===Symbol.for("react.memo_cache_sentinel")?(n=new Map,en[3]=n):n=en[3];let ev=(0,m.useRef)(n);en[4]===Symbol.for("react.memo_cache_sentinel")?(a=(e,t)=>{t?ev.current.set(e,t):ev.current.delete(e)},en[4]=a):a=en[4];let em=a,[eg,ey]=(0,m.useState)(r1);en[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{let e=setInterval(()=>{ey(new Date)},6e4);return()=>clearInterval(e)},o=[],en[5]=i,en[6]=o):(i=en[5],o=en[6]),(0,m.useEffect)(i,o),en[7]!==eg||en[8]!==ei.longitude?(s=rz(eg,ei.longitude),en[7]=eg,en[8]=ei.longitude,en[9]=s):s=en[9];let eb=s;if(en[10]!==ei||en[11]!==eb||en[12]!==ea){let e;en[14]!==ei||en[15]!==eb?(e=e=>{let t=rN({ra:e.ra,dec:e.dec},ei,eb),r=rB(t,100);return{...e,horizontal:t,position:r}},en[14]=ei,en[15]=eb,en[16]=e):e=en[16],l=ea.map(e),en[10]=ei,en[11]=eb,en[12]=ea,en[13]=l}else l=en[13];let ex=l;en[17]!==eg||en[18]!==ei||en[19]!==eb?(c=rK.map(e=>{let{ra:t,dec:r,magnitude:n,angularSize:a,phaseAngle:i}=function(e,t=new Date,r){let n=rg[e];if(!n)return{ra:0,dec:0,distance:1,magnitude:0,angularSize:0,phaseAngle:0,distanceFromSun:1};let a=tH(n,t,rv(r),!0,!0),i=rd(n,t),o=15*a.ra,s=a.dec,l=a.dist,u=rm[e],c=u?ry(u.radiusKm,149597870.7*l):0;return{ra:o,dec:s,distance:l,magnitude:i.mag,angularSize:c,phaseAngle:i.phase_angle,distanceFromSun:i.helio_dist}}(e,eg,ei),o=rN({ra:t,dec:r},ei,eb),s=rB(o,98);return{name:e,displayName:rZ[e],color:rQ[e],position:s,horizontal:o,ra:t,dec:r,magnitude:n,angularSize:a,phaseAngle:i}}),en[17]=eg,en[18]=ei,en[19]=eb,en[20]=c):c=en[20];let eS=c;en[21]!==eg||en[22]!==ei||en[23]!==eb?({ra:y,dec:f,illumination:p,angularSize:d}=function(e=new Date,t){let r=rv(t),n=tH(u.Moon,e,r,!0,!0),a=rd(u.Moon,e),i=15*n.ra,o=n.dec,s=149597870.7*n.dist,l=ry(1737.4,s);return{ra:i,dec:o,distance:s,illumination:a.phase_fraction,angularSize:l}}(eg,ei),b=rB(h=rN({ra:y,dec:f},ei,eb),95),en[21]=eg,en[22]=ei,en[23]=eb,en[24]=d,en[25]=f,en[26]=h,en[27]=p,en[28]=y,en[29]=b):(d=en[24],f=en[25],h=en[26],p=en[27],y=en[28],b=en[29]);let ew=b;en[30]!==d||en[31]!==f||en[32]!==h||en[33]!==p||en[34]!==ew||en[35]!==y?(S={position:ew,horizontal:h,ra:y,dec:f,illumination:p,angularSize:d},en[30]=d,en[31]=f,en[32]=h,en[33]=p,en[34]=ew,en[35]=y,en[36]=S):S=en[36];let eM=S;if(en[37]!==eg||en[38]!==ei||en[39]!==eb){let{ra:e,dec:t,angularSize:r}=function(e=new Date,t){let r=rv(t),n=tH(u.Sun,e,r,!0,!0),a=15*n.ra,i=n.dec,o=n.dist,s=ry(696340,149597870.7*o);return{ra:a,dec:i,distance:o,angularSize:s}}(eg,ei),n=rN({ra:e,dec:t},ei,eb);U=rB(n,96),_=n,k=e,T=t,C=r,E=n.altitude>0,en[37]=eg,en[38]=ei,en[39]=eb,en[40]=U,en[41]=_,en[42]=k,en[43]=T,en[44]=C,en[45]=E}else U=en[40],_=en[41],k=en[42],T=en[43],C=en[44],E=en[45];en[46]!==U||en[47]!==_||en[48]!==k||en[49]!==T||en[50]!==C||en[51]!==E?(A={position:U,horizontal:_,ra:k,dec:T,angularSize:C,visible:E},en[46]=U,en[47]=_,en[48]=k,en[49]=T,en[50]=C,en[51]=E,en[52]=A):A=en[52];let eU=A,[e_,ek,eT]=eU.position,eC=Math.sqrt(e_*e_+ek*ek+eT*eT),eE=e_/eC,eA=ek/eC,eF=eT/eC;en[53]!==eE||en[54]!==eA||en[55]!==eF?(F=[eE,eA,eF],en[53]=eE,en[54]=eA,en[55]=eF,en[56]=F):F=en[56];let eP=F;en[57]!==ep?(P=()=>{ep.position.set(0,0,.1),ep.lookAt(0,0,-1)},L=[ep],en[57]=ep,en[58]=P,en[59]=L):(P=en[58],L=en[59]),(0,m.useEffect)(P,L),en[60]!==ec?(z=()=>{"off"===ec&&(ef.current=null)},N=[ec],en[60]=ec,en[61]=z,en[62]=N):(z=en[61],N=en[62]),(0,m.useEffect)(z,N),en[63]!==ep||en[64]!==es||en[65]!==ec?(B=(e,t)=>{if("active"===ec&&es?.current){var r;let e,n,a,i,o,s,l=es.current,u=window.screen?.orientation?.angle!==void 0?window.screen.orientation.angle:void 0!==window.orientation?window.orientation:0,c=(e=eh.current??new M.Quaternion,n=null!=l.webkitCompassHeading?360-l.webkitCompassHeading:l.alpha,a=M.MathUtils.degToRad(n),i=M.MathUtils.degToRad(l.beta),o=M.MathUtils.degToRad(l.gamma),s=M.MathUtils.degToRad(u),O.set(i,a,-o,"YXZ"),e.setFromEuler(O),e.multiply(R),j.setFromAxisAngle(I,-s),e.multiply(j),e);if(ef.current){let e,n=1-Math.exp(-5*Math.min(t,.1));r=ef.current,(e=ep.quaternion??new M.Quaternion).copy(r),e.slerp(c,n),ef.current.copy(ep.quaternion)}else ep.quaternion.copy(c),ef.current=c.clone()}let n=Math.tan(ep.fov*Math.PI/360);ep.getWorldDirection(rY),ev.current.forEach(e=>{e.getWorldPosition(r$),r$.normalize();let t=Math.max(rY.dot(r$),.15);e.scale.setScalar(n*t)})},en[63]=ep,en[64]=es,en[65]=ec,en[66]=B):B=en[66],(0,x.D)(B);let eD="active"!==ec,eO=eU.visible?.3:.05;en[67]!==eO?(G=(0,v.jsx)("ambientLight",{intensity:eO}),en[67]=eO,en[68]=G):G=en[68],en[69]===Symbol.for("react.memo_cache_sentinel")?(V=(0,v.jsx)("sphereGeometry",{args:[200,16,8]}),en[69]=V):V=en[69];let ej=eU.visible?"#1a1a3a":"#0a0a15";en[70]!==ej?(W=(0,v.jsxs)("mesh",{children:[V,(0,v.jsx)("meshBasicMaterial",{color:ej,side:M.BackSide})]}),en[70]=ej,en[71]=W):W=en[71];let eR=eU.visible?.15:.7,eI=eU.visible?.4:1.4,eL=eU.visible?.08:.35,ez=eU.visible?4:8,eN=eU.visible?1.1:1.4;if(en[72]!==eg||en[73]!==ei||en[74]!==eR||en[75]!==eI||en[76]!==eL||en[77]!==ez||en[78]!==eN?(q=(0,v.jsx)(rX,{location:ei,currentTime:eg,opacity:eR,brightness:eI,nebulaBoost:eL,glowRadius:ez,saturation:eN}),en[72]=eg,en[73]=ei,en[74]=eR,en[75]=eI,en[76]=eL,en[77]=ez,en[78]=eN,en[79]=q):q=en[79],en[80]!==el?(H=e=>el?.("star",e.id,e.name||`HR ${e.id}`,{ra:e.ra,dec:e.dec},e.mag,e.con||void 0),en[80]=el,en[81]=H):H=en[81],en[82]!==H||en[83]!==ex?(X=(0,v.jsx)(tc,{stars:ex,onStarClick:H}),en[82]=H,en[83]=ex,en[84]=X):X=en[84],en[85]!==el||en[86]!==eS){let e;en[88]!==el?(e=e=>(0,v.jsx)(rT,{planetId:e.name,name:e.displayName,position:e.position,color:e.color,magnitude:e.magnitude,angularSize:e.angularSize,onClick:()=>el?.("planet",e.name,e.displayName,{ra:e.ra,dec:e.dec},e.magnitude),onLabelRef:t=>em(`planet-${e.name}`,t)},e.name),en[88]=el,en[89]=e):e=en[89],Y=eS.map(e),en[85]=el,en[86]=eS,en[87]=Y}else Y=en[87];return en[90]!==el||en[91]!==eU.dec||en[92]!==eU.ra?($=()=>el?.("sun","sun","",{ra:eU.ra,dec:eU.dec}),en[90]=el,en[91]=eU.dec,en[92]=eU.ra,en[93]=$):$=en[93],en[94]===Symbol.for("react.memo_cache_sentinel")?(K=e=>em("sun",e),en[94]=K):K=en[94],en[95]!==eU.angularSize||en[96]!==eU.position||en[97]!==$?(Z=(0,v.jsx)(rj,{position:eU.position,angularSize:eU.angularSize,onClick:$,onLabelRef:K}),en[95]=eU.angularSize,en[96]=eU.position,en[97]=$,en[98]=Z):Z=en[98],en[99]!==eM.dec||en[100]!==eM.ra||en[101]!==el?(Q=()=>el?.("moon","moon","",{ra:eM.ra,dec:eM.dec}),en[99]=eM.dec,en[100]=eM.ra,en[101]=el,en[102]=Q):Q=en[102],en[103]===Symbol.for("react.memo_cache_sentinel")?(J=e=>em("moon",e),en[103]=J):J=en[103],en[104]!==eM.angularSize||en[105]!==eM.illumination||en[106]!==eM.position||en[107]!==eP||en[108]!==Q?(ee=(0,v.jsx)(rF,{position:eM.position,illumination:eM.illumination,angularSize:eM.angularSize,sunDirection:eP,onClick:Q,onLabelRef:J}),en[104]=eM.angularSize,en[105]=eM.illumination,en[106]=eM.position,en[107]=eP,en[108]=Q,en[109]=ee):ee=en[109],en[110]!==eD?(et=eD&&(0,v.jsx)(D,{ref:ed,enableZoom:!1,enablePan:!1,rotateSpeed:-.5,minPolarAngle:0,maxPolarAngle:Math.PI,target:[0,0,0]}),en[110]=eD,en[111]=et):et=en[111],en[112]!==G||en[113]!==W||en[114]!==q||en[115]!==X||en[116]!==Y||en[117]!==Z||en[118]!==ee||en[119]!==et?(er=(0,v.jsxs)(v.Fragment,{children:[G,W,q,X,Y,Z,ee,et]}),en[112]=G,en[113]=W,en[114]=q,en[115]=X,en[116]=Y,en[117]=Z,en[118]=ee,en[119]=et,en[120]=er):er=en[120],er}function r1(){return new Date}let r0={seoul:{name:"",latitude:37.5665,longitude:126.978},tokyo:{name:"",latitude:35.6762,longitude:139.6503},beijing:{name:"",latitude:39.9042,longitude:116.4074},newyork:{name:"",latitude:40.7128,longitude:-74.006},london:{name:"",latitude:51.5074,longitude:-.1278},paris:{name:"",latitude:48.8566,longitude:2.3522},sydney:{name:"",latitude:-33.8688,longitude:151.2093},losangeles:{name:"",latitude:34.0522,longitude:-118.2437},moscow:{name:"",latitude:55.7558,longitude:37.6173},dubai:{name:"",latitude:25.2048,longitude:55.2708}};function r2(e){let t,r,n,a,i,o,s=(0,g.c)(18),{location:l,selectedObject:u,onClearSelection:c}=e;t:{let e;if(!u){t=null;break t}s[0]!==u.constellation||s[1]!==u.magnitude||s[2]!==u.name||s[3]!==u.type?(e=function(e,t,r,n){if("sun"===e)return ti;if("moon"===e)return ta;if("planet"===e)return tn[t]||{displayName:t,description:" "};if(tr[t])return tr[t];let a=r?to[r]:void 0,i=void 0!==n?`${n.toFixed(1)}`:"";return a&&i?{displayName:t,description:`${a} ${i} `}:a?{displayName:t,description:`${a} `}:i?{displayName:t,description:`${i} `}:{displayName:t,description:""}}(u.type,u.name,u.constellation,u.magnitude),s[0]=u.constellation,s[1]=u.magnitude,s[2]=u.name,s[3]=u.type,s[4]=e):e=s[4],t=e}let d=t,f=u?"star"===u.type?"":"planet"===u.type?"":"sun"===u.type?"":"":null;if(s[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,v.jsx)("span",{className:"text-xs text-gray-400 block mb-1",children:" "}),s[5]=r):r=s[5],s[6]!==l){let e,t;e=l.latitude>=0?"N":"S",t=l.longitude>=0?"E":"W",n=`${Math.abs(l.latitude).toFixed(2)}\xb0${e}, ${Math.abs(l.longitude).toFixed(2)}\xb0${t}`,s[6]=l,s[7]=n}else n=s[7];return s[8]!==n?(a=(0,v.jsxs)("div",{className:"mb-3 pb-3 border-b border-white/15",children:[r,(0,v.jsx)("div",{className:"text-sm font-mono text-blue-300",children:n})]}),s[8]=n,s[9]=a):a=s[9],s[10]!==d||s[11]!==c||s[12]!==u||s[13]!==f?(i=u&&d&&(0,v.jsxs)("div",{className:"pt-0",children:[(0,v.jsxs)("div",{className:"flex justify-between items-start",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-base font-bold text-white",children:d.displayName}),(0,v.jsxs)("span",{className:"text-xs text-gray-400",children:[f,void 0!==u.magnitude&&(0,v.jsxs)(v.Fragment,{children:["  ",u.magnitude.toFixed(1),""]})]})]}),(0,v.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors ml-2 shrink-0",children:(0,v.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,v.jsx)("p",{className:"text-sm text-gray-300 mt-1",children:d.description})]}),s[10]=d,s[11]=c,s[12]=u,s[13]=f,s[14]=i):i=s[14],s[15]!==a||s[16]!==i?(o=(0,v.jsxs)("div",{className:"absolute top-4 left-4 bg-black/30 backdrop-blur-xl border border-white/15 text-white p-4 rounded-2xl shadow-2xl z-10 min-w-[260px] max-w-[320px]",children:[a,i]}),s[15]=a,s[16]=i,s[17]=o):o=s[17],o}function r3(e){let t,r,n=(0,g.c)(3),{onRequestPermission:a}=e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.jsxs)("div",{className:"text-center px-8 pointer-events-none",children:[(0,v.jsx)("p",{className:"text-white/90 text-lg",children:"   "}),(0,v.jsx)("p",{className:"text-white/50 text-sm mt-2",children:"    "})]}),n[0]=t):t=n[0],n[1]!==a?(r=(0,v.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 cursor-pointer",onClick:a,children:t}),n[1]=a,n[2]=r):r=n[2],r}let r4={showStars:!0,selectedObject:null};function r5(e){return{...e,showStars:!e.showStars}}function r6(e,t){let r=2*Math.PI*t*e;return r/(r+1)}class r9{y=null;s=null;filter(e,t){return null===this.y||null===this.s?this.s=e:this.s=t*e+(1-t)*this.s,this.y=e,this.s}hasLastValue(){return null!==this.s}lastValue(){return this.s}}class r8{freq;minCutoff;beta;dCutoff;xFilter=new r9;dxFilter=new r9;lastTime=null;constructor(e,t=.5,r=.002,n=1){this.freq=e,this.minCutoff=t,this.beta=r,this.dCutoff=n}filter(e,t){if(void 0!==t&&null!==this.lastTime){let e=t-this.lastTime;e>0&&(this.freq=1/e)}this.lastTime=t??null;let r=1/this.freq,n=this.xFilter.hasLastValue()?(e-this.xFilter.lastValue())*this.freq:0,a=this.dxFilter.filter(n,r6(r,this.dCutoff)),i=this.minCutoff+this.beta*Math.abs(a);return this.xFilter.filter(e,r6(r,i))}}class r7{filter;range;lastValue=null;accumulated=0;constructor(e,t,r=.5,n=.002,a=1){this.filter=new r8(e,r,n,a),this.range=t}filterValue(e,t){if(null===this.lastValue)return this.lastValue=e,this.accumulated=e,this.filter.filter(this.accumulated,t);let r=e-this.lastValue;return r>this.range/2&&(r-=this.range),r<-this.range/2&&(r+=this.range),this.accumulated+=r,this.lastValue=e,(this.filter.filter(this.accumulated,t)%this.range+this.range)%this.range}}function ne(){return"undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission}function nt(){let[e,t]=(0,m.useState)([]),[r,n]=(0,m.useState)(!0),{location:a,loading:i,error:o,permissionDenied:s,setManualLocation:l}=function(){let[e,t]=(0,m.useState)({location:null,error:null,loading:!0,permissionDenied:!1}),r=(0,m.useCallback)(()=>{navigator.geolocation?(t(e=>({...e,loading:!0,error:null})),navigator.geolocation.getCurrentPosition(e=>{t({location:{latitude:e.coords.latitude,longitude:e.coords.longitude},error:null,loading:!1,permissionDenied:!1})},e=>{let r,n=!1;switch(e.code){case e.PERMISSION_DENIED:r="  .",n=!0;break;case e.POSITION_UNAVAILABLE:r="    .";break;case e.TIMEOUT:r="   .";break;default:r="    ."}t({location:null,error:r,loading:!1,permissionDenied:n})},{enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5})):t({location:null,error:"     .",loading:!1,permissionDenied:!1})},[]),n=(0,m.useCallback)(e=>{t({location:e,error:null,loading:!1,permissionDenied:!1})},[]),a=(0,m.useCallback)(e=>{let t=r0[e];t&&n({latitude:t.latitude,longitude:t.longitude})},[n]);return(0,m.useEffect)(()=>{r()},[r]),{...e,requestLocation:r,setManualLocation:n,setPresetLocation:a}}(),{selectedObject:u,setSelectedObject:c,clearSelection:d}=function(){let e,t,r,n,a,i,o,s=(0,g.c)(8),[l,u]=(0,m.useState)(r4);s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{u(r5)},s[0]=e):e=s[0];let c=e;s[1]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{u(t=>({...t,selectedObject:e}))},s[1]=t):t=s[1];let d=t;s[2]===Symbol.for("react.memo_cache_sentinel")?(r=(e,t,r,n,a)=>{d({type:"star",id:e,name:t,displayName:t,coords:r,magnitude:n,constellation:a})},s[2]=r):r=s[2];let f=r;s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(e,t,r,n)=>{d({type:"planet",id:e,name:t,displayName:t,coords:r,magnitude:n})},s[3]=n):n=s[3];let h=n;s[4]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{d({type:"moon",id:"moon",name:"",displayName:" (Moon)",coords:e})},s[4]=a):a=s[4];let p=a;s[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{d(null)},s[5]=i):i=s[5];let v=i;return s[6]!==l?(o={...l,toggleStars:c,setSelectedObject:d,selectStar:f,selectPlanet:h,selectMoon:p,clearSelection:v},s[6]=l,s[7]=o):o=s[7],o}(),{orientationRef:f,gyroState:h,supported:p,needsPermission:y,requestPermission:x,pause:S,autoEnable:w}=function(){let e=(0,m.useRef)(null),[t,r]=(0,m.useState)("off"),[n,a]=(0,m.useState)(!1),[i,o]=(0,m.useState)("prompt"),[s,l]=(0,m.useState)(!1),u=(0,m.useRef)(null),c=(0,m.useRef)(null),d=(0,m.useRef)(null),f=(0,m.useRef)("off"),h=(0,m.useRef)(new r7(60,360,.3,.007,1)),p=(0,m.useRef)(new r7(60,360,.3,.007,1)),v=(0,m.useRef)(new r8(60,.3,.007,1)),g=(0,m.useRef)(new r7(60,360,.3,.007,1));(0,m.useEffect)(()=>{f.current=t},[t]),(0,m.useEffect)(()=>{a("DeviceOrientationEvent"in window)},[]),(0,m.useEffect)(()=>()=>{u.current&&clearTimeout(u.current)},[]);let y=(0,m.useCallback)(t=>{let{alpha:n,beta:a,gamma:i,absolute:o}=t;if(null===n||null===a||null===i)return;let s={alpha:n,beta:a,gamma:i,absolute:o??!1,webkitCompassHeading:t.webkitCompassHeading??void 0};if("paused"===f.current){let e=c.current;if(e){let t=Math.abs(s.alpha-e.alpha);t>180&&(t=360-t),t+Math.abs(s.beta-e.beta)+Math.abs(s.gamma-e.gamma)>30&&(r("active"),u.current&&(clearTimeout(u.current),u.current=null))}c.current=s}d.current=s;let l=performance.now()/1e3;e.current={alpha:h.current.filterValue(s.alpha,l),beta:p.current.filterValue(s.beta+180,l)-180,gamma:v.current.filter(s.gamma,l),absolute:s.absolute,webkitCompassHeading:null!=s.webkitCompassHeading?g.current.filterValue(s.webkitCompassHeading,l):void 0}},[]),b=(0,m.useCallback)(async()=>{if(!n)return!1;if(!ne())return o("granted"),l(!1),r("active"),!0;try{let e=await DeviceOrientationEvent.requestPermission();if("granted"===e)return o("granted"),l(!1),r("active"),!0;return o("denied"),l(!1),!1}catch(e){return console.error("Error requesting device orientation permission:",e),o("denied"),l(!1),!1}},[n]),x=(0,m.useCallback)(()=>{n&&("prompt"===i&&ne()?b().then(e=>{e&&r("active")}):"denied"!==i&&r("active"))},[n,i,b]),S=(0,m.useCallback)(()=>{r("off"),u.current&&(clearTimeout(u.current),u.current=null)},[]),w=(0,m.useCallback)(()=>{"active"===f.current&&(r("paused"),c.current=d.current,u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{"paused"===f.current&&r("active"),u.current=null},1e4))},[]),M=(0,m.useCallback)(()=>{"paused"===f.current&&(r("active"),u.current&&(clearTimeout(u.current),u.current=null))},[]),U=(0,m.useCallback)(()=>{if(n)if(ne())l(!0);else{o("granted"),r("active");let e=!1,t=()=>{e=!0};window.addEventListener("deviceorientation",t,!0),setTimeout(()=>{window.removeEventListener("deviceorientation",t,!0),e||r("off")},3e3)}},[n]);return(0,m.useEffect)(()=>{if(("active"===t||"paused"===t)&&n)return window.addEventListener("deviceorientation",y,!0),()=>{window.removeEventListener("deviceorientation",y,!0)}},[t,n,y]),{orientation:e.current,orientationRef:e,gyroState:t,supported:n,permissionState:i,needsPermission:s,requestPermission:b,enable:x,disable:S,pause:w,resume:M,autoEnable:U}}();(0,m.useEffect)(()=>{p&&w()},[p,w]),(0,m.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/stars.json");if(!e.ok)throw Error("Failed to load data");let r=await e.json();t(r)}catch(e){console.error("Error loading celestial data:",e)}finally{n(!1)}})()},[]),(0,m.useEffect)(()=>{!i&&!a&&(o||s)&&l(r0.seoul)},[i,a,o,s,l]);let M=(0,m.useCallback)((e,t,r,n,a,i)=>{n&&(S(),c({type:e,id:t,name:r,displayName:r,coords:n,magnitude:a,constellation:i}))},[c,S]),U=(0,m.useCallback)(()=>{S()},[S]);if(r||i&&!a)return(0,v.jsxs)("div",{className:"w-full h-screen bg-black flex flex-col items-center justify-center",children:[(0,v.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),(0,v.jsx)("p",{className:"text-white text-lg",children:r?"   ...":"   ..."})]});let _=a||r0.seoul;return(0,v.jsxs)("div",{className:"relative w-full h-screen bg-black",children:[(0,v.jsx)(b,{className:"absolute inset-0",onPointerMissed:d,children:(0,v.jsx)(rJ,{stars:e,location:_,gyroState:h,deviceOrientationRef:f,onObjectClick:M,onZoomStart:U})}),y&&(0,v.jsx)(r3,{onRequestPermission:x}),(0,v.jsx)(r2,{location:_,selectedObject:u,onClearSelection:d})]})}e.s(["default",()=>nt],52683)}]);